---
title: "Backtrader æ•™ç¨‹ä¸€ï¼šä¸ºä»€ä¹ˆé€‰æ‹© Backtraderï¼Ÿ"
date: 2025-07-03T15:18:08+08:00
draft: false
comment: true
---

ä»Šå¤©æƒ³è·Ÿå¤§å®¶èŠä¸€ä¸ªé‡åŒ–äº¤æ˜“ä¸­éžå¸¸å®žç”¨çš„å·¥å…·â€”â€”Backtraderã€‚

å¦‚æžœä½ å¯¹é‡åŒ–äº¤æ˜“æ„Ÿå…´è¶£ï¼Œå¯èƒ½å·²ç»å¬è¯´è¿‡ç­–ç•¥å›žæµ‹ã€‚ç®€å•è¯´ï¼Œå°±æ˜¯ç”¨åŽ†å²æ•°æ®åŽ»éªŒè¯ä¸€ä¸ªäº¤æ˜“ç­–ç•¥æœ‰æ²¡æœ‰æ•ˆã€‚åœ¨Pythoné‡Œï¼Œå…¶å®žæœ‰ä¸å°‘å›žæµ‹æ¡†æž¶å¯ä»¥ç”¨ï¼Œæ¯”å¦‚backtesting.pyã€vectorbtï¼Œè¿˜æœ‰å·²ç»ä¸æ›´æ–°çš„ ziplineã€‚

ä½†ä»Šå¤©ï¼Œæˆ‘è¦é‡ç‚¹ä»‹ç»çš„æ˜¯â€”â€”Backtraderã€‚

## **ðŸ¤” ä¸ºä»€ä¹ˆé€‰Backtraderï¼Ÿ**

å› ä¸ºæž„å»ºä¸€ä¸ªç¨³å¥çš„äº¤æ˜“ç³»ç»Ÿï¼Œå…‰æœ‰ç­–ç•¥è¿˜ä¸å¤Ÿï¼Œè¿˜éœ€è¦æœ‰æ¸…æ™°çš„æž¶æž„ã€å¯æ‰©å±•çš„åŠŸèƒ½ï¼Œä»¥åŠæ¨¡å—åŒ–çš„è®¾è®¡ã€‚è€ŒBacktraderï¼Œå°±æ˜¯ä¸€ä¸ªä»¥ç­–ç•¥å›žæµ‹ä¸ºæ ¸å¿ƒï¼ŒåŒæ—¶å¸®ä½ æ­å»ºäº¤æ˜“ç³»ç»Ÿéª¨æž¶çš„Pythonæ¡†æž¶ã€‚

å®ƒä¸åªæ˜¯å›žæµ‹å·¥å…·ï¼Œæ›´æ˜¯ä¸€ä¸ªè½»é‡çº§çš„â€œäº¤æ˜“ç³»ç»Ÿéª¨æž¶â€ã€‚

## **ðŸ” Backtraderæ˜¯ä»€ä¹ˆï¼Ÿ**

Backtraderæ˜¯ä¸€ä¸ªç”¨Pythonå†™çš„é‡åŒ–å›žæµ‹æ¡†æž¶ï¼Œä¸“é—¨ä¸ºä¸ªäººäº¤æ˜“è€…å’Œç ”ç©¶è€…è®¾è®¡ã€‚å®ƒæ”¯æŒç­–ç•¥å¼€å‘ã€åŽ†å²å›žæµ‹ã€å¯è§†åŒ–åˆ†æžï¼Œç”šè‡³è¿˜èƒ½æŽ¥å…¥å®žç›˜äº¤æ˜“ã€‚

æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒé‡‡ç”¨é¢å‘å¯¹è±¡çš„è®¾è®¡ï¼ŒæŠŠç­–ç•¥ã€æ•°æ®ã€è®¢å•ã€èµ„é‡‘è´¦æˆ·è¿™äº›æ¨¡å—åˆ†å¾—æ¸…æ¸…æ¥šæ¥šï¼Œä½ ä¸ç”¨æŠŠæ‰€æœ‰ä»£ç éƒ½å¡žåœ¨ä¸€ä¸ªè„šæœ¬é‡Œï¼Œè€Œæ˜¯åƒæ­ç§¯æœ¨ä¸€æ ·ï¼Œæœ‰æ¡ä¸ç´Šåœ°æ­å»ºç³»ç»Ÿã€‚

## **ðŸ§± æ ¸å¿ƒæž¶æž„ï¼šäº”å¤§æ¨¡å—**

Backtraderçš„æž¶æž„éžå¸¸æ¸…æ™°ï¼Œä¸»è¦ç”±äº”ä¸ªæ¨¡å—ç»„æˆï¼š

**ç­–ç•¥é€»è¾‘ï¼ˆStrategyï¼‰**  

ä½ æŠŠä¹°å–ä¿¡å·çš„åˆ¤æ–­å†™åœ¨è¿™é‡Œï¼Œæ¡†æž¶è‡ªåŠ¨å¸®ä½ æ‰§è¡Œè®¢å•ï¼Œä½ ä¸ç”¨æ“å¿ƒå…·ä½“æ€Žä¹ˆæˆäº¤ã€‚

**æ•°æ®è¾“å…¥ï¼ˆDataFeedï¼‰**  

æ”¯æŒä»ŽCSVã€Pandasã€ç”šè‡³å®žæ—¶APIå¯¼å…¥æ•°æ®ï¼Œä¸ç®¡æ˜¯æ—¥çº¿ã€åˆ†é’Ÿçº¿ï¼Œè¿˜æ˜¯å¤šä¸ªè‚¡ç¥¨ï¼Œéƒ½èƒ½ä¸€èµ·å›žæµ‹ã€‚

**äº¤æ˜“ä¸Žèµ„é‡‘ç®¡ç†ï¼ˆBrokerï¼‰**  

æ¨¡æ‹ŸçœŸå®žå¸‚åœºçš„æˆäº¤ï¼Œæ”¯æŒå¸‚ä»·å•ã€é™ä»·å•ã€æ»‘ç‚¹ã€ä½£é‡‘è®¡ç®—ï¼Œè‡ªåŠ¨æ›´æ–°ä½ çš„è´¦æˆ·ä½™é¢å’ŒæŒä»“ã€‚

**ç»©æ•ˆåˆ†æžï¼ˆAnalyzerï¼‰**  

å›žæµ‹ç»“æŸåŽï¼Œè‡ªåŠ¨è®¡ç®—æ”¶ç›ŠçŽ‡ã€æœ€å¤§å›žæ’¤ã€å¤æ™®æ¯”çŽ‡ç­‰æŒ‡æ ‡ï¼Œå¸®ä½ å…¨é¢è¯„ä¼°ç­–ç•¥è¡¨çŽ°ã€‚

**å›¾å½¢å±•ç¤ºï¼ˆObserverï¼‰**  

è‡ªåŠ¨ç”»å‡ºä¹°å–ç‚¹ã€èµ„é‡‘æ›²çº¿ã€æŠ€æœ¯æŒ‡æ ‡ï¼Œä¸€çœ¼çœ‹æ‡‚ç­–ç•¥è¡Œä¸ºã€‚

è¿™äº”ä¸ªæ¨¡å—å„å¸å…¶èŒï¼Œè€Œä½ åªéœ€è¦ä¸“æ³¨åœ¨ç­–ç•¥é€»è¾‘ä¸Šã€‚

## **ðŸ”„ ä¸€å¼ å›¾çœ‹æ‡‚å›žæµ‹æµç¨‹**

ä»Žæ•°æ®åŠ è½½ â†’ ç­–ç•¥åˆ¤æ–­ â†’ è®¢å•ç”Ÿæˆ â†’ æˆäº¤æ’®åˆ â†’ ç»©æ•ˆåˆ†æž â†’ å›¾å½¢è¾“å‡ºï¼Œæ•´ä¸ªè¿‡ç¨‹éƒ½ç”±ä¸€ä¸ªå«Cerebroçš„å¼•æ“Žç»Ÿä¸€è°ƒåº¦ã€‚ä½ åªéœ€è¦å†™ç­–ç•¥ï¼Œå…¶å®ƒäº¤ç»™Backtraderã€‚

## **ðŸ“Š å’Œå…¶å®ƒæ¡†æž¶æ¯”ï¼ŒBacktraderå¼ºåœ¨å“ªï¼Ÿ**

âœ… å®Œå…¨æœ¬åœ°è¿è¡Œï¼Œä¸ä¾èµ–ç½‘ç»œï¼Œæ•°æ®æ›´å®‰å…¨  
âœ… æ”¯æŒå¤šç­–ç•¥å¹¶è¡Œè¿è¡Œï¼Œæ–¹ä¾¿ç»„åˆå¯¹æ¯”  
âœ… æ”¯æŒå¤šè‚¡ç¥¨ã€å¤šå‘¨æœŸæ•°æ®ä¸€èµ·åˆ†æž  
âœ… è‡ªå¸¦å¯è§†åŒ–ï¼Œä¸ç”¨å¦å¤–ç”»å›¾  
âœ… ç»“æž„æ¸…æ™°ï¼Œç»„ä»¶è§£è€¦ï¼Œæ˜“æ‰©å±•ç»´æŠ¤  

## **ðŸ’¡ å’Œæ‰‹å†™å›žæµ‹çš„å¯¹æ¯”**

å¾ˆå¤šäººä¸€å¼€å§‹å­¦é‡åŒ–ï¼Œä¼šç”¨Pandaså†™å¾ªçŽ¯æ¥å›žæµ‹ï¼Œæ¯”å¦‚ï¼š

```python
for i in range(1, len(data)):
    if data['close'][i] > data['close'][i-1] and position == 0:
        # ä¹°å…¥...
    elif ...
```

è¿™æ ·å†™è™½ç„¶ç›´æŽ¥ï¼Œä½†ç­–ç•¥ä¸€å¤æ‚ï¼Œä»£ç å°±å˜å¾—åˆä¹±åˆéš¾ç»´æŠ¤ã€‚

è€Œç”¨Backtraderï¼ŒåŒæ ·çš„ç­–ç•¥å¯ä»¥è¿™æ ·å†™ï¼š

```python
class MyStrategy(bt.Strategy):
    def next(self):
        if self.data.close[0] > self.data.close[-1]:
            self.buy()
        elif self.data.close[0] < self.data.close[-1]:
            self.sell()
```

æ¸…æ™°ã€å¹²å‡€ï¼Œæ‰€æœ‰åº•å±‚æ“ä½œéƒ½è¢«å°è£…å¥½äº†ã€‚

## **ðŸŽ¯ æ€»ç»“**

æˆ‘å–œæ¬¢Backtraderï¼Œå°±æ˜¯å› ä¸ºå®ƒè®©æˆ‘æ›´ä¸“æ³¨äºŽç­–ç•¥æœ¬èº«ï¼Œè€Œä¸æ˜¯é‡å¤é€ è½®å­ã€‚

å®ƒå¹²å‡€ã€æ¨¡å—åŒ–ã€æ˜“äºŽæ‰©å±•ï¼Œä¸ç®¡ä½ æ˜¯åˆšå…¥é—¨ï¼Œè¿˜æ˜¯æƒ³æ­å»ºè‡ªå·±çš„äº¤æ˜“ç³»ç»Ÿï¼ŒBacktraderéƒ½æ˜¯ä¸€ä¸ªéžå¸¸ç†æƒ³çš„èµ·ç‚¹ã€‚

ä¸‹ä¸€æœŸï¼Œæˆ‘ä¼šå¸¦å¤§å®¶å®‰è£…Backtraderï¼Œå¹¶å®žçŽ°ä¸€ä¸ªæœ€ç®€å•çš„â€œä¹°å…¥æŒæœ‰â€ç­–ç•¥ã€‚å¦‚æžœä½ å¯¹é‡åŒ–äº¤æ˜“æ„Ÿå…´è¶£ï¼Œåˆ«å¿˜äº†å…³æ³¨æˆ‘ï¼Œæˆ‘ä»¬ä¸‹æœŸè§ï¼


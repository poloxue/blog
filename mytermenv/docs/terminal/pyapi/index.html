<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Python API # 这部分主要介绍 iTerm2 提供的 Python API，利用它，带你实现一些不一样的能力。我将演示两个案例，分别是背景图自动更换和分屏创建自动化。
自动更换背景图 # 编程枯燥无味，想通过背景图为枯燥生活提供一些趣味。假设，我们要设计一个脚本，给终端一小时自动更好一个背景图。
假设我的壁纸图片都在 ~/Public/images/beauties 目录下。
实现下这个代码，如下所示：
import iterm2 import random import os import asyncio import sys # 替换背景图片的函数 async def change_background(session, image_path): # 获取当前会话的配置文件 profile = await session.async_get_profile() # 设置透明度，值在0（完全透明）到1（完全不透明）之间 await profile.async_set_transparency(0.2) # 设置为50%透明度 # 设置背景图像位置 await profile.async_set_background_image_location(image_path) async def main(connection): app = await iterm2.async_get_app(connection) window = app.current_terminal_window if window is None: return session = window.current_tab.current_session # 获取脚本参数提供的目录 directory = sys."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:title" content="Python API"><meta property="og:description" content="Python API # 这部分主要介绍 iTerm2 提供的 Python API，利用它，带你实现一些不一样的能力。我将演示两个案例，分别是背景图自动更换和分屏创建自动化。
自动更换背景图 # 编程枯燥无味，想通过背景图为枯燥生活提供一些趣味。假设，我们要设计一个脚本，给终端一小时自动更好一个背景图。
假设我的壁纸图片都在 ~/Public/images/beauties 目录下。
实现下这个代码，如下所示：
import iterm2 import random import os import asyncio import sys # 替换背景图片的函数 async def change_background(session, image_path): # 获取当前会话的配置文件 profile = await session.async_get_profile() # 设置透明度，值在0（完全透明）到1（完全不透明）之间 await profile.async_set_transparency(0.2) # 设置为50%透明度 # 设置背景图像位置 await profile.async_set_background_image_location(image_path) async def main(connection): app = await iterm2.async_get_app(connection) window = app.current_terminal_window if window is None: return session = window.current_tab.current_session # 获取脚本参数提供的目录 directory = sys."><meta property="og:type" content="article"><meta property="og:url" content="https://www.poloxue.com/mytermenv/docs/terminal/pyapi/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2024-04-08T17:27:01+08:00"><title>Python API | 我的终端环境</title><link rel=manifest href=/mytermenv/manifest.json><link rel=icon href=/mytermenv/favicon.png><link rel=canonical href=https://www.poloxue.com/mytermenv/docs/terminal/pyapi/><link rel=stylesheet href=/mytermenv/book.min.4f0117e74e5337280f18eb9641eae520cb4b25adcf5dd64fafad4664145a5957.css integrity="sha256-TwEX505TNygPGOuWQerlIMtLJa3PXdZPr61GZBRaWVc=" crossorigin=anonymous><script defer src=/mytermenv/flexsearch.min.js></script>
<script defer src=/mytermenv/en.search.min.a9232b8d54d785ecbb3c54490be612ed67f8711f1840e72c2deb05769b9fc41b.js integrity="sha256-qSMrjVTXhey7PFRJC+YS7Wf4cR8YQOcsLesFdpufxBs=" crossorigin=anonymous></script>
<script defer src=/mytermenv/sw.min.f888ca3f1a884bc850259e210b912f7631cc5beedc2fa1e324653bab31b8871a.js integrity="sha256-+IjKPxqIS8hQJZ4hC5EvdjHMW+7cL6HjJGU7qzG4hxo=" crossorigin=anonymous></script>
<script data-goatcounter=https://poloxue.goatcounter.com/count async src=//gc.zgo.at/count.js></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/mytermenv/><img src=/mytermenv/logo.png alt=Logo><span>我的终端环境</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/mytermenv/docs/terminal/>iTerm2</a><ul><li><a href=/mytermenv/docs/terminal/hello/>简要介绍</a></li><li><a href=/mytermenv/docs/terminal/install/>安装与主题</a></li><li><a href=/mytermenv/docs/terminal/usage/>开始使用</a></li><li><a href=/mytermenv/docs/terminal/pyapi/ class=active>Python API</a></li></ul></li><li><a href=/mytermenv/docs/zsh/>zsh</a><ul><li><a href=/mytermenv/docs/zsh/why/>为什么选择 zsh ？</a></li><li><a href=/mytermenv/docs/zsh/install/>快速安装</a></li></ul></li><li><a href=/mytermenv/docs/ohmyzsh/>oh-my-zsh</a><ul><li><a href=/mytermenv/docs/ohmyzsh/install/>安装与主题</a></li><li><a href=/mytermenv/docs/ohmyzsh/basicplugins/>基础插件</a></li><li><a href=/mytermenv/docs/ohmyzsh/basicplugins2/>基础插件 2</a></li><li><a href=/mytermenv/docs/ohmyzsh/advancedplugins/>高级插件</a></li><li><a href=/mytermenv/docs/ohmyzsh/powerlevel10k/>自定义提示主题</a></li></ul></li><li><a href=/mytermenv/docs/commands/>高效命令</a><ul><li><input type=checkbox id=section-4d360b6d2174e1a19ba4329d57bf2936 class=toggle>
<label for=section-4d360b6d2174e1a19ba4329d57bf2936 class="flex justify-between"><a href=/mytermenv/docs/commands/filesystem/>文件目录</a></label><ul><li><a href=/mytermenv/docs/commands/filesystem/exa/>exa</a></li><li><a href=/mytermenv/docs/commands/filesystem/zoxide/>zoxide</a></li><li><a href=/mytermenv/docs/commands/filesystem/bat/>bat</a></li></ul></li><li><input type=checkbox id=section-a76fd5671ff74c276b5d82cfbdd68e75 class=toggle>
<label for=section-a76fd5671ff74c276b5d82cfbdd68e75 class="flex justify-between"><a href=/mytermenv/docs/commands/search/>搜索查找</a></label><ul><li><a href=/mytermenv/docs/commands/search/fd/>fd - 更易用的文件查找命令</a></li><li><a href=/mytermenv/docs/commands/search/ripgrep/>ripgrep - 更高效的文件搜索</a></li><li><a href=/mytermenv/docs/commands/search/fzf/>fzf - 交互式命令行查找器</a></li></ul></li><li><input type=checkbox id=section-46404c2e805134bf109f2309e56d329f class=toggle>
<label for=section-46404c2e805134bf109f2309e56d329f class="flex justify-between"><a href=/mytermenv/docs/commands/dev/>开发调试</a></label><ul><li><a href=/mytermenv/docs/commands/dev/entr/>entr - 实现语言无关热重启</a></li><li><a href=/mytermenv/docs/commands/dev/httpie/>httpie - 人性化 HTTP Client</a></li></ul></li></ul></li><li><a href=/mytermenv/docs/startup/>欢迎消息</a><ul></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/mytermenv/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Python API</strong>
<label for=toc-control><img src=/mytermenv/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#自动更换背景图>自动更换背景图</a></li><li><a href=#布局自动化>布局自动化</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=python-api>Python API
<a class=anchor href=#python-api>#</a></h1><p>这部分主要介绍 iTerm2 提供的 Python API，利用它，带你实现一些不一样的能力。我将演示两个案例，分别是背景图自动更换和分屏创建自动化。</p><h3 id=自动更换背景图>自动更换背景图
<a class=anchor href=#%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%8d%a2%e8%83%8c%e6%99%af%e5%9b%be>#</a></h3><p>编程枯燥无味，想通过背景图为枯燥生活提供一些趣味。假设，我们要设计一个脚本，给终端一小时自动更好一个背景图。</p><p>假设我的壁纸图片都在 <code>~/Public/images/beauties</code> 目录下。</p><p>实现下这个代码，如下所示：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> iterm2
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> random
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> os
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> asyncio
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sys
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 替换背景图片的函数</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>change_background</span>(session, image_path):
</span></span><span style=display:flex><span>    <span style=color:#75715e># 获取当前会话的配置文件</span>
</span></span><span style=display:flex><span>    profile <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> session<span style=color:#f92672>.</span>async_get_profile()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 设置透明度，值在0（完全透明）到1（完全不透明）之间</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> profile<span style=color:#f92672>.</span>async_set_transparency(<span style=color:#ae81ff>0.2</span>)  <span style=color:#75715e># 设置为50%透明度</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 设置背景图像位置</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> profile<span style=color:#f92672>.</span>async_set_background_image_location(image_path)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main</span>(connection):
</span></span><span style=display:flex><span>    app <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> iterm2<span style=color:#f92672>.</span>async_get_app(connection)
</span></span><span style=display:flex><span>    window <span style=color:#f92672>=</span> app<span style=color:#f92672>.</span>current_terminal_window
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> window <span style=color:#f92672>is</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    session <span style=color:#f92672>=</span> window<span style=color:#f92672>.</span>current_tab<span style=color:#f92672>.</span>current_session
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 获取脚本参数提供的目录</span>
</span></span><span style=display:flex><span>    directory <span style=color:#f92672>=</span> sys<span style=color:#f92672>.</span>argv[<span style=color:#ae81ff>1</span>] <span style=color:#66d9ef>if</span> len(sys<span style=color:#f92672>.</span>argv) <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>else</span> <span style=color:#e6db74>&#34;.&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>isdir(directory):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>ValueError</span>(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Provided path </span><span style=color:#e6db74>{</span>directory<span style=color:#e6db74>}</span><span style=color:#e6db74> is not a directory&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> <span style=color:#66d9ef>True</span>:  <span style=color:#75715e># 创建无限循环以定期更换背景</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 获取目录中的所有图片文件</span>
</span></span><span style=display:flex><span>        image_files <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>            os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>join(directory, f)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> f <span style=color:#f92672>in</span> os<span style=color:#f92672>.</span>listdir(directory)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> f<span style=color:#f92672>.</span>lower()<span style=color:#f92672>.</span>endswith((<span style=color:#e6db74>&#34;.png&#34;</span>, <span style=color:#e6db74>&#34;.jpg&#34;</span>, <span style=color:#e6db74>&#34;.jpeg&#34;</span>, <span style=color:#e6db74>&#34;.tiff&#34;</span>, <span style=color:#e6db74>&#34;.bmp&#34;</span>, <span style=color:#e6db74>&#34;.gif&#34;</span>))
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> image_files:
</span></span><span style=display:flex><span>            <span style=color:#75715e># 随机选择一张图片</span>
</span></span><span style=display:flex><span>            chosen_image <span style=color:#f92672>=</span> os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>abspath(random<span style=color:#f92672>.</span>choice(image_files))
</span></span><span style=display:flex><span>            <span style=color:#75715e># 调用函数更改背景</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>await</span> change_background(session, chosen_image)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;No images found in directory </span><span style=color:#e6db74>{</span>directory<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 等待一个小时</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>await</span> asyncio<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>3600</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>iterm2<span style=color:#f92672>.</span>run_until_complete(main)
</span></span></code></pre></div><p>代码中提供了注释说明，不熟悉 Python 直接考虑即可，命令的接收参数是存放图片的目录。</p><p>定时能力，我们是通过 <code>sleep(3600)</code> 实现每小时随机更换背景图片。特别说明，不要用 crontab，因为存在环境上下文问题，crontab 无法知道 iTerm2 的存在。</p><p>这个脚本可以放在 sh 的启动脚本中，如 <code>bashrc</code>、<code>zshrc</code> 等，这取决于你用什么 shell。我们只要将其设置为后台常驻的形式运行，</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python random-bg.py your-images-directory &amp;
</span></span></code></pre></div><p>我假设将它设置为 1 秒换一次图片，效果如下所示：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-09/2023-09-25-install-iterm2-as-my-developing-environment-17.gif alt></p><h3 id=布局自动化>布局自动化
<a class=anchor href=#%e5%b8%83%e5%b1%80%e8%87%aa%e5%8a%a8%e5%8c%96>#</a></h3><p>如果你用 tmux 的话，可能知道有些布局管理工具，如 tmuxifier 和 tmuxinator， 可自动创建布局。其实，只用 iTerm2，同样可实现这样的功能。</p><p>因为 iTerm2 的 Python API 提供了创建分屏的接口。</p><p>示例代码如下所示：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> iterm2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main</span>(connection):
</span></span><span style=display:flex><span>    app <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> iterm2<span style=color:#f92672>.</span>async_get_app(connection)
</span></span><span style=display:flex><span>    window <span style=color:#f92672>=</span> app<span style=color:#f92672>.</span>current_terminal_window
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> window <span style=color:#f92672>is</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;No current window&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    session <span style=color:#f92672>=</span> window<span style=color:#f92672>.</span>current_tab<span style=color:#f92672>.</span>current_session
</span></span><span style=display:flex><span>    <span style=color:#75715e># 垂直分屏</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> session<span style=color:#f92672>.</span>async_split_pane(vertical<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e># 如果你想要水平分屏，将vertical参数设置为False</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># await session.async_split_pane(vertical=False)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>iterm2<span style=color:#f92672>.</span>run_until_complete(main)
</span></span></code></pre></div><p>重点就是那句 <code>await session.async_split_pane(vertical=True)</code>，执行这个角度会自动进行左右分屏，即垂直分屏。</p><p>演示效果如下：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-09/2023-09-25-install-iterm2-as-my-developing-environment-16.gif alt></p><p>假设，你想自定义一些布局的话，如前面提到这个效果，如下所示：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-09/2023-09-25-install-iterm2-as-my-developing-environment-02.jpeg alt></p><p>我们来实现一个命令自动创建这个效果。</p><p>需求详细描述，iTerm2 自动创建三个 pane 的布局，左边 pane 用于通过 vim 命令打开指定目录（IDE 写代码)，右边上下两个 pane 中，上面的 pane 执行 <code>go run *.go</code> 命令，下面的 pane 创建清空等待输入。</p><p>编写这样一个脚本来实现这个流程，代码如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> iterm2
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sys
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main</span>(connection):
</span></span><span style=display:flex><span>    <span style=color:#75715e># 获取要打开的目录作为参数</span>
</span></span><span style=display:flex><span>    directory <span style=color:#f92672>=</span> sys<span style=color:#f92672>.</span>argv[<span style=color:#ae81ff>1</span>] <span style=color:#66d9ef>if</span> len(sys<span style=color:#f92672>.</span>argv) <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>else</span> <span style=color:#e6db74>&#34;.&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    app <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> iterm2<span style=color:#f92672>.</span>async_get_app(connection)
</span></span><span style=display:flex><span>    window <span style=color:#f92672>=</span> app<span style=color:#f92672>.</span>current_terminal_window
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> window <span style=color:#f92672>is</span> <span style=color:#f92672>not</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># 创建左边的pane</span>
</span></span><span style=display:flex><span>        left_session <span style=color:#f92672>=</span> window<span style=color:#f92672>.</span>current_tab<span style=color:#f92672>.</span>current_session
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>await</span> left_session<span style=color:#f92672>.</span>async_send_text(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;cd </span><span style=color:#e6db74>{</span>directory<span style=color:#e6db74>}</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>await</span> left_session<span style=color:#f92672>.</span>async_send_text(<span style=color:#e6db74>&#34;vim</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 创建右边的pane</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 右上的pane保持空白</span>
</span></span><span style=display:flex><span>        top_right_session <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> left_session<span style=color:#f92672>.</span>async_split_pane(vertical<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>await</span> top_right_session<span style=color:#f92672>.</span>async_send_text(<span style=color:#e6db74>&#34;\clear</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>await</span> top_right_session<span style=color:#f92672>.</span>async_send_text(<span style=color:#e6db74>&#34;go run *.go</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 在右下的pane执行go run *.go</span>
</span></span><span style=display:flex><span>        bottom_right_session <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> top_right_session<span style=color:#f92672>.</span>async_split_pane(vertical<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>await</span> bottom_right_session<span style=color:#f92672>.</span>async_send_text(<span style=color:#e6db74>&#34;\clear</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;No current window&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>iterm2<span style=color:#f92672>.</span>run_until_complete(main)
</span></span></code></pre></div><p>就不啰嗦代码逻辑了，非常简单。</p><p>命令效果，如下所示：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-09/2023-09-25-install-iterm2-as-my-developing-environment-09.gif alt></p><p>Python API 的使用就演示这两个案例。想了解它的更多能力，可直接查看它的官方文档，访问
<a href=https://iterm2.com/python-api/>iTemr2 Python API Documentation</a>。</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/poloxue/myterminal/commit/20dc56dd97876a32eafd9c5106848cbe2af1c4e5 title='Last modified by poloxue.xue | Apr 8, 2024' target=_blank rel=noopener><img src=/mytermenv/svg/calendar.svg class=book-icon alt=Calendar>
<span>Apr 8, 2024</span></a></div><div><a class="flex align-center" href=https://github.com/poloxue/myterminal/blob/master/content/docs/terminal/pyapi.md target=_blank rel=noopener><img src=/mytermenv/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments><script src=https://utteranc.es/client.js repo=poloxue/blog issue-term=pathname theme=github-dark crossorigin=anonymous async></script></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#自动更换背景图>自动更换背景图</a></li><li><a href=#布局自动化>布局自动化</a></li></ul></li></ul></nav></div></aside></main></body></html>
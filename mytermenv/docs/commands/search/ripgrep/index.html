<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="ripgrep # ripgrep 是一款文本搜索命令，功能与 grep 类似。和 fd 之于 find 一样，ripgrep 在体验和性能上同样完胜 grep。
安装 # brew install ripgrep 递归 # ripgrep 的默认行为也是递归搜索，命令为 rg pattern，且默认高亮显示，与 grep --color main . -nR 对比，明显更加简洁易用，体验更好。
示例效果：
指定目录 # ripgrep 最后的参数即可指定搜索的目录。
rg main ~/Code/golang-examples/ 指定文件 # 搜索指定文件与指定目录类似，命令的最后一个参数指定即可。
rg main ~/Code/golang-examples/main.go 通配符 # 我们使用 -g 通过通配符指定搜索路径。
如下是禁用目录递归：
rg main -g '!/*/*' 还可实现如排除指定的文件：
rg main -g '!main.go' 或者排除指定的目录
rg -g '!directory' 正则 # ripgrep 支持通过 -e 选项启用正则表达式搜索，如搜索文件中的指定日期格式内容。
rg -e '[0-9]{2}:[0-9]{2}' 默认过滤 # 和 fd 一样，ripgrep 的高效率搜索能力一方面也是因为默认忽略了一些文件，如它忽略隐藏文件以及 ."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:title" content="ripgrep"><meta property="og:description" content="ripgrep # ripgrep 是一款文本搜索命令，功能与 grep 类似。和 fd 之于 find 一样，ripgrep 在体验和性能上同样完胜 grep。
安装 # brew install ripgrep 递归 # ripgrep 的默认行为也是递归搜索，命令为 rg pattern，且默认高亮显示，与 grep --color main . -nR 对比，明显更加简洁易用，体验更好。
示例效果：
指定目录 # ripgrep 最后的参数即可指定搜索的目录。
rg main ~/Code/golang-examples/ 指定文件 # 搜索指定文件与指定目录类似，命令的最后一个参数指定即可。
rg main ~/Code/golang-examples/main.go 通配符 # 我们使用 -g 通过通配符指定搜索路径。
如下是禁用目录递归：
rg main -g '!/*/*' 还可实现如排除指定的文件：
rg main -g '!main.go' 或者排除指定的目录
rg -g '!directory' 正则 # ripgrep 支持通过 -e 选项启用正则表达式搜索，如搜索文件中的指定日期格式内容。
rg -e '[0-9]{2}:[0-9]{2}' 默认过滤 # 和 fd 一样，ripgrep 的高效率搜索能力一方面也是因为默认忽略了一些文件，如它忽略隐藏文件以及 ."><meta property="og:type" content="article"><meta property="og:url" content="https://www.poloxue.com/mytermenv/docs/commands/search/ripgrep/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2024-04-08T17:27:01+08:00"><title>ripgrep | 我的终端环境</title><link rel=manifest href=/mytermenv/manifest.json><link rel=icon href=/mytermenv/favicon.png><link rel=canonical href=https://www.poloxue.com/mytermenv/docs/commands/search/ripgrep/><link rel=stylesheet href=/mytermenv/book.min.484e3cdc2f6e660df5c808d0eaf99198acde922db9728bc590485956e896548a.css integrity="sha256-SE483C9uZg31yAjQ6vmRmKzeki25covFkEhZVuiWVIo=" crossorigin=anonymous><script defer src=/mytermenv/flexsearch.min.js></script>
<script defer src=/mytermenv/en.search.min.7b990f2e937672dd3a6d39696861e5b0fa48723e83b04b1dc74f6920ca361e3d.js integrity="sha256-e5kPLpN2ct06bTlpaGHlsPpIcj6DsEsdx09pIMo2Hj0=" crossorigin=anonymous></script>
<script defer src=/mytermenv/sw.min.f888ca3f1a884bc850259e210b912f7631cc5beedc2fa1e324653bab31b8871a.js integrity="sha256-+IjKPxqIS8hQJZ4hC5EvdjHMW+7cL6HjJGU7qzG4hxo=" crossorigin=anonymous></script>
<script data-goatcounter=https://poloxue.goatcounter.com/count async src=//gc.zgo.at/count.js></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/mytermenv/><img src=/mytermenv/logo.png alt=Logo><span>我的终端环境</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-fba4a8db7261d54d261a0776b385c4b7 class=toggle>
<label for=section-fba4a8db7261d54d261a0776b385c4b7 class="flex justify-between"><a href=/mytermenv/docs/terminal/>iTerm2</a></label><ul><li><a href=/mytermenv/docs/terminal/hello/>简要介绍</a></li><li><a href=/mytermenv/docs/terminal/install/>安装与主题</a></li><li><a href=/mytermenv/docs/terminal/usage/>开始使用</a></li><li><a href=/mytermenv/docs/terminal/pyapi/>Python API</a></li></ul></li><li><input type=checkbox id=section-0f880db9bf74f7d21521e992a6c21656 class=toggle>
<label for=section-0f880db9bf74f7d21521e992a6c21656 class="flex justify-between"><a href=/mytermenv/docs/zsh/>zsh</a></label><ul><li><a href=/mytermenv/docs/zsh/why/>为什么选择 zsh ？</a></li><li><a href=/mytermenv/docs/zsh/install/>快速安装</a></li></ul></li><li><input type=checkbox id=section-3cbc02454a3859bda006f4f5dbaa0992 class=toggle>
<label for=section-3cbc02454a3859bda006f4f5dbaa0992 class="flex justify-between"><a href=/mytermenv/docs/ohmyzsh/>ohmyzsh</a></label><ul><li><a href=/mytermenv/docs/ohmyzsh/install/>安装与主题</a></li><li><a href=/mytermenv/docs/ohmyzsh/basicplugins/>基础插件</a></li><li><a href=/mytermenv/docs/ohmyzsh/basicplugins2/>基础插件 2</a></li><li><a href=/mytermenv/docs/ohmyzsh/advancedplugins/>高级插件</a></li><li><a href=/mytermenv/docs/ohmyzsh/powerlevel10k/>自定义提示主题</a></li></ul></li><li><input type=checkbox id=section-3fb225060dbc6eb1fda04fb19c520b9e class=toggle checked>
<label for=section-3fb225060dbc6eb1fda04fb19c520b9e class="flex justify-between"><a href=/mytermenv/docs/commands/>高效命令</a></label><ul><li><a href=/mytermenv/docs/commands/filesystem/>文件目录</a><ul><li><a href=/mytermenv/docs/commands/filesystem/exa/>exa</a></li><li><a href=/mytermenv/docs/commands/filesystem/zoxide/>zoxide</a></li><li><a href=/mytermenv/docs/commands/filesystem/bat/>bat</a></li></ul></li><li><a href=/mytermenv/docs/commands/search/>搜索查找</a><ul><li><a href=/mytermenv/docs/commands/search/fd/>fd</a></li><li><a href=/mytermenv/docs/commands/search/ripgrep/ class=active>ripgrep</a></li><li><a href=/mytermenv/docs/commands/search/fzf/>fzf</a></li></ul></li><li><a href=/mytermenv/docs/commands/dev/>开发调试</a><ul><li><a href=/mytermenv/docs/commands/dev/entr/>entr - 实现语言无关热重启</a></li><li><a href=/mytermenv/docs/commands/dev/httpie/>httpie - 人性化 HTTP Client</a></li></ul></li></ul></li><li><input type=checkbox id=section-ff2ed6a53270462fb3b310011e3cce1a class=toggle>
<label for=section-ff2ed6a53270462fb3b310011e3cce1a class="flex justify-between"><a href=/mytermenv/docs/startup/>启动消息</a></label><ul></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/mytermenv/svg/menu.svg class=book-icon alt=Menu></label>
<strong>ripgrep</strong>
<label for=toc-control><img src=/mytermenv/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#安装>安装</a></li><li><a href=#递归>递归</a></li><li><a href=#指定目录>指定目录</a></li><li><a href=#指定文件>指定文件</a></li><li><a href=#通配符>通配符</a></li><li><a href=#正则>正则</a></li><li><a href=#默认过滤>默认过滤</a></li><li><a href=#大小写敏感>大小写敏感</a></li><li><a href=#搜索并替换>搜索并替换</a></li><li><a href=#配置>配置</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=ripgrep>ripgrep
<a class=anchor href=#ripgrep>#</a></h1><p><a href=https://github.com/BurntSushi/ripgrep>ripgrep</a> 是一款文本搜索命令，功能与 grep 类似。和 fd 之于 find 一样，ripgrep 在体验和性能上同样完胜 grep。</p><h2 id=安装>安装
<a class=anchor href=#%e5%ae%89%e8%a3%85>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>brew install ripgrep
</span></span></code></pre></div><h2 id=递归>递归
<a class=anchor href=#%e9%80%92%e5%bd%92>#</a></h2><p>ripgrep 的默认行为也是递归搜索，命令为 rg pattern，且默认高亮显示，与 <code>grep --color main . -nR</code> 对比，明显更加简洁易用，体验更好。</p><p>示例效果：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-09.gif alt></p><h2 id=指定目录>指定目录
<a class=anchor href=#%e6%8c%87%e5%ae%9a%e7%9b%ae%e5%bd%95>#</a></h2><p>ripgrep 最后的参数即可指定搜索的目录。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>rg main ~/Code/golang-examples/
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-10.gif alt></p><h2 id=指定文件>指定文件
<a class=anchor href=#%e6%8c%87%e5%ae%9a%e6%96%87%e4%bb%b6>#</a></h2><p>搜索指定文件与指定目录类似，命令的最后一个参数指定即可。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>rg main ~/Code/golang-examples/main.go
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-11.png alt></p><h2 id=通配符>通配符
<a class=anchor href=#%e9%80%9a%e9%85%8d%e7%ac%a6>#</a></h2><p>我们使用 <code>-g</code> 通过通配符指定搜索路径。</p><p>如下是禁用目录递归：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>rg main -g <span style=color:#e6db74>&#39;!/*/*&#39;</span>
</span></span></code></pre></div><p>还可实现如排除指定的文件：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>rg main -g <span style=color:#e6db74>&#39;!main.go&#39;</span>
</span></span></code></pre></div><p>或者排除指定的目录</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>rg -g <span style=color:#e6db74>&#39;!directory&#39;</span>
</span></span></code></pre></div><h2 id=正则>正则
<a class=anchor href=#%e6%ad%a3%e5%88%99>#</a></h2><p>ripgrep 支持通过 <code>-e</code> 选项启用正则表达式搜索，如搜索文件中的指定日期格式内容。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>rg -e <span style=color:#e6db74>&#39;[0-9]{2}:[0-9]{2}&#39;</span>
</span></span></code></pre></div><h2 id=默认过滤>默认过滤
<a class=anchor href=#%e9%bb%98%e8%ae%a4%e8%bf%87%e6%bb%a4>#</a></h2><p>和 fd 一样，ripgrep 的高效率搜索能力一方面也是因为默认忽略了一些文件，如它忽略隐藏文件以及 .gitgnore .ignore .rgignore 中的文件。禁用 ignore 可通过选项 &ndash;no-ignore 即可。</p><p>对于隐藏文件，通过 <code>--hidden</code> 即可搜索包含隐藏文件。</p><p>如果希望彻底禁用隐藏能力，通过 <code>-uuu</code> 实现，如 <code>rg -uuu pattern</code>。</p><h2 id=大小写敏感>大小写敏感
<a class=anchor href=#%e5%a4%a7%e5%b0%8f%e5%86%99%e6%95%8f%e6%84%9f>#</a></h2><p>ripgrep 默认即大小写敏感。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rg pattern
</span></span></code></pre></div><p>通过 <code>-i</code> 选项可忽略大小写。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rg -i pattern
</span></span></code></pre></div><p>或者通过 <code>-S</code> 启用 smartcase 模式，即</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rg -S pattern
</span></span></code></pre></div><h2 id=搜索并替换>搜索并替换
<a class=anchor href=#%e6%90%9c%e7%b4%a2%e5%b9%b6%e6%9b%bf%e6%8d%a2>#</a></h2><p>ripgrep 中，我们通过 <code>-r</code> 可直接替换搜索结果，但不改变原内容。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>rg main ~/Code/golang-examples r main <span style=color:#75715e># 只替换输出，未修改文件</span>
</span></span></code></pre></div><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-12.png alt></p><h2 id=配置>配置
<a class=anchor href=#%e9%85%8d%e7%bd%ae>#</a></h2><p>ripgrep 支撑配置文件修改 ripgrep 的默认行为。我们通过设置环境变量 <code>RIPGREP_CONFIG_PATH</code> 指定配置文件路径。</p><p>配置文件的配置方式和上文介绍的 bat 类似，都是通过 <code>--xxx</code> 选项的形式设置。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span><span style=color:#75715e># Don&#39;t let ripgrep vomit really long lines to my terminal, and show a preview.</span>
</span></span><span style=display:flex><span>--max-columns<span style=color:#f92672>=</span><span style=color:#ae81ff>150</span>
</span></span><span style=display:flex><span>--max-columns-preview
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add my &#39;web&#39; type.</span>
</span></span><span style=display:flex><span>--type-add
</span></span><span style=display:flex><span>web:*.<span style=color:#f92672>{</span>html,css,js<span style=color:#f92672>}</span>*
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Search hidden files / directories (e.g. dotfiles) by default</span>
</span></span><span style=display:flex><span>--hidden
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Using glob patterns to include/exclude files or folders</span>
</span></span><span style=display:flex><span>--glob<span style=color:#f92672>=</span>!.git/*
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># or</span>
</span></span><span style=display:flex><span>--glob
</span></span><span style=display:flex><span>!.git/*
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Set the colors.</span>
</span></span><span style=display:flex><span>--colors<span style=color:#f92672>=</span>line:none
</span></span><span style=display:flex><span>--colors<span style=color:#f92672>=</span>line:style:bold
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Because who cares about case!?</span>
</span></span><span style=display:flex><span>--smart-case
</span></span></code></pre></div><p>如我们希望 ripgrep 默认启用 smartcase 能力，可将 <code>--smart-case</code> 直接配置到配置文件中。</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/poloxue/myterminal/commit/20dc56dd97876a32eafd9c5106848cbe2af1c4e5 title='Last modified by poloxue.xue | Apr 8, 2024' target=_blank rel=noopener><img src=/mytermenv/svg/calendar.svg class=book-icon alt>
<span>Apr 8, 2024</span></a></div><div><a class="flex align-center" href=https://github.com/poloxue/myterminal/blob/master/content/docs/commands/search/ripgrep.md target=_blank rel=noopener><img src=/mytermenv/svg/edit.svg class=book-icon alt>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments><script src=https://utteranc.es/client.js repo=poloxue/blog issue-term=pathname theme=github-dark crossorigin=anonymous async></script></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#安装>安装</a></li><li><a href=#递归>递归</a></li><li><a href=#指定目录>指定目录</a></li><li><a href=#指定文件>指定文件</a></li><li><a href=#通配符>通配符</a></li><li><a href=#正则>正则</a></li><li><a href=#默认过滤>默认过滤</a></li><li><a href=#大小写敏感>大小写敏感</a></li><li><a href=#搜索并替换>搜索并替换</a></li><li><a href=#配置>配置</a></li></ul></nav></div></aside></main></body></html>
<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>推荐 3 个高效搜索命令 - POLOXUE's BLOG</title><meta name=viewport content="width=device-width,initial-scale=1"><meta itemprop=name content="推荐 3 个高效搜索命令"><meta itemprop=description content="本文将介绍一些高效的查找搜索命令，分别是 fd、ripgrep 与 fzf，提升命令内容的查找效率"><meta itemprop=datePublished content="2023-10-30T20:13:53+08:00"><meta itemprop=dateModified content="2023-10-30T20:13:53+08:00"><meta itemprop=wordCount content="603"><meta itemprop=keywords content="zsh,"><meta property="og:title" content="推荐 3 个高效搜索命令"><meta property="og:description" content="本文将介绍一些高效的查找搜索命令，分别是 fd、ripgrep 与 fzf，提升命令内容的查找效率"><meta property="og:type" content="article"><meta property="og:url" content="https://www.poloxue.com/posts/2023-10-30-high-productivity-shell-commands-part2/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-10-30T20:13:53+08:00"><meta property="article:modified_time" content="2023-10-30T20:13:53+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="推荐 3 个高效搜索命令"><meta name=twitter:description content="本文将介绍一些高效的查找搜索命令，分别是 fd、ripgrep 与 fzf，提升命令内容的查找效率"><script data-goatcounter=https://poloxue.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/main.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/extra.css><link id=dark-scheme rel=stylesheet type=text/css href=https://www.poloxue.com/css/dark.css><script src=https://www.poloxue.com/js/feather.min.js></script>
<script src=https://www.poloxue.com/js/main.js></script>
<script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script>
<script>MathJax={tex:{displayMath:[["[","]"],["$$","$$"]],inlineMath:[["(",")"],["$","$"]]}}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7019080091542951" crossorigin=anonymous></script></head><body><div class="container-wide wrapper"><div class=header><div class=avatar><a href=https://www.poloxue.com/><img src=/avatar.png alt="POLOXUE's BLOG"></a></div><h1 class=site-title><a href=https://www.poloxue.com/>POLOXUE's BLOG</a></h1><div class=site-description><nav class="nav social"><ul class=flat><li><a href=https://github.com/poloxue/ title=Github><i data-feather=github></i></a></li><li><a href=/posts/index.xml title=RSS><i data-feather=rss></i></a></li><li><a href=/ title=Wechat><i data-feather=message-circle></i></a></li><span class=scheme-toggle><a href=# id=scheme-toggle></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>文章列表</a></li><li><a href=/tags>分类标签</a></li><li><a href=https://crypto.poloxue.com/>每日资讯</a></li><li><a href=/about/about>关于我</a></li></ul></nav></div><div class=article-nav id=article-nav-id><div class=post><div class=post-header><div class=meta><div class=date><span class=day>30</span>
<span class=rest>Oct 2023</span></div></div><div class=matter><h1 class=title>推荐 3 个高效搜索命令</h1></div></div><aside class="show-on-mobile toc" id=static-toc><header><h3>Contents</h3></header><nav id=TableOfContents><ol><li><a href=#fdhttpsgithubcomsharkdpfd><a href=https://github.com/sharkdp/fd>fd</a></a><ol><li><a href=#安装>安装</a></li><li><a href=#递归>递归</a></li><li><a href=#正则>正则</a></li><li><a href=#通配符>通配符</a></li><li><a href=#文件类型>文件类型</a></li><li><a href=#隐藏文件和-gitinogre>隐藏文件和 <code>.gitinogre</code></a></li><li><a href=#其他示例>其他示例</a></li><li><a href=#性能>性能</a></li></ol></li><li><a href=#ripgrephttpsgithubcomburntsushiripgrep><a href=https://github.com/BurntSushi/ripgrep>ripgrep</a></a><ol><li><a href=#安装-1>安装</a></li><li><a href=#递归-1>递归</a></li><li><a href=#指定目录>指定目录</a></li><li><a href=#指定文件>指定文件</a></li><li><a href=#通配符-1>通配符</a></li><li><a href=#正则-1>正则</a></li><li><a href=#默认过滤>默认过滤</a></li><li><a href=#大小写敏感>大小写敏感</a></li><li><a href=#搜索并替换>搜索并替换</a></li><li><a href=#配置>配置</a></li></ol></li><li><a href=#fzfhttpsgithubcomjunegunnfzf><a href=https://github.com/junegunn/fzf>fzf</a></a><ol><li><a href=#安装-2>安装</a></li><li><a href=#目录搜索>目录搜索</a></li><li><a href=#命令组合>命令组合</a></li></ol></li><li><a href=#总结>总结</a></li></ol></nav></aside><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-00.png alt></p><p>本文将介绍三个高效搜索命令，分别是 fd、ripgrep 与 fzf。</p><p>我将介绍的 fd 和 ripgreap 对标的是传统 grep 和 find，它们在性能和使用体验上都有大幅提升。如果你成为 10x 程序员，强烈推荐使用它们。</p><p><strong><a href=https://github.com/sharkdp/fd>fd</a></strong>，目录与文件搜索命令，比默认 find 更易于使用，而且查找速度上更快；</p><p><strong><a href=https://github.com/BurntSushi/ripgrep>ripgrep</a></strong>，可用于高效的内容搜索，比默认的 grep 命令速度更快；</p><p><strong><a href=https://github.com/junegunn/fzf>fzf</a></strong>，命令行交互式模糊搜索工具，可与其他命令进行结合，提高使用体验；</p><p>如上的 fd 与 ripgrep 是由 rust 编写，性能上完虐传统的 find 与 grep。</p><p>视频版本，没有文章详细。</p><div id=video-962959372CcnmD_dHsnk style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden></div><script>var r=new XMLHttpRequest;r.addEventListener("load",function(){container=document.getElementById("video-962959372CcnmD_dHsnk"),data=JSON.parse(this.responseText),bb_id="962959372",yt_id="CcnmD_dHsnk",data.country_code=="CN"||yt_id==0&&bb_id!=0?container.innerHTML='<iframe src="https://player.bilibili.com/player.html?aid='+bb_id+'&amp;page=1" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0;" allowfullscreen title="Bilibili Video" ></iframe > ':yt_id!=0&&(container.innerHTML='<iframe src="https://www.youtube.com/embed/'+yt_id+'"style="position:absolute;top:0;left:0;width:100%;height:100%; border:0;" title="YouTube video player" frameborder="0" allow="accelerometer;autoplay;clipboard-write;encrypted-media;gyroscope;picture-in-picture;web-share"allowfullscreen></iframe>')}),r.open("GET","https://ipapi.co/json/"),r.send()</script><h2 id=fdhttpsgithubcomsharkdpfd><a href=https://github.com/sharkdp/fd>fd</a></h2><p>fd 是一款文件查找命令，可替换系统默认 find，它的体验更友好，且查询效率极高。我们在使用传统的 find 时，要经常查手册看帮助文档，但使用 fd，它的默认行为就能满足我们大部分的需求。</p><p>如何使用呢？</p><h3 id=安装>安装</h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>brew install fd
</span></span></code></pre></td></tr></table></div></div><h3 id=递归>递归</h3><p>文件系统下搜索文件名，最常见的场景是递归搜索文件名包含 pattern 的文件，不知道有你是否能立刻想起来 find 如何写呢？</p><p>示例：遍历查找。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ fd pattern
</span></span></code></pre></td></tr></table></div></div><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-01.gif alt></p><h3 id=正则>正则</h3><p>如果要正则查询，pattern 默认即支持正则表达式。</p><p>查找文件名包含日期的文件：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-02.gif alt></p><p>或者查找所有的 go 代码文件。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-03.gif alt></p><p>这个表达式更加正确的表述是 fd <code>.*\.go$</code>，查出所有以 <code>.go</code> 结尾的文件。</p><h3 id=通配符>通配符</h3><p>fd 同样是支持统配符的，通过 <code>-g</code> 选项指定通配符。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-04.gif alt></p><h3 id=文件类型>文件类型</h3><p>前面的查找 go 文件，其实也是查找类型是 Go 源码。但正则和通配符，都比较繁琐，可直接通过 <code>fd -e go pattern</code> 的模式直接寻找指定扩展的文件。</p><p>示例：查找 python 源码文件。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-05.gif alt></p><p>如果无需 patern，则表明查找所有的 <code>.py</code> 的文件。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-07.gif alt></p><h3 id=隐藏文件和-gitinogre>隐藏文件和 <code>.gitinogre</code></h3><p>fd 搜索效率高的一个原因是它默认不查找隐藏文件和 <code>gitignore</code> 文件。</p><p>如想启用隐藏文件的查找，可指定 -H 选项，示例如下：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-06.png alt></p><p>从上图可知，其中包含了隐藏目录 .git 下的文件。</p><p>除了默认忽略 hidden 文件，fd 还会忽略 .gitignore 中的文件，选项 -I 即可查找包含在 <code>.gitinogre/.fdignore/.ignore</code> 的文件。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ fd -I pattern
</span></span></code></pre></td></tr></table></div></div><h3 id=其他示例>其他示例</h3><p>fd 的更多选项，我就不一一介绍了，可以查看如下表格。</p><table><thead><tr><th>案例</th><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>忽略大小写</td><td>fd -i readme.md</td><td>包含 readme.md 和 README.md</td></tr><tr><td>大小写的 smartcase 模式</td><td>fd -s readme.md</td><td>包含 readme.md 和 README.md</td></tr><tr><td>&mdash;</td><td>fd -s README.md</td><td>只包含 README.md</td></tr><tr><td>查找结果显示详细信息</td><td>fd -l .go</td><td>查询结果显示文件详情</td></tr><tr><td>大小过滤</td><td>fd -S +1000k</td><td>查询大小 > 1000k 的文件</td></tr><tr><td>仅查找目录</td><td>fd &ndash;type/-t directory golang</td><td>查询所有目录文件</td></tr><tr><td>查询并执行命令</td><td>fd &ndash;type/-t file -x wc -l</td><td>查询文件并计算行数</td></tr><tr><td>&mdash;</td><td>fd &ndash;type/-t file -X vim</td><td>查询所有文件并用 vim 打开</td></tr></tbody></table><h3 id=性能>性能</h3><p>除了忽略隐藏和 gitignore 中的文件外，fd 在性能上也是碾压 find。通过 hyperfine 命令测试 fd 与 find。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>hyperfine --warmup <span style=color:#ae81ff>3</span> <span style=color:#e6db74>&#34;find . -iname *.go&#34;</span> <span style=color:#e6db74>&#34;fd -i -g &#39;*.go&#39; -uu&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>性能对比结果：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-08.gif alt></p><p>压测结果显示，fd 相较于 find 快了 3.88 倍。</p><h2 id=ripgrephttpsgithubcomburntsushiripgrep><a href=https://github.com/BurntSushi/ripgrep>ripgrep</a></h2><p>ripgrep 是一款文本搜索命令，功能与 grep 类似。和 fd 之于 find 一样，ripgrep 在体验和性能上同样完胜 grep。</p><h3 id=安装-1>安装</h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>brew install ripgrep
</span></span></code></pre></td></tr></table></div></div><h3 id=递归-1>递归</h3><p>ripgrep 的默认行为也是递归搜索，命令为 rg pattern，且默认高亮显示，与 <code>grep --color main . -nR</code> 对比，明显更加简洁易用，体验更好。</p><p>示例效果：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-09.gif alt></p><h3 id=指定目录>指定目录</h3><p>ripgrep 最后的参数即可指定搜索的目录。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>rg main ~/Code/golang-examples/
</span></span></code></pre></td></tr></table></div></div><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-10.gif alt></p><h3 id=指定文件>指定文件</h3><p>搜索指定文件与指定目录类似，命令的最后一个参数指定即可。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>rg main ~/Code/golang-examples/main.go
</span></span></code></pre></td></tr></table></div></div><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-11.png alt></p><h3 id=通配符-1>通配符</h3><p>我们使用 <code>-g</code> 通过通配符指定搜索路径。</p><p>如下是禁用目录递归：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>rg main -g <span style=color:#e6db74>&#39;!/*/*&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p>还可实现如排除指定的文件：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>rg main -g <span style=color:#e6db74>&#39;!main.go&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p>或者排除指定的目录</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>rg -g <span style=color:#e6db74>&#39;!directory&#39;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=正则-1>正则</h3><p>ripgrep 支持通过 <code>-e</code> 选项启用正则表达式搜索，如搜索文件中的指定日期格式内容。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>rg -e <span style=color:#e6db74>&#39;[0-9]{2}:[0-9]{2}&#39;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=默认过滤>默认过滤</h3><p>和 fd 一样，ripgrep 的高效率搜索能力一方面也是因为默认忽略了一些文件，如它忽略隐藏文件以及 .gitgnore .ignore .rgignore 中的文件。禁用 ignore 可通过选项 &ndash;no-ignore 即可。</p><p>对于隐藏文件，通过 <code>--hidden</code> 即可搜索包含隐藏文件。</p><p>如果希望彻底禁用隐藏能力，通过 <code>-uuu</code> 实现，如 <code>rg -uuu pattern</code>。</p><h3 id=大小写敏感>大小写敏感</h3><p>ripgrep 默认即大小写敏感。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rg pattern
</span></span></code></pre></td></tr></table></div></div><p>通过 <code>-i</code> 选项可忽略大小写。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rg -i pattern
</span></span></code></pre></td></tr></table></div></div><p>或者通过 <code>-S</code> 启用 smartcase 模式，即</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rg -S pattern
</span></span></code></pre></td></tr></table></div></div><h3 id=搜索并替换>搜索并替换</h3><p>ripgrep 中，我们通过 <code>-r</code> 可直接替换搜索结果，但不改变原内容。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>rg main ~/Code/golang-examples r main <span style=color:#75715e># 只替换输出，未修改文件</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-12.png alt></p><h3 id=配置>配置</h3><p>ripgrep 支撑配置文件修改 ripgrep 的默认行为。我们通过设置环境变量 <code>RIPGREP_CONFIG_PATH</code> 指定配置文件路径。</p><p>配置文件的配置方式和上文介绍的 bat 类似，都是通过 <code>--xxx</code> 选项的形式设置。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span><span style=color:#75715e># Don&#39;t let ripgrep vomit really long lines to my terminal, and show a preview.</span>
</span></span><span style=display:flex><span>--max-columns<span style=color:#f92672>=</span><span style=color:#ae81ff>150</span>
</span></span><span style=display:flex><span>--max-columns-preview
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add my &#39;web&#39; type.</span>
</span></span><span style=display:flex><span>--type-add
</span></span><span style=display:flex><span>web:*.<span style=color:#f92672>{</span>html,css,js<span style=color:#f92672>}</span>*
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Search hidden files / directories (e.g. dotfiles) by default</span>
</span></span><span style=display:flex><span>--hidden
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Using glob patterns to include/exclude files or folders</span>
</span></span><span style=display:flex><span>--glob<span style=color:#f92672>=</span>!.git/*
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># or</span>
</span></span><span style=display:flex><span>--glob
</span></span><span style=display:flex><span>!.git/*
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Set the colors.</span>
</span></span><span style=display:flex><span>--colors<span style=color:#f92672>=</span>line:none
</span></span><span style=display:flex><span>--colors<span style=color:#f92672>=</span>line:style:bold
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Because who cares about case!?</span>
</span></span><span style=display:flex><span>--smart-case
</span></span></code></pre></td></tr></table></div></div><p>如我们希望 ripgrep 默认启用 smartcase 能力，可将 <code>--smart-case</code> 直接配置到配置文件中。</p><h2 id=fzfhttpsgithubcomjunegunnfzf><a href=https://github.com/junegunn/fzf>fzf</a></h2><p>fzf 全名 fuzzy finder，一款通用的命令行模糊查找工具。它可与其他命令结合，提升其他命令的使用体验。</p><h3 id=安装-2>安装</h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>brew install fzf
</span></span></code></pre></td></tr></table></div></div><h3 id=目录搜索>目录搜索</h3><p>fzf 的默认行为是在当前目录搜索。当然它的搜索和 fd 的搜索不同，它会进入交互式模式搜索文件或目录路径。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-13.gif alt></p><p>它支持通过 CTRL+P/N 上下选择，确认搜索结果后，输入 Enter 确认后，它会将输出直接作为输出打印到标准输出。由于它输出为标准输出，我们就有了更多可能性，通过管道将它与其他命令结合。</p><h3 id=命令组合>命令组合</h3><p>fzf 最大的魅力在于，我们可将其与其他命令组合，如</p><ul><li>将其他命令的输出作为 fzf 的输入，基于它进行搜索；</li><li>或将 fzf 的搜索内容作为其他命令的输入，更智能使用其他命令。</li></ul><p>我们具体介绍下吧。</p><p>首先，我们示例将 <code>one</code>、<code>two</code>、<code>three</code>、<code>four</code> 作为输入，通过 fzf 搜索选择。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>echo <span style=color:#e6db74>&#34;one\ntwo\nthree\nfour&#34;</span> | fzf
</span></span></code></pre></td></tr></table></div></div><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-14.gif alt></p><p>更多可能就诞生了，我们可以讲 ls 的输出作为 fzf 的输入。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>ls | fzf
</span></span></code></pre></td></tr></table></div></div><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-15.gif alt></p><p>将 fd 查找结果作为 fzf 的输入。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>fd --type file | fzf
</span></span></code></pre></td></tr></table></div></div><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-16.gif alt></p><p>接下来，我们尝试将搜索结果作为其他命令的输入。毕竟，如果 fzf 的搜索结果只是输出到终端，那就太可惜了，可将其作为其它命令的输入。</p><p>如将 fzf 搜索结果作为 vim 的输入，助力 vim 快速打开文件。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>vim <span style=color:#e6db74>`</span>fzf<span style=color:#e6db74>`</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-17.gif alt></p><p>我们也可以将多个命令组合，fzf 从其他命令接收输入，同时将搜索结果输出给其他啊命令。这样就能实现更多可能。</p><p>是不是已经发现，fzf 实现更多可能性的能力，如 <code>command1 | fzf | xargs command2</code>，将 command1 的结果作为 fzf 的搜索来源，将 fzf 的确认结果作为 command2 的输入。</p><p>如上文中的 zoxide （高效 cdi 命令）快速进入文件能力，我们可用 fzf 实现：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>cd `zoxide query --list {querystring} | fzf`
</span></span></code></pre></td></tr></table></div></div><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-19.gif alt></p><p>默认的 <code>zoxide query --list</code> 只记录的是 zoxide 中的历史记录，如想实现进入任意的目录，可使用如下命令：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>cd <span style=color:#e6db74>`</span>fd --type<span style=color:#f92672>=</span>directory | fzf<span style=color:#e6db74>`</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-18.gif alt></p><p>如下是一个 cdg 命令，作用是交互式搜索全局任意目录并通过 cd 进入。可 zoxide 中的 cdi 对比。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>alias cdg<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;cd_global() {cd $(fd --type directory $1 $2 | fzf)}; cd_global&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p>使用方式形如 <code>cdg pattern directory</code>，在哪一个目录下查询包含 pattern 的目录，确认后即可 cd 进入到这个目录。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-30-high-productivity-shell-commands-part2-20.gif alt></p><h2 id=总结>总结</h2><p>本文介绍了三个实现终端高效搜索的命令，分别是用于文件查找的 fd、文本搜索的 ripgrep 及交互式搜索工具 fzf。希望通过将这几个命令的组合使用，再进一步提升我们的终端使用效率。</p><p>希望本文对你有所帮助，感谢阅读。</p><div>本文来源于 <a href=https://www.poloxue.com>POLOXUE's BLOG</a>，地址： <a href=https://www.poloxue.com/posts/2023-10-30-high-productivity-shell-commands-part2/>推荐 3 个高效搜索命令</a></div></div><nav class="hide-on-mobile section-nav"><nav id=TableOfContents><ol><li><a href=#fdhttpsgithubcomsharkdpfd><a href=https://github.com/sharkdp/fd>fd</a></a><ol><li><a href=#安装>安装</a></li><li><a href=#递归>递归</a></li><li><a href=#正则>正则</a></li><li><a href=#通配符>通配符</a></li><li><a href=#文件类型>文件类型</a></li><li><a href=#隐藏文件和-gitinogre>隐藏文件和 <code>.gitinogre</code></a></li><li><a href=#其他示例>其他示例</a></li><li><a href=#性能>性能</a></li></ol></li><li><a href=#ripgrephttpsgithubcomburntsushiripgrep><a href=https://github.com/BurntSushi/ripgrep>ripgrep</a></a><ol><li><a href=#安装-1>安装</a></li><li><a href=#递归-1>递归</a></li><li><a href=#指定目录>指定目录</a></li><li><a href=#指定文件>指定文件</a></li><li><a href=#通配符-1>通配符</a></li><li><a href=#正则-1>正则</a></li><li><a href=#默认过滤>默认过滤</a></li><li><a href=#大小写敏感>大小写敏感</a></li><li><a href=#搜索并替换>搜索并替换</a></li><li><a href=#配置>配置</a></li></ol></li><li><a href=#fzfhttpsgithubcomjunegunnfzf><a href=https://github.com/junegunn/fzf>fzf</a></a><ol><li><a href=#安装-2>安装</a></li><li><a href=#目录搜索>目录搜索</a></li><li><a href=#命令组合>命令组合</a></li></ol></li><li><a href=#总结>总结</a></li></ol></nav></nav></div><div class=post><hr class=footer-separator><div class=tags><ul class=flat><li class=tag-li><a href=/tags/zsh>zsh</a></li></ul></div><div class=back><a href=https://www.poloxue.com/><span aria-hidden=true>← Back</span></a></div><div class=back></div></div><div class=post><img style=width:85% src=https://cdn.jsdelivr.net/gh/poloxue/images@main/wechat.png><div class=utterances></div><script src=https://utteranc.es/client.js repo=poloxue/blog issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div><div class="footer wrapper"><nav class=nav><div>2023 Polo Xue All rights reserved</div></nav></div><script>feather.replace()</script><script>var enableTruncate=!0,filterDepth=!1;const MAX_DEPTH=9;window.addEventListener("DOMContentLoaded",()=>{const e=new IntersectionObserver(e=>{e.reverse().forEach(e=>{const n=e.target.getAttribute("id");if(e.intersectionRatio>0){var t=document.querySelectorAll(`nav li a[href="#${n}"]`);t!=null&&t.forEach(e=>{if(e!=null){var t=getDepth(e.parentElement);filterDepth&&t<=MAX_DEPTH&&(clearActiveStatesInTableOfContents(),e.parentElement.classList.add("active"))}else filterDepth||(clearActiveStatesInTableOfContents(),e.parentElement.classList.add("active"))})}})});document.querySelectorAll("h1[id],h2[id],h3[id],h4[id]").forEach(t=>{e.observe(t)})});function isVisible(e){if(!(e instanceof Element))return!1;const n=getComputedStyle(e);if(n.display==="none")return!1;if(n.visibility!=="visible")return!1;if(n.opacity<.1)return!1;if(e.offsetWidth+e.offsetHeight+e.getBoundingClientRect().height+e.getBoundingClientRect().width===0)return!1;const t={x:e.getBoundingClientRect().left+e.offsetWidth/2,y:e.getBoundingClientRect().top+e.offsetHeight/2};if(t.x<0)return!1;if(t.x>(document.documentElement.clientWidth||window.innerWidth))return!1;if(t.y<0)return!1;if(t.y>(document.documentElement.clientHeight||window.innerHeight))return!1;let s=document.elementFromPoint(t.x,t.y);do if(s===e)return!0;while(s=s.parentNode)return!1}function clearActiveStatesInTableOfContents(){document.querySelectorAll("nav li").forEach(e=>{e.classList.remove("active")})}function getDepth(e){for(var t=0;e!==null&&e.tagName.toLowerCase()!=="ul";)t++,e=e.parentElement;return t}function navItems(){var e=document.querySelectorAll("nav nav li a");return Array.from(e).filter(e=>e.href!=null&&e.hash.startsWith("#"))}function lasItemInNavBarVisible(){var e=navItems().slice(-1)[0];return isVisible(e)}document.addEventListener("DOMContentLoaded",function(){if(!enableTruncate)return;var e=navItems();console.log(e),lasItemInNavBarVisible()||(filterDepth=!0,e.forEach(function(e){var t=getDepth(e.parentElement);t>MAX_DEPTH&&e.parentElement.classList.add("depth-nested")}))})</script></body></html>
<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>从 0 开始：教你如何配置 zsh - POLOXUE's BLOG</title><meta name=viewport content="width=device-width,initial-scale=1"><meta itemprop=name content="从 0 开始：教你如何配置 zsh"><meta itemprop=description content="本文将介绍如何使用 zsh 来提升命令行的操作效率。
你是否每天都在与命令行打交道？
如果答案是 &ldquo;Yes&rdquo;，那你肯定想拥有一个强大可定制的 Shell。 而 zsh 就是为这个目标而生，它运行于诸如 Linux 、MacOS 等类 Unix 系统下，可替换默认的 bash。
zsh 是什么？ zsh，或 Z Shell，是一个 Unix-Like 系统（如 macOS 或 Linux）下的 shell 命令行解释器。
它支持强大的自动补全能力，拥有丰富的插件，具有高可定制性，而且与 bash 充分兼容。虽然，它与 bash 相比，能力更加强大，但是它却依然比 bash 更快。
再者，相较于 bash，zsh 现在社区更加活跃，是一个还在成长中的项目。
zsh 的优势 zsh 和 bash 都是非常流行的 Unix-like shell，它们有着很多相似的功能特性。但相对于 bash，zsh 有这些差异化优势：
更优秀的命令行补全能力； 配置化能力更强； 更现代的语法； 改进的错误报告； 模拟 bash； 用户社区不断壮大，更新频繁； 体验更好的按键 支持vi模式等 安装 zsh Linux 系统下的安装非常简单。
Debian:
1 sudo apt install zsh Arch Linux:
1 sudo pacman -S zsh Fedora"><meta itemprop=datePublished content="2023-09-17T15:06:02+08:00"><meta itemprop=dateModified content="2023-09-17T15:06:02+08:00"><meta itemprop=wordCount content="900"><meta itemprop=keywords content="zsh,"><meta property="og:title" content="从 0 开始：教你如何配置 zsh"><meta property="og:description" content="本文将介绍如何使用 zsh 来提升命令行的操作效率。
你是否每天都在与命令行打交道？
如果答案是 &ldquo;Yes&rdquo;，那你肯定想拥有一个强大可定制的 Shell。 而 zsh 就是为这个目标而生，它运行于诸如 Linux 、MacOS 等类 Unix 系统下，可替换默认的 bash。
zsh 是什么？ zsh，或 Z Shell，是一个 Unix-Like 系统（如 macOS 或 Linux）下的 shell 命令行解释器。
它支持强大的自动补全能力，拥有丰富的插件，具有高可定制性，而且与 bash 充分兼容。虽然，它与 bash 相比，能力更加强大，但是它却依然比 bash 更快。
再者，相较于 bash，zsh 现在社区更加活跃，是一个还在成长中的项目。
zsh 的优势 zsh 和 bash 都是非常流行的 Unix-like shell，它们有着很多相似的功能特性。但相对于 bash，zsh 有这些差异化优势：
更优秀的命令行补全能力； 配置化能力更强； 更现代的语法； 改进的错误报告； 模拟 bash； 用户社区不断壮大，更新频繁； 体验更好的按键 支持vi模式等 安装 zsh Linux 系统下的安装非常简单。
Debian:
1 sudo apt install zsh Arch Linux:
1 sudo pacman -S zsh Fedora"><meta property="og:type" content="article"><meta property="og:url" content="https://www.poloxue.com/posts/2023-09-16-how-to-use-zsh-a-beginner-guide/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-09-17T15:06:02+08:00"><meta property="article:modified_time" content="2023-09-17T15:06:02+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="从 0 开始：教你如何配置 zsh"><meta name=twitter:description content="本文将介绍如何使用 zsh 来提升命令行的操作效率。
你是否每天都在与命令行打交道？
如果答案是 &ldquo;Yes&rdquo;，那你肯定想拥有一个强大可定制的 Shell。 而 zsh 就是为这个目标而生，它运行于诸如 Linux 、MacOS 等类 Unix 系统下，可替换默认的 bash。
zsh 是什么？ zsh，或 Z Shell，是一个 Unix-Like 系统（如 macOS 或 Linux）下的 shell 命令行解释器。
它支持强大的自动补全能力，拥有丰富的插件，具有高可定制性，而且与 bash 充分兼容。虽然，它与 bash 相比，能力更加强大，但是它却依然比 bash 更快。
再者，相较于 bash，zsh 现在社区更加活跃，是一个还在成长中的项目。
zsh 的优势 zsh 和 bash 都是非常流行的 Unix-like shell，它们有着很多相似的功能特性。但相对于 bash，zsh 有这些差异化优势：
更优秀的命令行补全能力； 配置化能力更强； 更现代的语法； 改进的错误报告； 模拟 bash； 用户社区不断壮大，更新频繁； 体验更好的按键 支持vi模式等 安装 zsh Linux 系统下的安装非常简单。
Debian:
1 sudo apt install zsh Arch Linux:
1 sudo pacman -S zsh Fedora"><script data-goatcounter=https://poloxue.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/main.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/extra.css><link id=dark-scheme rel=stylesheet type=text/css href=https://www.poloxue.com/css/dark.css><script src=https://www.poloxue.com/js/feather.min.js></script>
<script src=https://www.poloxue.com/js/main.js></script></head><body><div class="container-wide wrapper"><div class=header><div class=avatar><a href=https://www.poloxue.com/><img src=/avatar.webp alt="POLOXUE's BLOG"></a></div><h1 class=site-title><a href=https://www.poloxue.com/>POLOXUE's BLOG</a></h1><div class=site-description><nav class="nav social"><ul class=flat><li><a href=https://github.com/poloxue/ title=Github><i data-feather=github></i></a></li><li><a href=/index.xml title=RSS><i data-feather=rss></i></a></li></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>HOME</a></li><li><a href=/posts>POSTS</a></li><li><a href=/tags>TAGS</a></li><li><a href=/about/>ABOUT</a></li></ul></nav></div><div class=article-nav id=article-nav-id><div class=post><div class=post-header><div class=meta><div class=date><span class=day>17</span>
<span class=rest>Sep 2023</span></div></div><div class=matter><h1 class=title>从 0 开始：教你如何配置 zsh</h1></div></div><aside class="show-on-mobile toc" id=static-toc><header><h3>Contents</h3></header><nav id=TableOfContents><ol><li><a href=#zsh-是什么>zsh 是什么？</a></li><li><a href=#zsh-的优势>zsh 的优势</a></li><li><a href=#安装-zsh>安装 zsh</a><ol><li><a href=#设置zsh为默认shell>设置zsh为默认shell</a></li></ol></li><li><a href=#如何使用>如何使用</a><ol><li><a href=#1-配置文件>1. 配置文件</a></li><li><a href=#2-定制-zshrc>2. 定制 .zshrc</a></li><li><a href=#3-安装框架>3. 安装框架</a></li><li><a href=#语法高亮>语法高亮</a></li><li><a href=#vim-模式>vim 模式</a></li><li><a href=#历史记录>历史记录</a></li><li><a href=#命令补全>命令补全</a></li><li><a href=#使用-fzf>使用 FzF</a></li><li><a href=#使用-zsh-autocomplete>使用 zsh-autocomplete</a></li><li><a href=#按键绑定>按键绑定</a></li><li><a href=#窗口标题>窗口标题</a></li><li><a href=#zsh-命令>Zsh 命令</a></li></ol></li><li><a href=#总结>总结</a></li></ol></nav></aside><p>本文将介绍如何使用 zsh 来提升命令行的操作效率。</p><p>你是否每天都在与命令行打交道？</p><p>如果答案是 &ldquo;Yes&rdquo;，那你肯定想拥有一个强大可定制的 Shell。 而 zsh 就是为这个目标而生，它运行于诸如 Linux 、MacOS 等类 Unix 系统下，可替换默认的 bash。</p><h2 id=zsh-是什么>zsh 是什么？</h2><p>zsh，或 Z Shell，是一个 Unix-Like 系统（如 macOS 或 Linux）下的 shell 命令行解释器。</p><p>它支持强大的自动补全能力，拥有丰富的插件，具有高可定制性，而且与 bash 充分兼容。虽然，它与 bash 相比，能力更加强大，但是它却依然比 bash 更快。</p><p>再者，相较于 bash，zsh 现在社区更加活跃，是一个还在成长中的项目。</p><h2 id=zsh-的优势>zsh 的优势</h2><p>zsh 和 bash 都是非常流行的 Unix-like shell，它们有着很多相似的功能特性。但相对于 bash，zsh 有这些差异化优势：</p><ul><li>更优秀的命令行补全能力；</li><li>配置化能力更强；</li><li>更现代的语法；</li><li>改进的错误报告；</li><li>模拟 bash；</li><li>用户社区不断壮大，更新频繁；</li><li>体验更好的按键</li><li>支持vi模式等</li></ul><h2 id=安装-zsh>安装 zsh</h2><p>Linux 系统下的安装非常简单。</p><p>Debian:</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install zsh
</span></span></code></pre></td></tr></table></div></div><p>Arch Linux:</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo pacman -S zsh
</span></span></code></pre></td></tr></table></div></div><p>Fedora</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo dnf install zsh
</span></span></code></pre></td></tr></table></div></div><blockquote><p>译注：从 2019 后，macOS 的默认 shell 从 bash 更新到了 zsh，无需安装，以往版本可通过 <code>brew install zsh</code> 安装。推荐阅读：[什么是 zsh？我该使用 zsh 吗？]</p></blockquote><h3 id=设置zsh为默认shell>设置zsh为默认shell</h3><p>成功安装之后，可将 zsh 设置为默认 shell。执行如下命令：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chsh -s /bin/zsh
</span></span></code></pre></td></tr></table></div></div><p>输入密码确认！系统默认 shell 即修改为 zsh。zsh 的配置文件位于 ~/.zshrc，开始定制专属你的 zsh 吧。</p><h2 id=如何使用>如何使用</h2><p>如何充分使用 zsh？开始我们的一步一步配置吧。</p><h3 id=1-配置文件>1. 配置文件</h3><p>让我们一起看看 zsh 配置文件吧。</p><ul><li>.zshrc 或者 ~/.config/zsh/.zshrc，它是在每次启动 shell 都会运行的文件；</li><li>.zprofile，登录你的系统时运行，与 .profile 类似；</li><li>.zlogin，与 .zprofile 类似，唯一区别在于 .zlogin 运行在 .zshrc 之后；</li><li>.zlogout，退出登录终端时运行。它用于在退出登录时保存日志，或执行其他配置命令。但实际上，或许 cronjob 更适合这类任务；</li><li>.zshenv，用于设置环境变量；</li></ul><p>注意，以上所有的文件都有一个系统级别的对应文件，位于 /etc/zsh*，如 .zshrc 对应于 /etc/zshrc。通常，不同的 Linux 发行版会有自己的专属配置。</p><h3 id=2-定制-zshrc>2. 定制 .zshrc</h3><p>开始定制你的 .zshrc。路径可能位于 $HOME 或 $HOME/.config/zsh/。</p><p>首先，让我们设置一个命令行提示。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>autoload -U colors <span style=color:#000;font-weight:700>&amp;&amp;</span> colors
</span></span><span style=display:flex><span><span style=color:teal>PS1</span><span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#34;%B%{</span><span style=color:teal>$fg</span><span style=color:#d14>[red]%}[%{</span><span style=color:teal>$fg</span><span style=color:#d14>[yellow]%}%n%{</span><span style=color:teal>$fg</span><span style=color:#d14>[green]%}@%{</span><span style=color:teal>$fg</span><span style=color:#d14>[blue]%}%M %{</span><span style=color:teal>$fg</span><span style=color:#d14>[magenta]%}%~%{</span><span style=color:teal>$fg</span><span style=color:#d14>[red]%}]%{</span><span style=color:teal>$reset_color</span><span style=color:#d14>%}</span>$<span style=color:#d14>%b &#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>将 PS1 改造和 bash 有些许不同。虽然，这个 PS1 看起来依然很复杂，但比起来 bash 的方式还是更容易些。</p><p>保存 .zshrc，重启打开 zsh 查看，如下图所示：</p><p><img src=https://linuxopsys.com/wp-content/uploads/2023/03/how-to-use-zsh-instead-of-bash-20032023-01.png alt></p><p>配置自动补全插件:</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#998;font-style:italic># Basic auto/tab complete</span>
</span></span><span style=display:flex><span>autoload -U compinit
</span></span><span style=display:flex><span>zstyle <span style=color:#d14>&#39;:completion:*&#39;</span> menu <span style=color:#000;font-weight:700>select</span>
</span></span><span style=display:flex><span>zmodload zsh/complist
</span></span><span style=display:flex><span>setopt extendedglob
</span></span><span style=display:flex><span><span style=color:teal>_comp_options</span><span style=color:#000;font-weight:700>+=(</span>globdots<span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></td></tr></table></div></div><p>解释下：</p><ol><li>行 1：为 zsh 启用自动补全；</li><li>行 2：启用菜单的完成选项并选择（Tab将弹出菜单，回车将选择或完成命令）；</li><li>行 3：加载 zsh complist（完成脚本）；</li><li>行 4：启用 ** 通配符（通配符匹配任何文件/目录）</li><li>行 5：启用隐藏文件的自动完成功能</li></ol><p>保存文件，执行 <code>ls</code> 命令，输出如下：</p><p><img src=https://linuxopsys.com/wp-content/uploads/2023/03/how-to-use-zsh-instead-of-bash-20032023-02.png alt></p><h3 id=3-安装框架>3. 安装框架</h3><p>市面上有很多由于管理 zsh 配置的框架，如 Oh-my-zsh、Prezto、Zinit 和 Antigen。</p><p>其中，Oh My Zsh 深受用户欢迎。它配备了许多默认功能，改善您的命令行体验，如自动完成、插件、主题、语法高亮、alias 别名、自定义提示和历史命令管理。</p><h4 id=安装-oh-my-zsh>安装 oh-my-zsh</h4><p>使用 curl 安装 oh-my-zsh，确保你的系统已经成功安装了 <code>curl</code>。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install curl    <span style=color:#998;font-style:italic>#Ubuntu / Debian</span>
</span></span><span style=display:flex><span>sudo pacman -S curl   <span style=color:#998;font-style:italic>#Arch Linux</span>
</span></span><span style=display:flex><span>sudo dnf install curl   <span style=color:#998;font-style:italic>#Fedora</span>
</span></span></code></pre></td></tr></table></div></div><p>下载安装 oh-my-zsh 脚本：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sh -c <span style=color:#d14>&#34;</span><span style=color:#000;font-weight:700>$(</span>curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span style=color:#000;font-weight:700>)</span><span style=color:#d14>&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>如上命令将安装 oh-my-zsh，并将现有 .zshrc 保存为 .zshrc.pre-oh-my-zsh。</p><p>安装成功后，oh-my-zsh 会覆盖你的自定义提示，效果如下所示：</p><p><img src=https://linuxopsys.com/wp-content/uploads/2023/03/how-to-use-zsh-instead-of-bash-20032023-03.png alt></p><h4 id=启用插件>启用插件</h4><p>安装成功后，$HOME 目录下将会有一个名为 <code>.oh-my-zsh</code> 目录。zsh 的内置插件都在 ~/.oh-my-zsh/plugins。</p><p>查看 oh-my-zsh 提供的插件，输入：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ <span style=color:#0086b3>cd</span> ~/.oh-my-zsh/plugins/
</span></span><span style=display:flex><span>$ ls
</span></span></code></pre></td></tr></table></div></div><p>启用插件也很简单，编辑 ~/.zshrc, 将插件名称追加到 <code>plugins=()</code> 中即可。</p><p>示例如下：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:teal>plugins</span><span style=color:#000;font-weight:700>=(</span>golang git autocd<span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=tab-补全>Tab 补全</h4><p>安装配置 oh-my-zsh 成功之后，tab 补全已经启用。如下效果：</p><p><img src=https://linuxopsys.com/wp-content/uploads/2023/03/how-to-use-zsh-instead-of-bash-19032023-01.gif alt></p><h4 id=提示主题>提示主题</h4><p>oh-my-zsh 的提示主题可提升终端视觉体验，如方便地查看当前所在目录、用户名、主机名等。这些通过内置插件即可实现。</p><p>那么，如何启用 oh-my-zsh 提示主题？</p><p>首先，你可在 <code>~/.oh-my-zsh/themes/</code> 目录或 <a href=https://github.com/ohmyzsh/ohmyzsh/wiki/Themes>GitHub 主题</a> 页面上查看你想配置的主题。假设，确认选择名为 <code>simple</code> 主题，编辑 <code>.zshrc</code>，设置 <code>ZSH_THEME</code> 变量。</p><p>配置如下所示：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:teal>ZSH_THEME</span><span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#34;simple&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>重启打开一个新的终端，将会有提示信息的主题已经变了。</p><p>其他主题推荐：<a href=https://github.com/romkatv/powerlevel10k/blob/master/README.md#oh-my-zsh>powerlevel10k</a> 和 <a href=https://ohmyposh.dev/docs/themes>oh-my-posh</a></p><blockquote><p>译注：本人在用的就是 powerlevel10k 主题。但它不是内置主题，要单独安装。</p></blockquote><h3 id=语法高亮>语法高亮</h3><p>zsh 语法高亮，广泛使用的插件之一是 <a href=https://github.com/zdharma-continuum/fast-syntax-highlighting>fast-syntax-highlighting</a>。但它并非是 oh-my-zsh 内置插件，因为要手动安装。</p><p>安装命令：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/zdharma-continuum/fast-syntax-highlighting.git <span style=color:#d14>${</span><span style=color:teal>ZSH_CUSTOM</span><span style=color:#000;font-weight:700>:-</span><span style=color:teal>$HOME</span>/.oh-my-zsh/custom<span style=color:#d14>}</span>/plugins/fast-syntax-highlighting
</span></span></code></pre></td></tr></table></div></div><p>配置到 <code>.zshrc</code> 的插件列表，如下所示：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:teal>plugins</span><span style=color:#000;font-weight:700>=(</span>golang git autocd fast-syntax-highlighting<span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></td></tr></table></div></div><p>重新打开终端，查看：</p><p><img src=https://linuxopsys.com/wp-content/uploads/2023/03/how-to-use-zsh-instead-of-bash-19032023-03.gif alt></p><blockquote><p>译注：zsh-syntax-highlighting 似乎比 fast-syntax-highlighting 受欢迎，一个站点提供对比信息，访问：<a href=https://www.libhunt.com/compare-fast-syntax-highlighting-vs-zsh-syntax-highlighting>fast-syntax-highlighting vs zsh-syntax-highlighting</a>。</p></blockquote><h3 id=vim-模式>vim 模式</h3><p>启用 vim 模式，编辑.zshrc，如下：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bindkey -v
</span></span></code></pre></td></tr></table></div></div><p>如上配置即可启用 vi，在终端中使用 vi 键，用 ESC 进入 vi Normal 模式，便可使用 vim 键进行导航和操作文本。</p><p>在 vi 命令和插入模式下，绑定 Ctrl+e 实现 $EDITOR 编辑当前命令：</p><pre tabindex=0><code>bindkey -M viins &#39;^e&#39; edit-command-line
bindkey -M vicmd &#39;^e&#39; edit-command-line
</code></pre><blockquote><p>译注：作者这里介绍如何自定义 vi-mode，但其实 oh-my-zsh 内置了 <code>vi-mode</code> 插件，阅读 <a href=https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/vi-mode>readme: vi-mode plugin</a> 了解它更多功能。github 还有其他开源的 zsh-vi-mode 插件，没有去体验，猜测比内置的功能更强大。</p></blockquote><h3 id=历史记录>历史记录</h3><p>在开始 history 命令前，我们先了解下 <code>.zshrc</code> 中与 history 相关的一些变量和选项。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:teal>HISTSIZE</span><span style=color:#000;font-weight:700>=</span><span style=color:#099>10000</span>
</span></span><span style=display:flex><span><span style=color:teal>SAVEHIST</span><span style=color:#000;font-weight:700>=</span><span style=color:#099>10000</span>
</span></span><span style=display:flex><span>setopt appendhistory
</span></span><span style=display:flex><span>setopt INC_APPEND_HISTORY
</span></span><span style=display:flex><span>setopt SHARE_HISTORY
</span></span></code></pre></td></tr></table></div></div><p>说明如下：</p><ul><li>行 1：设置保留历史记录最大行数；</li><li>行 2：设置文件中历史记录最大行数；</li><li>行 3：使用多个 zsh 时，追加到历史文件而不是替换；</li><li>行 4: 直接追加历史记录而非等待 shell 退出；</li><li>行 5：允许使用不同终端输入的命令；如果同时使用多个终端，这个配置非常有用；</li></ul><p>如何输出历史记录？使用 <code>history</code> 命令即可，如下所示：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#0086b3>history</span>
</span></span></code></pre></td></tr></table></div></div><p>注意，它不会保存任何只是输入但未执行的命令。</p><p>输出最后 10 行命令：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#0086b3>history</span> -10
</span></span></code></pre></td></tr></table></div></div><p>显示大于等于 20 行的命令。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#0086b3>history</span> +20
</span></span></code></pre></td></tr></table></div></div><p>up 方向键，可用于查看上一个命令，down 方向键可用于查看下一个命令。</p><p><code>!</code> 是在历史命令记录查看上，有特定的能力，可协助快速使用历史命令。</p><p>让我们看一些例子：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>!!&lt;Press Tab&gt;
</span></span></code></pre></td></tr></table></div></div><p>如果在 <code>!!</code> 后按 Tab，将自动显示最后一个命令。特别是一些要超级权限才能执行的命令，忘记输入 <code>sudo</code>，可通过这种方式快速补齐。</p><p>示例如下：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>apt update
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># Does not work, it needs sudo</span>
</span></span><span style=display:flex><span>sudo !!&lt;Press tab&gt;
</span></span></code></pre></td></tr></table></div></div><p>按 Tab 后将自动将 <code>apt update</code> 补齐到 <code>sudo</code> ，实现快速输入。</p><p>如果将 <code>!</code> 与 结合，将也会有不一样的体验。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>!&lt;number&gt; &lt;press tab&gt;
</span></span></code></pre></td></tr></table></div></div><p>按下 Tab 后，输入会被会自动补全为历史记录中对应编号的命令。</p><h3 id=命令补全>命令补全</h3><p>任何命令，如想实现 zsh 自动补全，则必须提供补全规则脚本。zsh 默认的补全规则文件存放在 <code>/usr/share/zsh/site-functions/</code> 下。如某命令无法自动补全，尝试 google 搜索该命令的补全脚本，并将其放在该目录下。</p><p>补全目录的具体位置以 <code>$fpath</code> 为准，不同系统发行版本可能有所不同。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#0086b3>echo</span> <span style=color:teal>$fpath</span>
</span></span></code></pre></td></tr></table></div></div><p>你也可以自定义补全目录位置，将其追加到这个变量之后即可。</p><h3 id=使用-fzf>使用 FzF</h3><p>Fzf 是一个模糊匹配查找器，可与 zsh 完美配合。通过 key-binding 或使用 fzf-tab 插件实现命令或目录的补全。</p><p>让我们开始安装。</p><p>首先，这个插件要在 zshrc 的最后加载。因此，我们无法用 oh-my-zsh 来管理这个插件。</p><p>插件下载，将其 clone 到 <code>~/.config/zsh</code>，命令如下：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/Aloxaf/fzf-tab ~/.config/zsh/fzf-tab/
</span></span></code></pre></td></tr></table></div></div><p>激活插件，将 fzf-tab 插件附加到 .zshrc 末尾：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#0086b3>echo</span> <span style=color:#d14>&#39;source ~/.config/zsh/fzf-tab/fzf-tab.plugin.zsh&#39;</span> &gt;&gt; ~/.config/zsh/.zshrc
</span></span></code></pre></td></tr></table></div></div><p>效果如下：</p><p><img src=https://linuxopsys.com/wp-content/uploads/2023/03/how-to-use-zsh-instead-of-bash-19032023-02.gif alt></p><blockquote><p>译注：文中缺少了一个步骤，还需要安装 <code>fzf</code> 命令, macos 安装： <code>brew install fzf</code>。</p></blockquote><blockquote><p>译注：这个插件交互体验不错，但整体感觉下来不如 <a href=https://github.com/zsh-users/zsh-autosuggestions>zsh-autosuggestions</a> 操作快捷，先不启动了，大家可以试个人情况而定。另外，在测试过程中，我发现，<code>zsh-autosuggestions</code> 与 <code>fzf-tab</code> 似乎是无法同时启用的。</p></blockquote><h3 id=使用-zsh-autocomplete>使用 zsh-autocomplete</h3><p>zsh-autocomplete，受大家欢迎的自动补齐插件之一，它提供了一些高级的命令。</p><p>说明，<code>zsh-autocomplete</code> 和其他插件存在一些兼容性问题。故而，我们将用 <code>zsh-autocomplete</code> 默认提供的 <code>.zshrc</code> 配置测试。</p><p>操作前，备份当前 <code>.zshrc</code>。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#998;font-style:italic># If it is in home</span>
</span></span><span style=display:flex><span>mv ~/.zshrc ~/zshrc
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># If it is in .config/zsh</span>
</span></span><span style=display:flex><span>mv ~/.config/zsh/.zshrc ~/.config/zsh/zshrc
</span></span></code></pre></td></tr></table></div></div><p>下载并安装插件：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#998;font-style:italic># Change your directory to ~/.config/zsh first, create if not exists</span>
</span></span><span style=display:flex><span><span style=color:#0086b3>cd</span> ~/
</span></span><span style=display:flex><span>git clone https://github.com/marlonrichert/zsh-autocomplete
</span></span><span style=display:flex><span>mv zsh-autocomplete/.zshrc ~/
</span></span></code></pre></td></tr></table></div></div><p>源码仓库中的 .zshrc，未设置插件路径。建议进入 <code>~/.zshrc</code> 手动设置或使用 sed 命令更改：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sed -i <span style=color:#d14>&#39;s|/path/to|~/.config/zsh/zsh-autocomplete|g&#39;</span> ~/.zshrc
</span></span></code></pre></td></tr></table></div></div><blockquote><p>译注：有两个问题。</p><ol><li>zsh-autocomplete 源码最新版目录下无 <code>.zshrc</code>，要 checkout 到 <code>22.01.21</code> tag 下，才能继续.</li><li>sed 在 macos 下存在兼容性问题，要加上 -e 选项，才能正常工作。</li></ol></blockquote><blockquote><p>译注：读了下 <a href=https://github.com/marlonrichert/zsh-autocomplete/tree/main>zsh-autocomplete 说明文档</a>，其中，没有 oh-my-zsh 的安装说明。</p></blockquote><p>重新打开终端，输入查看效果：</p><p><img src=https://linuxopsys.com/wp-content/uploads/2023/03/how-to-use-zsh-instead-of-bash-19032023-04.gif alt></p><h3 id=按键绑定>按键绑定</h3><p>Key Bindings，即按键绑定，它让 zsh 给你带来更加丝滑的体验，诸如实现将按键绑定到特定功能、启动程序、复制粘贴等。注意，部分组合键可能无效，shell 捕捉按键的能力是有限的。</p><p>要注意的是，在 zsh 中进行按键绑定，要用 ASCII 方式表示按键。</p><p>如下代码，将 TAB 绑定到 fzf-tab 插件，从而在 vi 插入模式，通过 <code>Tab</code> 调用 <code>fzf</code> 实现补全。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bindkey -M viins <span style=color:#d14>&#39;^I&#39;</span> fzf-tab-complete
</span></span></code></pre></td></tr></table></div></div><blockquote><p>译注：
Ctrl+I 与 Tab 在按键效果上等通。虽然这里绑定的是 Ctrl+I，但也等同于绑定 Tab。其他类情况还有，Ctrl+M 等同于 Enter，Ctrl+H 等同于 <code>backspace</code> 等。更多查看 <a href=https://ostechnix.com/list-useful-bash-keyboard-shortcuts/>bash 快捷键</a>。</p></blockquote><p>oh-my-zsh 或其他插件提供的功能函数，都可以通过这种方式绑定到相应的快捷键。</p><h3 id=窗口标题>窗口标题</h3><p>Shell 一般会提供设置窗口标题的能力。如当使用如 Alt+Tab 切换窗口时，可通过标题快速发现目标。我们可以通过查看窗口标题来确认终端当前目录。</p><p>注意，窗口标题的位置，或功能上在不同环境下可能有所差异，因为每个环境有自己的实现。</p><p>有一种方法可以通过使用 .zshrc 中的函数来动态更改窗口标题。代码实现不多解释啊了，但放心在你的 .zshrc 中使用：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span><span style=color:#000;font-weight:700>case</span> <span style=color:#d14>&#34;</span><span style=color:teal>$TERM</span><span style=color:#d14>&#34;</span> in <span style=color:#000;font-weight:700>(</span>rxvt|rxvt-*|st|st-*|*xterm*|<span style=color:#000;font-weight:700>(</span>dt|k|E<span style=color:#000;font-weight:700>)</span>term<span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#0086b3>local</span> term_title <span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span> print -n <span style=color:#d14>&#34;\e]0;</span><span style=color:#d14>${</span>(j: :<span style=color:teal>q</span>)@<span style=color:#d14>}</span><span style=color:#d14>\a&#34;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    precmd <span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#0086b3>local</span> <span style=color:teal>DIR</span><span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#34;</span><span style=color:#000;font-weight:700>$(</span>print -P <span style=color:#d14>&#39;[%c]&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#d14>&#34;</span>
</span></span><span style=display:flex><span>      term_title <span style=color:#d14>&#34;</span><span style=color:teal>$DIR</span><span style=color:#d14>&#34;</span> <span style=color:#d14>&#34;st&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    preexec <span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#0086b3>local</span> <span style=color:teal>DIR</span><span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#34;</span><span style=color:#000;font-weight:700>$(</span>print -P <span style=color:#d14>&#39;[%c]%#&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#d14>&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#0086b3>local</span> <span style=color:teal>CMD</span><span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#34;</span><span style=color:#d14>${</span>(j:<span style=color:#d14>\n</span>:)<span style=color:#d14>${</span>(f)1<span style=color:#d14>}}</span><span style=color:#d14>&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#998;font-style:italic>#term_title &#34;$DIR&#34; &#34;$CMD&#34; use this if you want directory in command, below only prints program name</span>
</span></span><span style=display:flex><span>	  term_title <span style=color:#d14>&#34;</span><span style=color:teal>$CMD</span><span style=color:#d14>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  ;;
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>esac</span>
</span></span></code></pre></td></tr></table></div></div><p>这段代码会将当前工作目录名作为窗口标题，效果如下：</p><p><img src=https://linuxopsys.com/wp-content/uploads/2023/03/how-to-use-zsh-instead-of-bash-20032023-06.png alt></p><blockquote><p>译注：在 iTerm2 下，这段代码还需要一些特殊处理，才能生效。具体细节可查看这个回答 <a href=https://superuser.com/questions/292652/change-iterm2-window-and-tab-titles-in-zsh>Change iTerm2 window and tab titles in zsh</a></p></blockquote><h3 id=zsh-命令>Zsh 命令</h3><p>在 zsh 下，有一些特定命令可用于提高你的工作效率。</p><p>十六进制数转十进制：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>$ <span style=color:#0086b3>echo</span> <span style=color:#000;font-weight:700>$((</span><span style=color:#099>16#</span>ff<span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span><span style=color:#099>255</span>
</span></span></code></pre></td></tr></table></div></div><p>十进制转十六进制：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>$ <span style=color:#0086b3>echo</span> <span style=color:#000;font-weight:700>$((</span><span style=color:#000;font-weight:700>[</span><span style=color:#998;font-style:italic>##16]255))</span>
</span></span><span style=display:flex><span>FF
</span></span></code></pre></td></tr></table></div></div><p>打印 ASCII 字符整数值：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ <span style=color:#0086b3>echo</span> <span style=color:#000;font-weight:700>$((</span><span style=color:#998;font-style:italic>#\a)) </span>
</span></span><span style=display:flex><span><span style=color:#099>97</span>
</span></span></code></pre></td></tr></table></div></div><p>字符串拆分为数组：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ <span style=color:#0086b3>echo</span> <span style=color:#d14>&#34;</span><span style=color:#d14>${</span>(@f)<span style=color:#000;font-weight:700>$(</span><span style=color:#0086b3>echo</span> hello<span style=color:#d14>\n</span>world<span style=color:#000;font-weight:700>)</span><span style=color:#d14>}</span><span style=color:#d14>&#34;</span>
</span></span><span style=display:flex><span>hello world
</span></span></code></pre></td></tr></table></div></div><p>自定义分隔符拆分字符串为数组：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ <span style=color:#0086b3>echo</span> <span style=color:#d14>&#34;</span><span style=color:#d14>${</span>(s._.)<span style=color:#000;font-weight:700>$(</span><span style=color:#0086b3>echo</span> hello_world_linux<span style=color:#000;font-weight:700>)</span><span style=color:#d14>}</span><span style=color:#d14>&#34;</span>
</span></span><span style=display:flex><span>hello world linux
</span></span></code></pre></td></tr></table></div></div><p>以上用 _ 分隔这段字符串。</p><p>请注意，您可以使用 &lsquo;.&rsquo; 或 &lsquo;:&rsquo; 作为分隔符。</p><p>示例：</p><ul><li>(s.:.): 分割字符串是 <code>:</code></li><li>(s:.:)：分割字符串是 <code>.</code></li></ul><p>如下为译者补充示例：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#0086b3>echo</span> <span style=color:#d14>&#34;</span><span style=color:#d14>${</span>(s.:.)<span style=color:#000;font-weight:700>$(</span><span style=color:#0086b3>echo</span> hello:world.linux<span style=color:#000;font-weight:700>)</span><span style=color:#d14>}</span><span style=color:#d14>&#34;</span>
</span></span><span style=display:flex><span>hello world.linux
</span></span><span style=display:flex><span>$ <span style=color:#0086b3>echo</span> <span style=color:#d14>&#34;</span><span style=color:#d14>${</span>(s:.:)<span style=color:#000;font-weight:700>$(</span><span style=color:#0086b3>echo</span> hello:world.linux<span style=color:#000;font-weight:700>)</span><span style=color:#d14>}</span><span style=color:#d14>&#34;</span>
</span></span><span style=display:flex><span>hello:world linux
</span></span></code></pre></td></tr></table></div></div><h2 id=总结>总结</h2><p>从本文可知，zsh 提供了相当多的能力，初看可能略感复杂。但如果你坚持使用，它将会成为你日常工作中不可获取的工具。</p><p>我的博文：<a href=http://localhost:1313/posts/2023-09-16-how-to-use-zsh-a-beginner-guide/>从 0 开始：教你如何配置 zsh</a>,译：<a href=https://linuxopsys.com/topics/use-zsh>How to Use Zsh: A Beginer&rsquo;s Guide</a></p></div><nav class="hide-on-mobile section-nav"><nav id=TableOfContents><ol><li><a href=#zsh-是什么>zsh 是什么？</a></li><li><a href=#zsh-的优势>zsh 的优势</a></li><li><a href=#安装-zsh>安装 zsh</a><ol><li><a href=#设置zsh为默认shell>设置zsh为默认shell</a></li></ol></li><li><a href=#如何使用>如何使用</a><ol><li><a href=#1-配置文件>1. 配置文件</a></li><li><a href=#2-定制-zshrc>2. 定制 .zshrc</a></li><li><a href=#3-安装框架>3. 安装框架</a></li><li><a href=#语法高亮>语法高亮</a></li><li><a href=#vim-模式>vim 模式</a></li><li><a href=#历史记录>历史记录</a></li><li><a href=#命令补全>命令补全</a></li><li><a href=#使用-fzf>使用 FzF</a></li><li><a href=#使用-zsh-autocomplete>使用 zsh-autocomplete</a></li><li><a href=#按键绑定>按键绑定</a></li><li><a href=#窗口标题>窗口标题</a></li><li><a href=#zsh-命令>Zsh 命令</a></li></ol></li><li><a href=#总结>总结</a></li></ol></nav></nav></div><div class=post><hr class=footer-separator><div class=tags><ul class=flat><li class=tag-li><a href=/tags/zsh>zsh</a></li></ul></div><div class=back><a href=https://www.poloxue.com/><span aria-hidden=true>← Back</span></a></div><div class=back></div></div></div><div class="footer wrapper"><nav class=nav><div>2023 2023 Polo Xue All rights reserved</div></nav></div><script>feather.replace()</script><script>var enableTruncate=!0,filterDepth=!1;const MAX_DEPTH=9;window.addEventListener("DOMContentLoaded",()=>{const e=new IntersectionObserver(e=>{e.reverse().forEach(e=>{const n=e.target.getAttribute("id");if(e.intersectionRatio>0){var t=document.querySelectorAll(`nav li a[href="#${n}"]`);t!=null&&t.forEach(e=>{if(e!=null){var t=getDepth(e.parentElement);filterDepth&&t<=MAX_DEPTH&&(clearActiveStatesInTableOfContents(),e.parentElement.classList.add("active"))}else filterDepth||(clearActiveStatesInTableOfContents(),e.parentElement.classList.add("active"))})}})});document.querySelectorAll("h1[id],h2[id],h3[id],h4[id]").forEach(t=>{e.observe(t)})});function isVisible(e){if(!(e instanceof Element))return!1;const n=getComputedStyle(e);if(n.display==="none")return!1;if(n.visibility!=="visible")return!1;if(n.opacity<.1)return!1;if(e.offsetWidth+e.offsetHeight+e.getBoundingClientRect().height+e.getBoundingClientRect().width===0)return!1;const t={x:e.getBoundingClientRect().left+e.offsetWidth/2,y:e.getBoundingClientRect().top+e.offsetHeight/2};if(t.x<0)return!1;if(t.x>(document.documentElement.clientWidth||window.innerWidth))return!1;if(t.y<0)return!1;if(t.y>(document.documentElement.clientHeight||window.innerHeight))return!1;let s=document.elementFromPoint(t.x,t.y);do if(s===e)return!0;while(s=s.parentNode)return!1}function clearActiveStatesInTableOfContents(){document.querySelectorAll("nav li").forEach(e=>{e.classList.remove("active")})}function getDepth(e){for(var t=0;e!==null&&e.tagName.toLowerCase()!=="ul";)t++,e=e.parentElement;return t}function navItems(){var e=document.querySelectorAll("nav nav li a");return Array.from(e).filter(e=>e.href!=null&&e.hash.startsWith("#"))}function lasItemInNavBarVisible(){var e=navItems().slice(-1)[0];return isVisible(e)}document.addEventListener("DOMContentLoaded",function(){if(!enableTruncate)return;var e=navItems();console.log(e),lasItemInNavBarVisible()||(filterDepth=!0,e.forEach(function(e){var t=getDepth(e.parentElement);t>MAX_DEPTH&&e.parentElement.classList.add("depth-nested")}))})</script></body></html>
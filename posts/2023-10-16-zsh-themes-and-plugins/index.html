<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>终端环境：zsh 、oh-my-zsh、提示主题与 7 效率插件 - 菠萝学量化</title><meta name=viewport content="width=device-width,initial-scale=1"><meta itemprop=name content="终端环境：zsh 、oh-my-zsh、提示主题与 7 效率插件"><meta itemprop=description content="本教程将主要介绍 zsh 的安装、主题，以及介绍 7 提升效率的 zsh 插件"><meta itemprop=datePublished content="2023-10-16T15:00:06+08:00"><meta itemprop=dateModified content="2023-10-16T15:00:06+08:00"><meta itemprop=wordCount content="644"><meta itemprop=keywords content="Zsh"><meta property="og:url" content="https://www.poloxue.com/posts/2023-10-16-zsh-themes-and-plugins/"><meta property="og:site_name" content="菠萝学量化"><meta property="og:title" content="终端环境：zsh 、oh-my-zsh、提示主题与 7 效率插件"><meta property="og:description" content="本教程将主要介绍 zsh 的安装、主题，以及介绍 7 提升效率的 zsh 插件"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-10-16T15:00:06+08:00"><meta property="article:modified_time" content="2023-10-16T15:00:06+08:00"><meta property="article:tag" content="Zsh"><meta name=twitter:card content="summary"><meta name=twitter:title content="终端环境：zsh 、oh-my-zsh、提示主题与 7 效率插件"><meta name=twitter:description content="本教程将主要介绍 zsh 的安装、主题，以及介绍 7 提升效率的 zsh 插件"><script data-goatcounter=https://poloxue.goatcounter.com/count async src=//gc.zgo.at/count.js></script><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/main.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/extra.css><link id=dark-scheme rel=stylesheet type=text/css href=https://www.poloxue.com/css/dark.css><script src=https://www.poloxue.com/js/feather.min.js></script><script src=https://www.poloxue.com/js/main.js></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script><script>MathJax={tex:{displayMath:[["[","]"],["$$","$$"]],inlineMath:[["(",")"],["$","$"]]}}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7019080091542951" crossorigin=anonymous></script></head><body><div class="container-wide wrapper"><div class=header><div class=avatar><a href=https://www.poloxue.com/><img src=/avatar.png alt=菠萝学量化></a></div><h1 class=site-title><a href=https://www.poloxue.com/>菠萝学量化</a></h1><div class=site-description><nav class="nav social"><ul class=flat><li><a href=https://github.com/poloxue/ title=Github><i data-feather=github></i></a></li><li><a href=/posts/index.xml title=RSS><i data-feather=rss></i></a></li><li><a href=/ title=Wechat><i data-feather=message-circle></i></a></li><span class=scheme-toggle><a href=# id=scheme-toggle></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>文章列表</a></li><li><a href=/tags>分类标签</a></li><li><a href=/about/about>关于我</a></li></ul></nav></div><div class=article-nav id=article-nav-id><div class=post><div class=post-header><div class=meta><div class=date><span class=day>16</span>
<span class=rest>Oct 2023</span></div></div><div class=matter><h1 class=title>终端环境：zsh 、oh-my-zsh、提示主题与 7 效率插件</h1></div></div><aside class="show-on-mobile toc" id=static-toc><header><h3>Contents</h3></header><nav id=TableOfContents><ol><li><a href=#为什么使用-zsh>为什么使用 zsh？</a><ol><li><a href=#改进的自动补全能力>改进的自动补全能力</a></li><li><a href=#更好的脚本和插件支持>更好的脚本和插件支持</a></li><li><a href=#高级的主题和提示符定制>高级的主题和提示符定制</a></li><li><a href=#更智能的命令行交互>更智能的命令行交互</a></li><li><a href=#其他>其他</a></li></ol></li><li><a href=#安装>安装</a></li><li><a href=#oh-my-zsh>oh-my-zsh</a></li><li><a href=#安装-1>安装</a></li><li><a href=#主题>主题</a></li><li><a href=#内置插件>内置插件</a><ol><li><a href=#插件-1---git>插件 1 - git</a></li><li><a href=#插件-2---web-search>插件 2 - web-search</a></li><li><a href=#插件-3---jsontools>插件 3 - jsontools</a></li><li><a href=#插件-4---z>插件 4 - z</a></li><li><a href=#插件-5---vi-mode>插件 5 - vi-mode</a></li></ol></li><li><a href=#三方插件>三方插件</a><ol><li><a href=#下载>下载</a></li><li><a href=#配置>配置</a></li><li><a href=#插件-6---zsh-syntax-highlighting>插件 6 - zsh-syntax-highlighting</a></li><li><a href=#插件-7---zsh-autosuggestions>插件 7 - zsh-autosuggestions</a></li></ol></li><li><a href=#总结>总结</a></li></ol></nav></aside><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-17.png alt></p><p>前文中，对 iTerm2 已经有了一个大概认识。但一个高效的终端环境，离不开一个优秀 shell 解释器。</p><p>视频版本，没有文章详细：</p><div id=video-6197860971zJcH4hZW4o style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden></div><script>var r=new XMLHttpRequest;r.addEventListener("load",function(){container=document.getElementById("video-6197860971zJcH4hZW4o"),data=JSON.parse(this.responseText),bb_id="619786097",yt_id="1zJcH4hZW4o",data.country_code=="CN"||yt_id==0&&bb_id!=0?container.innerHTML='<iframe src="https://player.bilibili.com/player.html?aid='+bb_id+'&amp;page=1" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0;" allowfullscreen title="Bilibili Video" ></iframe > ':yt_id!=0&&(container.innerHTML='<iframe src="https://www.youtube.com/embed/'+yt_id+'"style="position:absolute;top:0;left:0;width:100%;height:100%; border:0;" title="YouTube video player" frameborder="0" allow="accelerometer;autoplay;clipboard-write;encrypted-media;gyroscope;picture-in-picture;web-share"allowfullscreen></iframe>')}),r.open("GET","https://ipapi.co/json/"),r.send()</script><p>本篇文章将主要介绍 zsh + oh-my-zsh 的安装、提示符主题配置，以及介绍 7 提升效率的 zsh 插件。</p><h2 id=为什么使用-zsh>为什么使用 zsh？</h2><p>开始前，先问为什么，知其然，要知其所以然，是个好习惯。</p><p>所以，为什么要用 zsh 呢？</p><p>大家最熟悉的 shell 解释器，肯定是 bash。zsh（Z Sehll）相对于 bash（Bourne Again Shell）相对有哪些优势呢？</p><h3 id=改进的自动补全能力>改进的自动补全能力</h3><p>zsh 提供了更强大、更灵活的自动补全功能。它不但可以自动补全命令，设置选项、参数甚至文件名，都可自动补全。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-18.gif alt></p><p>对于命令参数，zsh 甚至可以显示简短的帮助信息，这使得探索新命令变得更加容易。</p><h3 id=更好的脚本和插件支持>更好的脚本和插件支持</h3><p>zsh 有一个强大的社区，提供了大量的插件和主题，如 oh-my-zsh 这个流行的 zsh 框架，允许我们轻松添加、更新插件和主题。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-21.gif alt></p><p>这些插件可以增强 shell 的功能，提供便捷的别名、函数以及其他有用的特性。</p><h3 id=高级的主题和提示符定制>高级的主题和提示符定制</h3><p>zsh 还允许用户对命令行提示符进行高度定制，包括颜色、内容和格式。用户可以非常容易地调整提示符来显示 git 分支、Python 虚拟环境等信息。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-19.png alt></p><p>我们会在后续介绍一款非常强大的 zsh 插件，名为 powerlevel10k，它支持完全的主题自定义特性，非常强大。</p><h3 id=更智能的命令行交互>更智能的命令行交互</h3><p>zsh 还支持 bash 不具备的一些智能特性，如拼写校正和近似完成。如果用户输入的命令有拼写错误，zsh 可以建议正确的命令。</p><p>如我输入 lls，会提示我 &ldquo;zsh: correct &rsquo;lls&rsquo; to &rsquo;ls&rsquo; [nyae]?&rdquo;</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>❯ lls
</span></span><span style=display:flex><span>zsh: correct <span style=color:#e6db74>&#39;lls&#39;</span> to <span style=color:#e6db74>&#39;ls&#39;</span> <span style=color:#f92672>[</span>nyae<span style=color:#f92672>]</span>?
</span></span></code></pre></td></tr></table></div></div><p>输入 y 接受纠正建议。</p><p>当然这个是要做个简单的配置，通过 <code>setopt CORRECT_ALL</code> 启用。</p><h3 id=其他>其他</h3><p>其他还有很多强大特性。如：</p><p>zsh 的命令行历史是终端间共享的，通过自动补全，能一步增强了操作效率与体验。</p><p>zsh 的文件匹配和通配符功能确实比 Bash 要强大得多，除了常规的通配符能力，还提供了一些扩展通配符、限定符等，如递归匹配 <code>**/</code>，<code>ls **/*.go</code> 会列出所有的 Go 文件。<code>!{pattern}</code>，匹配不符合模式的内容。其他更多自行探索。</p><p>zsh 的可配置性更强，zsh 提供了比 bash 更多的选项和特性，我们都可通过配置文件调整。</p><p>如果你想深入学习 zsh，推荐 <a href=https://github.com/unixorn/awesome-zsh-plugins>awesome-zsh-plugins</a> 这个仓库。或者推荐看一个关于 zsh 的深度系列文章：</p><ul><li><a href=https://thevaluable.dev/zsh-install-configure-mouseless/>Configuring Zsh Without Dependencies</a></li><li><a href=https://thevaluable.dev/zsh-expansion-guide-example/>A Guide to Zsh Expansion with Examples</a></li><li><a href=https://thevaluable.dev/zsh-completion-guide-examples/>A Guide to the Zsh Completion with Examples</a></li><li><a href=https://thevaluable.dev/zsh-line-editor-configuration-mouseless/>A Guide to the Zsh Line Editor with Examples</a></li></ul><p>好吧，前导部分写的有点长。本文还是注重实践，比较的部分就先写这么多。</p><h2 id=安装>安装</h2><p>对于不同系统，zsh 的安装命令，如下所示：</p><p>Debian</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>apt install zsh
</span></span></code></pre></td></tr></table></div></div><p>Centos</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yum install -y zsh
</span></span></code></pre></td></tr></table></div></div><p>Arch Linux</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pacman -S zsh
</span></span></code></pre></td></tr></table></div></div><p>Fedora</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>dnf install zsh
</span></span></code></pre></td></tr></table></div></div><p>对于 macOS 系统的用户，MacOS 的默认 shell 从 2019 开始以前替换为 zsh，该步骤可省略。可阅读：<a href="https://linuxhandbook.com/why-zsh/#:~:text=Zsh%20is%20more%20powerful%20and,more%20advanced%20features%20shipped%20in.">What is Zsh? Should You Use it?</a> 其中有介绍为什么 2019 macOS 将默认的 shell 从 bash 切换到 zsh。</p><p>我看下来，主要原因就是版权问题啦。</p><p>如果你是个老古董，还是用 MacOS 2019 之前的系统，可通过如下命令安装：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew install zsh
</span></span></code></pre></td></tr></table></div></div><p>安装完成后，将 zsh 设置为默认 shell，命令如下所示：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chsh -s /bin/zsh
</span></span></code></pre></td></tr></table></div></div><p>通过如下命令检查下是否成功。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo $SHELL
</span></span><span style=display:flex><span>zsh
</span></span></code></pre></td></tr></table></div></div><h2 id=oh-my-zsh>oh-my-zsh</h2><p><a href=https://github.com/ohmyzsh/ohmyzsh>oh-my-zsh</a> 是用于管理 zsh 配置的轻量级框架，具有开箱即用的特点，而且它提供了大量内置插件。让我们用它快速配置 zsh 吧！</p><p>oh-my-zsh 这个名字起的很骚气的，大概就是下面这样表情。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-13.gif alt></p><p>想表达的可能是，当别人看你用 oh-my-zsh 配置的终端，大概率发出 &ldquo;wow! 你的终端太赞了！&rdquo;</p><p>OK，那下面让我们尝试让它赞起来吧。</p><h2 id=安装-1>安装</h2><p>首先，oh-my-zsh 的安装很简单。</p><p>安装命令，如下所示：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sh -c <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>安装后，就已经有一些默认效果，如命令行提示符的主题变化。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-01.png alt></p><p>这是默认的 oh-my-zsh 主题 &ldquo;robbyrussell&rdquo;。</p><h2 id=主题>主题</h2><p>oh-my-zsh 提供了许多内置主题，可查看 <a href=https://github.com/ohmyzsh/ohmyzsh/wiki/Themes>themes</a> 获取一系列的主题。</p><p>我们可直接通过 ~/.zshrc 配置更新主题配置，将内容修改如下：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ZSH_THEME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;agnoster&#34;</span><span style=color:#e6db74>`</span> <span style=color:#75715e># 默认为 robbyrussell</span>
</span></span></code></pre></td></tr></table></div></div><p>执行 <code>source ~/.zshrc</code> 生效配置，就能看到主题效果。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-02.png alt></p><p>另外，oh-my-zsh 还提供了 random 主题，它会在 oh-my-zsh 内置主题中随机选择一个主题展示。只需编辑 <code>~/.zshrc</code>，将 ZSH_THEME 更新为 random 即可。</p><p>配置如下所示：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ZSH_THEME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;random&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>演示效果，如下所示：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-03.gif alt></p><p>说实话，我觉得没人会这么用吧。这明显很鸡肋的功能啊。</p><h2 id=内置插件>内置插件</h2><p>重点来了，接下来我们一起来看看 zsh 的效率神器 - 插件能力吧。</p><p>我先给大家推荐 7 款常用的插件，其中 5 个是 oh-my-zsh 的内置插件。考虑内容不宜太长，下期会再推荐 6 个插件。</p><p>oh-my-zsh 提供的所有内置插件，都可以在仓库 <a href=https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins>ohmyzsh/ohmyzsh/plugins</a> 中找到，每个插件都有相应的介绍文档。</p><p>本教程将要介绍的 5 个 oh-my-zsh 内置插件，如下所示：</p><ul><li><a href=https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/git>git</a>，Git 插件，其实就是提供一些常用的 git 命令别名。</li><li><a href=https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/web-search>web-search</a>，命令行打开搜索引擎，已支持大部分搜索引擎；</li><li><a href=https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/jsontools>jsontools</a>，用于格式化 json 数据；</li><li><a href=https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/z>z</a>，基于历史访问目录的快速跳转；</li><li><a href=https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/vi-mode>vi-mode</a>，使用 vi 模式编辑命令行；</li></ul><p>启用所有插件，打开 <code>zshrc</code> 配置，把这些内置插件都打开，如下所示：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>plugins<span style=color:#f92672>=(</span>git web-search jsontools z vi-mode<span style=color:#f92672>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=插件-1---git>插件 1 - git</h3><p>Git 插件提供了 git 命令的大量别名，查看<a href=https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/git/>git 插件文档</a>。</p><p>如下一些常用命令的别名：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone     -&gt; gcl
</span></span><span style=display:flex><span>git status    -&gt; gst
</span></span><span style=display:flex><span>git commit    -&gt; gc
</span></span><span style=display:flex><span>git add       -&gt; ga
</span></span><span style=display:flex><span>git add --all -&gt; gaa
</span></span><span style=display:flex><span>git diff      -&gt; gd
</span></span><span style=display:flex><span>git push      -&gt; gp
</span></span><span style=display:flex><span>git pull      -&gt; gl
</span></span></code></pre></td></tr></table></div></div><p>更多命令的映射关键关系，可自行查看它的<a href=https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/git/>文档</a>。</p><p>这个插件不错，但有个缺点，这么多可用别名，我又记不住，岂不是成了摆设。如果想用好，我每次都用去查文档吗？不查文档行不行呢？</p><p>当然也是可以的，oh-my-zsh 中启用的一些其他插件可能也会有别名。</p><p>其实，有一个插件可帮忙我们解决这个问题，叫做 <code>you-should-use</code>，这是下期要介绍的一个插件。简单说下，它的作用是，当我们输入一个命令时，如果这个命令存在别名，它会提示我们要使用别名。</p><h3 id=插件-2---web-search>插件 2 - web-search</h3><p><a href=https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/web-search/>web-search</a> 提供了在终端直接搜索信息的能力。</p><p>当然，其实也不是完全在终端完成，它会自动跳转浏览器，转到指定的搜索引擎执行搜索请求。</p><p>效果大概就是下面这样：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-04.gif alt></p><p>常见的搜索引擎基本都是支持的，诸如 google, bing, baidu, 甚至是 github 等。</p><p>不过，我也得承认，其实这个插件一般我本人很少用，因为我已经安装了另外一个工具 alfred（替代 mac 默认的 spotlight），我都是通过它直接启动搜索。</p><h3 id=插件-3---jsontools>插件 3 - jsontools</h3><p>接下的这个插件，名为 <a href=https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/jsontools/>jsontools</a> ，即用于 json 的 tool。其实它只提供了一些操作 json 的基本命令，如下:</p><ul><li>pp_json 实现 json 字符串格式化；</li><li>is_json 判断是否是 json；</li></ul><p>我们直接看下演示效果吧，如下所示：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-05.gif alt></p><p>还是得说明，如果你没有更好的方案，安装了 oh-my-zsh，这是个不错的选择，因为你可能以前都没用过这类工具。</p><p>不过其实这个插件呢？我也很少用。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-14.gif alt></p><p>我习惯使用一款叫做 jq 的命令，如果你了解它，就知道它多强大。后面说到高效命令的时候，会介绍到它的。</p><h3 id=插件-4---z>插件 4 - z</h3><p><a href=https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/z>z 插件</a> 可用于快速的目录跳转，我觉得大部分人在使用 Linux 都被 cd 跳转目录跳转烦恼过。</p><p>z 就是这个烦恼的救星。</p><p>想查看更多信息可找 <a href=https://github.com/agkozak/zsh-z>z 原仓库 - zsh-z</a> 查看。oh-my-zsh 下的 z 文档说明中提到，它是从这个 zsh-z 的插件中拷贝而来的。</p><p>我们来介绍它的用法，简单来说，它是基于历史访问过的目录快速跳转。我们无需输入全路径，即可完成目录切换。</p><p>下面是一些实际案例。</p><p>首先，我直接输入 z，紧跟 tab 键，会看到如下的效果。它会直接将访问过的目录都列出来。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-06.gif alt></p><p>这些由 tab 产生的自动补全目录都是历史访问过的目录。因为，在没有输入任何内容的情况下，我们输入 tab 的，它列出最近访问过的目录。</p><p>如果我们输入形如 z substring，即提供子字符串，它们将所有匹配 substring 的目录都列举出来。</p><p>效果如下：</p><p>例如，我们输入 z blog，紧跟 tab 键，会直接列出访问过包含 blog 的目录。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-07.gif alt></p><p>如果输入内容只有一个关联的目录名，它会如图上一样直接补全。</p><p>演示效果：</p><p>我们输入 z tmux，因为匹配 tmux 的目录只有一个，将会被直接选中。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-08.gif alt></p><p>当然，其实这里匹配的目录名只有一个，直接输入 Enter 就可以进入目录，无需 tab 选择多次一举了。</p><p>演示效果：</p><p>我们输入 z tmux，直接 Enter 确认，即可进入到目录。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-09.gif alt></p><p>z 非常强大是吧？</p><p>其实，有一款更强大的命令，名为 zoxide，也提供了类似的能力，它的灵感是来源于 z。我一般用的是它，后面我会介绍。</p><p>当然，这不妨碍你继续使用 oh-my-zsh 内置的工具 z，毕竟它很容易配置。</p><h3 id=插件-5---vi-mode>插件 5 - vi-mode</h3><p><a href=https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/vi-mode>vi-mode 插件</a> 支持在命令行开启 vi 模式，利用 vi 键进行命令行编辑。这个插件，视个人情况，是否使用吧。如果你是一个 vi 忠实用户，可考虑开启。否则，还是简单最好，否则容易影响心情。</p><p>这个插件就不多介绍了，更多查看 <a href=https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/vi-mode>它的文档</a>。另外，如果确实对 vim 感兴趣，也可以考虑另外一个 vi 插件，名为 <a href=https://github.com/jeffreytse/zsh-vi-mode>zsh-vi-mode</a>，它的能力更强大，也解决这个默认 vi 插件的一些不好用的 bug，不过它的配置有点复杂。</p><h2 id=三方插件>三方插件</h2><p>我们再来了解 2 个非 oh-my-zsh 内置插件，即 zsh-syntax-highlighting 和 zsh-autosuggestions。这两个插件由 zsh 社区开发。</p><p>开始介绍前，先将这两个插件全部安装配置完成。</p><h3 id=下载>下载</h3><p>下载命令如下所示：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>git clone https://github.com/zsh-users/zsh-autosuggestions <span style=color:#e6db74>${</span>ZSH_CUSTOM<span style=color:#66d9ef>:-</span>$HOME/.oh-my-zsh/custom<span style=color:#e6db74>}</span>/plugins/zsh-autosuggestions
</span></span><span style=display:flex><span>git clone https://github.com/zsh-users/zsh-syntax-highlighting <span style=color:#e6db74>${</span>ZSH_CUSTOM<span style=color:#66d9ef>:-</span>~/.oh-my-zsh/custom<span style=color:#e6db74>}</span>/plugins/zsh-syntax-highlighting
</span></span></code></pre></td></tr></table></div></div><h3 id=配置>配置</h3><p>打开 <code>.zshrc</code> 完成配置：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>plugins<span style=color:#f92672>=(</span>git web-search jsontools z vi-mode zsh-syntax-highlighting zsh-autosuggestions<span style=color:#f92672>)</span>
</span></span></code></pre></td></tr></table></div></div><p>记得执行 <code>source ~/.zshrc</code> 生效配置。</p><h3 id=插件-6---zsh-syntax-highlighting>插件 6 - zsh-syntax-highlighting</h3><p>zsh-syntax-highlighting 是 zsh 的语法高亮插件，如果输入的命令不存在，或者输入 shell 语法不正确，将会自动以红色表示。它的优点就是，当我们在终端输入，实时输入实时反馈。</p><p>首先，我们尝试下错误命令，提示效果，如下所示：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-10.gif alt></p><p>再来看看，正确命令提示效果，如下所示：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-11.gif alt></p><p>对，就是这么简单。通过这个插件提供的实时反馈，可以防止我们在命令执行后，才知道输入错了。</p><h3 id=插件-7---zsh-autosuggestions>插件 7 - zsh-autosuggestions</h3><p>zsh-autosuggestions 可以说是我最喜欢的插件了。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-16.gif alt></p><p>它的作用是什么呢？</p><p>它可用于提示补全建议，当输入字符，默认情况下，它基于我们的历史命令自动提供输入建议。还记得前面提到的，zsh 的历史命令是在不同的会话间共享。现在，再结合 zsh-autosuggestions 插件，简直不要太爽。哈哈。</p><p>我们先看下效果，如下所示：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-12.gif alt></p><p>默认情况下，输入右方向键 → 可将建议直接输入终端。</p><p>但这个其实体验很差，对于一个双手不想离开键盘中心区域的人而言，通过右键接受提示建议，这简直不能忍啊。是否能改变这个默认快捷键呢？</p><p>我的目标是希望通过输入 <code>Ctrl + /</code> 接受建议，配置实现，如下所示：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span># &lt;Ctrl+/&gt; 接受 auto-suggestion 的补全建议
</span></span><span style=display:flex><span>bindkey &#39;^_&#39; autosuggest-accept
</span></span></code></pre></td></tr></table></div></div><p>对！不要怀疑，CTRL+/ 的的字符表示就是 &lsquo;^_&rsquo;，我们可以通过执行 cat 命令查看，输入 CTRL+/，会到看如下输出。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-15-v1.gif alt></p><p>如果你不知道想要设置的快捷键的字符表示，可以通过这种方式找到。</p><p>另外，如果希望 zsh-autosuggestion 不仅支持 history，也支持自动补全的建议提示，即原来那些要输入 tab 才能出现的内容，如子命令、命令选项、目录文件等提示，也能在提示建议的范围中。我们只需增加 completeion 这个配置项。</p><p>如下所示：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>export ZSH_AUTOSUGGEST_STRATEGY<span style=color:#f92672>=(</span>history completion<span style=color:#f92672>)</span>
</span></span></code></pre></td></tr></table></div></div><p>现在，如果输入时，还没有历史命令可作为建议，会提供类似于目录、参数选项等建议。</p><p>类似于如下的效果：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-16-zsh-themes-and-plugin-22.gif alt></p><p>这是一篇含 GIF 量很高的文章啊。</p><h2 id=总结>总结</h2><p>本文想要介绍的内容已完成。我们从 zsh 与 bash 对比，了解到 zsh 的强大。接着开始实操，从安装 zsh，oh-my-zsh、主题配置，到介绍 5 个内置插件，2 个三方插件。</p><p>最后，希望本文能对你的终端操作效率提到一点点帮助，我就心满意足了。</p><p>我的博文：<a href=https://www.poloxue.com/posts/2023-10-16-zsh-themes-and-plugins/>我的终端环境：zsh、oh-my-zsh，提示主题和 7 个效率插件</a></p><div>本文来源于 <a href=https://www.poloxue.com>POLOXUE's BLOG</a>，地址： <a href=https://www.poloxue.com/posts/2023-10-16-zsh-themes-and-plugins/>终端环境：zsh 、oh-my-zsh、提示主题与 7 效率插件</a></div></div><nav class="hide-on-mobile section-nav"><nav id=TableOfContents><ol><li><a href=#为什么使用-zsh>为什么使用 zsh？</a><ol><li><a href=#改进的自动补全能力>改进的自动补全能力</a></li><li><a href=#更好的脚本和插件支持>更好的脚本和插件支持</a></li><li><a href=#高级的主题和提示符定制>高级的主题和提示符定制</a></li><li><a href=#更智能的命令行交互>更智能的命令行交互</a></li><li><a href=#其他>其他</a></li></ol></li><li><a href=#安装>安装</a></li><li><a href=#oh-my-zsh>oh-my-zsh</a></li><li><a href=#安装-1>安装</a></li><li><a href=#主题>主题</a></li><li><a href=#内置插件>内置插件</a><ol><li><a href=#插件-1---git>插件 1 - git</a></li><li><a href=#插件-2---web-search>插件 2 - web-search</a></li><li><a href=#插件-3---jsontools>插件 3 - jsontools</a></li><li><a href=#插件-4---z>插件 4 - z</a></li><li><a href=#插件-5---vi-mode>插件 5 - vi-mode</a></li></ol></li><li><a href=#三方插件>三方插件</a><ol><li><a href=#下载>下载</a></li><li><a href=#配置>配置</a></li><li><a href=#插件-6---zsh-syntax-highlighting>插件 6 - zsh-syntax-highlighting</a></li><li><a href=#插件-7---zsh-autosuggestions>插件 7 - zsh-autosuggestions</a></li></ol></li><li><a href=#总结>总结</a></li></ol></nav></nav></div><div class=post><hr class=footer-separator><div class=tags><ul class=flat><li class=tag-li><a href=/tags/zsh>zsh</a></li></ul></div><div class=back><a href=https://www.poloxue.com/><span aria-hidden=true>← Back</span></a></div><div class=back></div></div><div class=post><img style=width:85% src=https://cdn.jsdelivr.net/gh/poloxue/images@main/wechat.png><div class=utterances></div><script src=https://utteranc.es/client.js repo=poloxue/blog issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div><div class="footer wrapper"><nav class=nav><div>2023 Polo Xue All rights reserved</div></nav></div><script>feather.replace()</script><script>var enableTruncate=!0,filterDepth=!1;const MAX_DEPTH=9;window.addEventListener("DOMContentLoaded",()=>{const e=new IntersectionObserver(e=>{e.reverse().forEach(e=>{const n=e.target.getAttribute("id");if(e.intersectionRatio>0){var t=document.querySelectorAll(`nav li a[href="#${n}"]`);t!=null&&t.forEach(e=>{if(e!=null){var t=getDepth(e.parentElement);filterDepth&&t<=MAX_DEPTH&&(clearActiveStatesInTableOfContents(),e.parentElement.classList.add("active"))}else filterDepth||(clearActiveStatesInTableOfContents(),e.parentElement.classList.add("active"))})}})});document.querySelectorAll("h1[id],h2[id],h3[id],h4[id]").forEach(t=>{e.observe(t)})});function isVisible(e){if(!(e instanceof Element))return!1;const n=getComputedStyle(e);if(n.display==="none")return!1;if(n.visibility!=="visible")return!1;if(n.opacity<.1)return!1;if(e.offsetWidth+e.offsetHeight+e.getBoundingClientRect().height+e.getBoundingClientRect().width===0)return!1;const t={x:e.getBoundingClientRect().left+e.offsetWidth/2,y:e.getBoundingClientRect().top+e.offsetHeight/2};if(t.x<0)return!1;if(t.x>(document.documentElement.clientWidth||window.innerWidth))return!1;if(t.y<0)return!1;if(t.y>(document.documentElement.clientHeight||window.innerHeight))return!1;let s=document.elementFromPoint(t.x,t.y);do if(s===e)return!0;while(s=s.parentNode)return!1}function clearActiveStatesInTableOfContents(){document.querySelectorAll("nav li").forEach(e=>{e.classList.remove("active")})}function getDepth(e){for(var t=0;e!==null&&e.tagName.toLowerCase()!=="ul";)t++,e=e.parentElement;return t}function navItems(){var e=document.querySelectorAll("nav nav li a");return Array.from(e).filter(e=>e.href!=null&&e.hash.startsWith("#"))}function lasItemInNavBarVisible(){var e=navItems().slice(-1)[0];return isVisible(e)}document.addEventListener("DOMContentLoaded",function(){if(!enableTruncate)return;var e=navItems();console.log(e),lasItemInNavBarVisible()||(filterDepth=!0,e.forEach(function(e){var t=getDepth(e.parentElement);t>MAX_DEPTH&&e.parentElement.classList.add("depth-nested")}))})</script></body></html>
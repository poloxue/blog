<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>如何评价交易策略的表现？ - POLOXUE's BLOG</title><meta name=viewport content="width=device-width,initial-scale=1"><meta itemprop=name content="如何评价交易策略的表现？"><meta itemprop=description content="在设计一个量化策略时，常会面临这样的疑问：我的策略好不好？怎么判断它是否真正有效？"><meta itemprop=datePublished content="2025-02-11T15:17:49+08:00"><meta itemprop=dateModified content="2025-02-11T15:17:49+08:00"><meta itemprop=wordCount content="301"><meta itemprop=keywords content><meta property="og:title" content="如何评价交易策略的表现？"><meta property="og:description" content="在设计一个量化策略时，常会面临这样的疑问：我的策略好不好？怎么判断它是否真正有效？"><meta property="og:type" content="article"><meta property="og:url" content="https://www.poloxue.com/posts/2025-02-11-evaluate-a-trading-strategy-performance/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-11T15:17:49+08:00"><meta property="article:modified_time" content="2025-02-11T15:17:49+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="如何评价交易策略的表现？"><meta name=twitter:description content="在设计一个量化策略时，常会面临这样的疑问：我的策略好不好？怎么判断它是否真正有效？"><script data-goatcounter=https://poloxue.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/main.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/extra.css><link id=dark-scheme rel=stylesheet type=text/css href=https://www.poloxue.com/css/dark.css><script src=https://www.poloxue.com/js/feather.min.js></script>
<script src=https://www.poloxue.com/js/main.js></script>
<script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script>
<script>MathJax={tex:{displayMath:[["[","]"],["$$","$$"]],inlineMath:[["(",")"],["$","$"]]}}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7019080091542951" crossorigin=anonymous></script></head><body><div class="container wrapper"><div class=header><div class=avatar><a href=https://www.poloxue.com/><img src=/avatar.png alt="POLOXUE's BLOG"></a></div><h1 class=site-title><a href=https://www.poloxue.com/>POLOXUE's BLOG</a></h1><div class=site-description><nav class="nav social"><ul class=flat><li><a href=https://github.com/poloxue/ title=Github><i data-feather=github></i></a></li><li><a href=/posts/index.xml title=RSS><i data-feather=rss></i></a></li><li><a href=/ title=Wechat><i data-feather=message-circle></i></a></li><span class=scheme-toggle><a href=# id=scheme-toggle></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>文章列表</a></li><li><a href=/tags>分类标签</a></li><li><a href=/about/about>关于我</a></li></ul></nav></div><div class=post><div class=post-header><div class=meta><div class=date><span class=day>11</span>
<span class=rest>Feb 2025</span></div></div><div class=matter><h1 class=title>如何评价交易策略的表现？</h1></div></div><p>在设计一个量化策略时，常会面临这样的疑问：我的策略好不好？怎么判断它是否真正有效？</p><p>本文将尝试从这个角度触发，思考如何判断一个策略的好坏。</p><h2 id=概要引言>概要引言</h2><p>前面写了几篇博文，介绍如何用 backtesting.py 开发策略，当一个策略回测完成后会得到如下的信息。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Start                   2004-08-19 00:00:00  <span style=color:#75715e># 回测开始时间</span>
</span></span><span style=display:flex><span>End                     2013-03-01 00:00:00  <span style=color:#75715e># 回测结束时间</span>
</span></span><span style=display:flex><span>Duration                 <span style=color:#ae81ff>3116</span> days 00:00:00  <span style=color:#75715e># 回测总时长</span>
</span></span><span style=display:flex><span>Exposure Time <span style=color:#f92672>[</span>%<span style=color:#f92672>]</span>                 61.545624  <span style=color:#75715e># 持仓暴露时间百分比（处于市场中的时间比率）</span>
</span></span><span style=display:flex><span>Equity Final <span style=color:#f92672>[</span>$<span style=color:#f92672>]</span>                 99485.0574  <span style=color:#75715e># 回测结束时的账户净值</span>
</span></span><span style=display:flex><span>Equity Peak <span style=color:#f92672>[</span>$<span style=color:#f92672>]</span>                 100607.2574  <span style=color:#75715e># 回测期间账户达到的最高净值</span>
</span></span><span style=display:flex><span>Return <span style=color:#f92672>[</span>%<span style=color:#f92672>]</span>                       894.850574  <span style=color:#75715e># 总收益率（百分比）</span>
</span></span><span style=display:flex><span>Buy &amp; Hold Return <span style=color:#f92672>[</span>%<span style=color:#f92672>]</span>            703.458242  <span style=color:#75715e># 买入并持有策略的收益率（百分比），用于对比</span>
</span></span><span style=display:flex><span>Return <span style=color:#f92672>(</span>Ann.<span style=color:#f92672>)</span> <span style=color:#f92672>[</span>%<span style=color:#f92672>]</span>                 30.934891  <span style=color:#75715e># 年化收益率（百分比）</span>
</span></span><span style=display:flex><span>Volatility <span style=color:#f92672>(</span>Ann.<span style=color:#f92672>)</span> <span style=color:#f92672>[</span>%<span style=color:#f92672>]</span>             32.215003  <span style=color:#75715e># 年化波动率（百分比），衡量收益波动性</span>
</span></span><span style=display:flex><span>Sharpe Ratio                       0.960263  <span style=color:#75715e># 夏普比率（风险调整收益率）</span>
</span></span><span style=display:flex><span>Sortino Ratio                      2.125336  <span style=color:#75715e># 索提诺比率（只考虑下行风险的风险调整收益率）</span>
</span></span><span style=display:flex><span>Calmar Ratio                       1.497421  <span style=color:#75715e># 卡玛比率（年化收益率与最大回撤的比值）</span>
</span></span><span style=display:flex><span>Max. Drawdown <span style=color:#f92672>[</span>%<span style=color:#f92672>]</span>                -20.658779  <span style=color:#75715e># 最大回撤（百分比），历史上账户净值的最大跌幅</span>
</span></span><span style=display:flex><span>Avg. Drawdown <span style=color:#f92672>[</span>%<span style=color:#f92672>]</span>                 -3.678412  <span style=color:#75715e># 平均回撤（百分比），所有回撤期间的平均亏损</span>
</span></span><span style=display:flex><span>Max. Drawdown Duration    <span style=color:#ae81ff>584</span> days 00:00:00  <span style=color:#75715e># 最大回撤持续时间（最长亏损期）</span>
</span></span><span style=display:flex><span>Avg. Drawdown Duration     <span style=color:#ae81ff>38</span> days 00:00:00  <span style=color:#75715e># 平均回撤持续时间</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Trades                                 48  # 总交易次数</span>
</span></span><span style=display:flex><span>Win Rate <span style=color:#f92672>[</span>%<span style=color:#f92672>]</span>                      64.583333  <span style=color:#75715e># 胜率（百分比），盈利交易的比率</span>
</span></span><span style=display:flex><span>Best Trade <span style=color:#f92672>[</span>%<span style=color:#f92672>]</span>                     57.11931  <span style=color:#75715e># 最佳交易收益率（百分比）</span>
</span></span><span style=display:flex><span>Worst Trade <span style=color:#f92672>[</span>%<span style=color:#f92672>]</span>                  -12.446769  <span style=color:#75715e># 最差交易收益率（百分比）</span>
</span></span><span style=display:flex><span>Avg. Trade <span style=color:#f92672>[</span>%<span style=color:#f92672>]</span>                     4.923007  <span style=color:#75715e># 平均每笔交易的收益率（百分比）</span>
</span></span><span style=display:flex><span>Max. Trade Duration       <span style=color:#ae81ff>121</span> days 00:00:00  <span style=color:#75715e># 最长单笔交易持续时间</span>
</span></span><span style=display:flex><span>Avg. Trade Duration        <span style=color:#ae81ff>39</span> days 00:00:00  <span style=color:#75715e># 平均单笔交易持续时间</span>
</span></span><span style=display:flex><span>Profit Factor                      4.729158  <span style=color:#75715e># 盈亏比（盈利总额与亏损总额的比值）</span>
</span></span><span style=display:flex><span>Expectancy <span style=color:#f92672>[</span>%<span style=color:#f92672>]</span>                      5.66852  <span style=color:#75715e># 期望收益率（百分比），长期平均每笔交易收益</span>
</span></span><span style=display:flex><span>SQN                                2.643361  <span style=color:#75715e># 系统质量数（衡量交易系统稳定性的指标）</span>
</span></span></code></pre></td></tr></table></div></div><p>上面有很多指标，具体都是什么含义呢？</p><p>评价一个策略要包含多个角度，不同的角度有对应指标衡量策略相应的表现。</p><p>如果你比较在意收益，就得关注那些能直观反映盈利情况的指标，比如总收益率、年化收益率等。</p><p>如果你更担心风险，那就得看看可能的最大亏损，比如最大回撤，了解在最糟糕情况下你的资金可能承受多少损失。</p><p>一个策略的好坏往往不仅仅取决于收益或风险单一方面，还可以将两者同时考虑进来。</p><p>除了收益与风险，其他维度，如交易频率，交易太频繁可能会增加成本和操作难度，而交易频率过低又可能错失良机。</p><p>对于短线交易，胜率和盈亏比也是一个不可忽略的因素</p><h2 id=盈利能力>盈利能力</h2><p>衡量策略盈利能力最直接的方式就是查看 <strong>总收益率</strong>。但仅仅看总收益可能并不全面，你还需要考虑到收益的<strong>稳定性</strong>。</p><p><strong>年化收益率</strong>：年化收益率能帮助你更好地评估长期的盈利能力，它不仅考虑了总收益，还考虑了时间因素。如果年化收益率过低，意味着策略的盈利潜力有限。</p><p>上面策略的总收益为 894.85%。从数据来看，单纯的回报看起来非常好。但年化收益率（<strong>Return (Ann.) [%]</strong>）为30.93%，这表示你每年平均获得30.93%的收益，这样的年化收益在市场中算是相当不错的。</p><h2 id=风险评估>风险评估</h2><p>交易策略不仅要追求盈利，更重要的有效控制风险。我经常听到一句话，成功的交易一定能很好的管理风险的。<strong>最大回撤</strong>和<strong>波动率</strong> 就是两个量化策略风险的指标。</p><p><strong>最大回撤</strong>：最大回撤是指策略在某一周期内，账户从最高点到最低点的最大亏损幅度。</p><p><strong>波动率</strong>：波动率用于衡量收益的波动程度。如果波动率过大，意味着策略在盈利的同时可能也会伴随较大的亏损风险。</p><p>在上面的回测报告中，策略的最大回撤为 <strong>-20.66%</strong>。这意味着，尽管策略有不错的回报，但在某些市场情况下，策略的资金也曾经历过接近21%的亏损。年化波动率为 <strong>32.22%</strong>，表明该策略在年度内的波动幅度较大，但考虑到它有着 <strong>30.93%</strong> 的年化收益率，也不算太差。</p><h2 id=风险与收益>风险与收益</h2><p>单纯的盈利数据可能掩盖了潜在的风险，因此，评估策略时需要加入<strong>风险调整后的收益</strong>指标，如<strong>夏普比率</strong>和<strong>索提诺比率</strong>。</p><p><strong>夏普比率</strong>（Sharpe Ratio）：夏普比率用来衡量单位风险带来的超额收益，公式为：
$$
\text{Sharpe Ratio} = \frac{\text{Annualized Return} - \text{Risk-Free Rate}}{\text{Annualized Volatility}}
$$</p><p>在这个回测中，夏普比率为0.96，虽然不算很高，但也说明策略在风险控制上做得较为稳定。</p><p><strong>索提诺比率</strong>（Sortino Ratio）：与夏普比率类似，但索提诺比率只关注下行风险，这适合那些特别注重防止亏损的交易者。毕竟，对交易而言，下行风险才是风险。</p><p>其公式为：
$$
\text{Sortino Ratio} = \frac{\text{Annualized Return} - \text{Risk-Free Rate}}{\text{Downside Deviation}}
$$</p><p>回测报告中，索提诺比率为2.13，表示策略在承担下行风险时，能获得相对较高的收益。</p><h2 id=胜率和盈亏比>胜率和盈亏比</h2><p>如果你是做短线交易，<strong>胜率</strong>和<strong>盈亏比</strong>是非常重要的指标。</p><p><strong>胜率</strong>：胜率是你在所有交易中获胜的比率。</p><p><strong>盈亏比</strong>（Profit Factor）：是你每次盈利的金额与亏损的金额之比。</p><p>在这个回测案例中，策略的胜率为<strong>64.58%</strong>，表明超过一半的交易是成功的，表现不错。然而，胜率的高低不能单独作为好坏的标准，还需要结合盈亏比来评估。<strong>盈亏比</strong> 为4.73，说明每赚 4.73 美元，亏损大约是 1 美元，表现非常良好。盈亏比高说明策略的风险回报比良好，即便胜率不算非常高，仍然可以盈利。</p><h2 id=交易频率>交易频率</h2><p>交易频率反映了你策略的活跃度，不同的市场环境可能需要不同的操作节奏。你可以根据策略的性质来判断交易频率是否合适。</p><p><strong>高频交易策略</strong>：如果你的策略是基于短期波动的快速决策，那么频繁的交易可能是必需的。但这种策略对市场的流动性要求较高，风险也较大。</p><p><strong>低频交易策略</strong>：比如趋势跟随或者长期持仓策略，它们通常更加稳定，但可能错过一些短期的机会。</p><p>我测试的这个策略是趋势最总策略，3000 多天的 <strong>交易总次数</strong> 为 48 次，频率不高，说明这是一个相对低频的交易策略。</p><h2 id=综合评价指标>综合评价指标</h2><p>前面讲了评价策略的各个维度的指标，是否还记得之前的 backtesting.py 优化入门那篇文章，里面还有一个评价指标，SQN。</p><p>SQN 是衡量交易策略稳健性的一个综合指标，其计算公式为：</p><p>$$
SQN = (平均每笔交易收益 × √交易次数) / 每笔交易收益的标准差
$$</p><p>一句话解释它的含义：SQN 通过结合平均收益（越高越好）、收益波动性（越低越好）以及交易次数（越多越好），来衡量策略的稳健性和质量，值越高代表策略表现越优。从指标的公式可以看出，这个指标即考虑收益还考虑风险，同时包括交易的次数。</p><p>如上的回测报告中的 SQN 值为 2.643361，说明策略在收益、风险和交易频率这几个维度上已经取得了较好的平衡。</p><h2 id=回测与实盘>回测与实盘</h2><p>在补充几句关于回测与实盘的看法。</p><p>回测能提供一个策略框架，但真正的考验是策略在实盘中的表现。可能回测结果好，但实际操作中却无法复刻那样的效果。</p><p><strong>回测的好处</strong>：通过历史数据的回测，你可以初步了解策略的优缺点、潜在的收益和风险。</p><p><strong>实盘的挑战</strong>：真实的市场中，你可能会面临滑点、手续费、情绪等额外的因素，这些都可能影响策略的表现。</p><p>回测结果只是一个参考，但并不是说它不重要，如果连回测都无法做到好的表现，实盘表现出色的概率基本为无。</p><hr><h3 id=总结>总结</h3><p>评价交易策略的表现并不复杂，只需要从盈利能力、风险管理、胜率和盈亏比等几个核心指标入手。在实际操作中，可能还要适时调整策略的交易频率、控制风险，。</p><p>希望本文能让你更清晰地评价自己的交易策略，帮助自己做出更好的决策，避免过度看中收益，而忽略其他评价维度。</p><div>本文来源于 <a href=https://www.poloxue.com>POLOXUE's BLOG</a>，地址： <a href=https://www.poloxue.com/posts/2025-02-11-evaluate-a-trading-strategy-performance/>如何评价交易策略的表现？</a><hr class=footer-separator><div class=tags></div><div class=back><a href=https://www.poloxue.com/><span aria-hidden=true>← Back</span></a></div><div class=back></div></div><div class=post>欢迎关注我的公众号：<img style=width:85% src=https://cdn.jsdelivr.net/gh/poloxue/images@main/wechat.png><div class=utterances></div><script src=https://utteranc.es/client.js repo=poloxue/blog issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div><div class="footer wrapper"><nav class=nav><div>2025 Polo Xue All rights reserved</div></nav></div><script>feather.replace()</script></body></html>
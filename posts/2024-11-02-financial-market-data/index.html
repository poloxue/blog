<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>通过 python 获取金融数据-akshare - POLOXUE's BLOG</title><meta name=viewport content="width=device-width,initial-scale=1"><meta itemprop=name content="通过 python 获取金融数据-akshare"><meta itemprop=description content="本文将介绍如何获取金融数据，我将基于 Python 开源数据包实现免费数据的下载。"><meta itemprop=datePublished content="2024-11-01T16:36:56+08:00"><meta itemprop=dateModified content="2024-11-01T16:36:56+08:00"><meta itemprop=wordCount content="637"><meta itemprop=keywords content><meta property="og:title" content="通过 python 获取金融数据-akshare"><meta property="og:description" content="本文将介绍如何获取金融数据，我将基于 Python 开源数据包实现免费数据的下载。"><meta property="og:type" content="article"><meta property="og:url" content="https://www.poloxue.com/posts/2024-11-02-financial-market-data/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-01T16:36:56+08:00"><meta property="article:modified_time" content="2024-11-01T16:36:56+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="通过 python 获取金融数据-akshare"><meta name=twitter:description content="本文将介绍如何获取金融数据，我将基于 Python 开源数据包实现免费数据的下载。"><script data-goatcounter=https://poloxue.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/main.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/extra.css><link id=dark-scheme rel=stylesheet type=text/css href=https://www.poloxue.com/css/dark.css><script src=https://www.poloxue.com/js/feather.min.js></script>
<script src=https://www.poloxue.com/js/main.js></script>
<script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script>
<script>MathJax={tex:{displayMath:[["[","]"],["$$","$$"]],inlineMath:[["(",")"],["$","$"]]}}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7019080091542951" crossorigin=anonymous></script></head><body><div class="container-wide wrapper"><div class=header><div class=avatar><a href=https://www.poloxue.com/><img src=/avatar.png alt="POLOXUE's BLOG"></a></div><h1 class=site-title><a href=https://www.poloxue.com/>POLOXUE's BLOG</a></h1><div class=site-description><nav class="nav social"><ul class=flat><li><a href=https://github.com/poloxue/ title=Github><i data-feather=github></i></a></li><li><a href=/posts/index.xml title=RSS><i data-feather=rss></i></a></li><li><a href=/ title=Wechat><i data-feather=message-circle></i></a></li><span class=scheme-toggle><a href=# id=scheme-toggle></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>文章列表</a></li><li><a href=/tags>分类标签</a></li><li><a href=/about/about>关于我</a></li></ul></nav></div><div class=article-nav id=article-nav-id><div class=post><div class=post-header><div class=meta><div class=date><span class=day>01</span>
<span class=rest>Nov 2024</span></div></div><div class=matter><h1 class=title>通过 python 获取金融数据-akshare</h1></div></div><aside class="show-on-mobile toc" id=static-toc><header><h3>Contents</h3></header><nav id=TableOfContents><ol><li><a href=#常见分类>常见分类</a></li><li><a href=#选择数据源>选择数据源</a></li><li><a href=#数据下载>数据下载</a></li><li><a href=#市场价格>市场价格</a></li><li><a href=#财务数据>财务数据</a></li><li><a href=#宏观数据>宏观数据</a></li><li><a href=#总结>总结</a></li></ol></nav></aside><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2024-11/2024-11-02-financial-market-data-00.webp alt></p><p>研究交易策略时，高质量数据是分析和构建交易策略的根本。你可能会遇到如下的一些问题。</p><ul><li>数据从哪找？</li><li>数据怎么清理？</li><li>数据又该如何维护？</li></ul><p>本文将先开始介绍第一个主题，即 &ldquo;数据从哪里找？"，我将首先基于 Python 开源数据包 akshare 下载数据，为什么选择作为第一个数据源？因为它是完全免费的。</p><h2 id=常见分类>常见分类</h2><p>在研究和构建策略时，基于目标不同，对数据的要求也不同。不同的数据适合不同的策略。找到合适的数据集，能显著提升策略。</p><p>市场价格数据，即开高低收和交易量数据，如果构建 CTA 策略，价格数据已经足够了；</p><p>公司财务数据，财务三大报表，如资产负债表、损益表，可助我们评估股票的长期投资价值，作为选股因子等；</p><p>宏观经济数据，比如 GDP、通胀率、就业情况或是针对不同行业的数据等，有助于评估整体经济、观周期或某个行业的前景等；</p><p>其他另类数据，也开始逐渐被重视，如像新闻、社交媒体信息等文本信息，重要人物的社交账号等，有助于我们及时抓住短期的波动；</p><p>这篇文章主要演示如上的这些数据的下载方法。</p><p>还想细化分类的话，不同角度还可以有不同分类，如：</p><p>从品种上，有股票、期货、期权、外汇、债券和基金的不同品种上的区别，如股票有财报数据，而期货可能更加关注供需分析；非场内基金的价格数据就没有了开高低收；期权还包含独特的衍生数据，即它的隐含波动率和各类希腊字母；如果你关注数字货币市场，还要关注一些链上的活动，如跟踪巨鲸的账户，识别链上地址的活跃度，大额转账。</p><p>从频率上，有小时线日线周线月线，还有高频数据，如分钟级、秒级甚至 tick 分笔的数据。对于如趋势追踪等 CTA 策略只要日线小时线级别即可，高频交易则要分析分钟或订单薄的分笔数据，这类高频数据的数据量会非常大，开源数据不会提供，购买的费用也相对贵一些。</p><p>注：我在淘宝上发现有卖高频数据，价格一般几百块，因为数据量巨大，还送硬盘，不过我没有买，也不知道真假。</p><p>数据的种类繁多，上面是一些常规分类。不同的交易策略，对数据的要求还是有很大区别，如你分析的是一些特殊事件对行业的影响，如美联储主席讲话对行情的实时影响，可能需要从视频提取字幕与行情相映射，还有如新冠疫情的影响，要收集每日的疫情数据，分析它和行情的关系。</p><h2 id=选择数据源>选择数据源</h2><p>对于数据源方面，我选择开源数据，如 akshare、tushare 和 yfinance。</p><p>akshare 是一个金融数据的 Python 包，数据种类繁多，主要是通过爬虫实时抓取网上的公开数据，提供国内股票、期货、外汇、宏观经济等多领域的金融数据接口，可以说，它的数据非常庞杂。</p><p>tushare，和 akshare 一样，是专注于国内市场，虽然它有积分要求，但积分的获取难度不高，如果是购买积分，500/年就能使用 90% 的数据。它的数据是单独维护管理的，毫无疑问，数据质量很高的，在性价比这块，没有其他数据源可比。</p><p>yfinance 是一个用于从 Yahoo Finance 获取金融数据的 Python 库。主要是国外市场，可下载如股票、期货、外汇等资产的历史市场数据，包括价格、交易量、公司财务数据等。</p><p>如果你已经有可用的 Python 环境，安装过程就非常简单，如下命令安装这三个 Python 包：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install akshare
</span></span><span style=display:flex><span>pip install tushare
</span></span><span style=display:flex><span>pip install yfinance
</span></span></code></pre></td></tr></table></div></div><p>如果没有 Python 环境，可以去了解下 anaconda，用它安装我们的 Python 环境。</p><h2 id=数据下载>数据下载</h2><p>本文目标是先通过 akshare 实现 Python 下载 A 股的数据，毕竟它是完全免费的，门槛最低。我会通过代码快速一览 akshare 获取这些数据的函数。而对于 tushare 和 yfinance，准备另外的篇章介绍。</p><p>还有，文中也不会提供数据样例，毕竟是太占用空间了。</p><p>先提前导入 Python 包：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> akshare <span style=color:#66d9ef>as</span> aks
</span></span></code></pre></td></tr></table></div></div><h2 id=市场价格>市场价格</h2><p><strong>A 股股票</strong>：包括它的历史行情、实时行情和分笔数据的获取。</p><p>历史行情的接口示例：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 日线/周线/月线</span>
</span></span><span style=display:flex><span>aks<span style=color:#f92672>.</span>stock_zh_a_hist(symbol<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;000001&#34;</span>, 
</span></span><span style=display:flex><span>                   start_date<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;20200101&#34;</span>,
</span></span><span style=display:flex><span>                   end_date<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;20241201&#34;</span>,
</span></span><span style=display:flex><span>                   period<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;daily&#34;</span>, <span style=color:#75715e># daily/weekly/monthly</span>
</span></span><span style=display:flex><span>                   adjust<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;qfq&#34;</span>) <span style=color:#75715e># qfq-前复权/hfq-后复权/默认不复权</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 日线</span>
</span></span><span style=display:flex><span>aks<span style=color:#f92672>.</span>stock_zh_a_daily(symbol<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sz000001&#34;</span>,
</span></span><span style=display:flex><span>                    start_date<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;20200101&#34;</span>,
</span></span><span style=display:flex><span>                    end_date<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;20241201&#34;</span>,
</span></span><span style=display:flex><span>                    adjust<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;qfq&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#75715e># 分钟线</span>
</span></span><span style=display:flex><span>aks<span style=color:#f92672>.</span>stock_zh_a_minute(symbol<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sz000001&#34;</span>,
</span></span><span style=display:flex><span>                     period<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1&#34;</span>, <span style=color:#75715e># 1-1分钟/5-5分钟/15-15分钟/30-30分钟/60-1小时</span>
</span></span><span style=display:flex><span>                     adjust<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;qfq&#34;</span>)
</span></span></code></pre></td></tr></table></div></div><p>如上的代码演示了获取 A 股市场日线/周线/月线/小时/分钟级别的历史行情数据的函数。</p><p>日线数据示例：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   日期        股票代码 开盘     收盘 最高  最低   成交量   成交额      振幅  涨跌幅  涨跌额 换手率
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>  2020-01-02  <span style=color:#ae81ff>000001</span>  14.77  14.99  15.07  14.67  <span style=color:#ae81ff>1530232</span>  2.571196e+09  2.75  2.88  0.42  0.79
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>  2020-01-03  <span style=color:#ae81ff>000001</span>  15.06  15.30  15.43  15.04  <span style=color:#ae81ff>1116195</span>  1.914495e+09  2.60  2.07  0.31  0.58
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>  2020-01-06  <span style=color:#ae81ff>000001</span>  15.13  15.19  15.46  15.03   <span style=color:#ae81ff>862084</span>  1.477930e+09  2.81 -0.72 -0.11  0.44
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>  2020-01-07  <span style=color:#ae81ff>000001</span>  15.25  15.27  15.40  15.07   <span style=color:#ae81ff>728608</span>  1.247047e+09  2.17  0.53  0.08  0.38
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>  2020-01-08  <span style=color:#ae81ff>000001</span>  15.12  14.78  15.17  14.75   <span style=color:#ae81ff>847824</span>  1.423609e+09  2.75 -3.21 -0.49  0.44
</span></span></code></pre></td></tr></table></div></div><p>因为 akshare 的数据是从直接财经网站拉取的，不同站的 symbol 规则有所差异，如 <code>stock_zh_a_hist</code> 是东方财富的接口，symbol 为 000001 即可，而其余两个接口是 sina 新浪财经，要加上交易所前缀：深交所-sz和上交所-sh。</p><p>还有一点，我测试发现，分钟到小时级别的数据接口只能返回有限的数据，不是全量。不过这个也还好，如果确有需求，可以通过其他渠道拿到历史全量数据，通过这个接口获取增量数据。</p><p>实时行情的接口示例：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>aks<span style=color:#f92672>.</span>stock_zh_a_spot()
</span></span></code></pre></td></tr></table></div></div><p>输出示例：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   代码    名称    最新价   涨跌额    涨跌幅     买入     卖出     昨收     今开     最高     最低        成交量          成交额       时间戳
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>  bj430017  星昊医药  15.35 -0.36 -2.292  15.32  15.35  15.71  15.86  15.87  15.28  1922319.0   29838001.0  15:30:01
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>  bj430047  诺思兰德  13.57 -0.51 -3.622  13.56  13.57  14.08  14.12  14.18  13.44  3269916.0   45133670.0  15:30:01
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>  bj430090  同辉信息   7.56 -0.27 -3.448   7.56   7.57   7.83   7.89   8.01   7.53  7122586.0   54781060.0  15:30:01
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>  bj430139  华岭股份  28.69 -1.87 -6.119  28.68  28.69  30.56  30.26  30.59  28.52  8799534.0  258453787.0  15:30:01
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>  bj430198  微创光电  13.38 -0.36 -2.620  13.37  13.38  13.74  13.62  14.08  13.00  4379609.0   59129424.0  15:30:01
</span></span></code></pre></td></tr></table></div></div><p>这个接口返回的是全部股票的实时行情数据，请求耗时较长，确实在可用性不怎么好，tushare 上也有实时行情接口 <code>realtime_quote</code>，同样是从各个财经站点上抓取的，不过封装的更好。</p><p>当日的分笔数据的接口示例：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>aks<span style=color:#f92672>.</span>stock_zh_a_tick_tx_js(symbol<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sz000001&#34;</span>)
</span></span></code></pre></td></tr></table></div></div><p>这个接口返回的是某个股票当日的每笔成交列表。</p><p><strong>A 股指数：</strong> 以沪深 300 为例，演示 akshare 获取股票指数的历史和实时行情的函数。</p><p>历史行情的演示示例：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 日线</span>
</span></span><span style=display:flex><span>aks<span style=color:#f92672>.</span>stock_zh_index_daily(symbol<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sh000300&#34;</span>) <span style=color:#75715e># sina</span>
</span></span><span style=display:flex><span>aks<span style=color:#f92672>.</span>stock_zh_index_daily_tx(symbol<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sh000300&#34;</span>) <span style=color:#75715e># tencent</span>
</span></span><span style=display:flex><span>aks<span style=color:#f92672>.</span>stock_zh_index_daily_em(symbol<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sh000300&#34;</span>) <span style=color:#75715e># 东方财富</span>
</span></span></code></pre></td></tr></table></div></div><p>这个接口会直接拉取指定指数的全部日线行情。</p><p>实时行情的演示示例：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>aks<span style=color:#f92672>.</span>stock_zh_index_spot_sina() <span style=color:#75715e># sina</span>
</span></span><span style=display:flex><span>aks<span style=color:#f92672>.</span>stock_zh_index_spot_em() <span style=color:#75715e># 东方财富</span>
</span></span></code></pre></td></tr></table></div></div><p>这两个接口都是获取当前的实时行情，不过它返回的是一个全部数据的 <code>pd.Dataframe</code>，没有提供 symbol 参数指定指数 Symbol，要简单过滤才能拿到指定的 symbol 数据。</p><p>搞到这里，你会发现 akshare 没有在易用性投入太多处理。如果你查看它的<a href=https://akshare.akfamily.xyz/tutorial.html>数据接口列表</a>，它更多还是一个数据大杂烩，很多数据都能找到。但受限于全部来源于公开数据，没有存储下来，更像是给我提供了数据采集渠道，我们还有更多的工作要做。</p><h2 id=财务数据>财务数据</h2><p>A 股三大报表：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>aks<span style=color:#f92672>.</span>stock_financial_report_sina(stock<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sz000001&#34;</span>, symbol<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;资产负债表&#34;</span>)
</span></span><span style=display:flex><span>aks<span style=color:#f92672>.</span>stock_financial_report_sina(stock<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sz000001&#34;</span>, symbol<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;利润表&#34;</span>)
</span></span><span style=display:flex><span>aks<span style=color:#f92672>.</span>stock_financial_report_sina(stock<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sz000001&#34;</span>, symbol<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;现金流量表&#34;</span>)
</span></span></code></pre></td></tr></table></div></div><p>如资产负载表数据示例：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>        报告日   资产     现金及存放中央银行款项 其中:现金 存放中央银行款 结算准备金  ...   数据源 是否审计      公告日期   币种    类型                 更新日期
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>  <span style=color:#ae81ff>20240930</span>  NaN  281777000000.0   NaN     NaN   NaN  ...  定期报告  未审计  <span style=color:#ae81ff>20241019</span>  CNY  合并期末  2024-10-18T18:20:11
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>  <span style=color:#ae81ff>20240630</span>  NaN  305998000000.0   NaN     NaN   NaN  ...  定期报告  未审计  <span style=color:#ae81ff>20240816</span>  CNY  合并期末  2024-08-15T20:35:13
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>  <span style=color:#ae81ff>20240331</span>  NaN  322076000000.0   NaN     NaN   NaN  ...  定期报告  未审计  <span style=color:#ae81ff>20240420</span>  CNY  合并期末  2024-04-19T19:15:02
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>  <span style=color:#ae81ff>20231231</span>  NaN  274663000000.0   NaN     NaN   NaN  ...  定期报告    是  <span style=color:#ae81ff>20241019</span>  CNY  合并期末  2024-03-14T19:05:04
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>  <span style=color:#ae81ff>20230930</span>  NaN  350143000000.0   NaN     NaN   NaN  ...  定期报告  未审计  <span style=color:#ae81ff>20231025</span>  CNY  合并期末  2023-10-24T20:40:01
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span><span style=color:#ae81ff>5</span> rows x <span style=color:#ae81ff>150</span> columns<span style=color:#f92672>]</span>
</span></span></code></pre></td></tr></table></div></div><p>数据列非常的多，这里面只展示了部分。</p><p>这个接口通过 symbol 指定名称获取不同的财报，这也是挺奇怪。不得不吐槽下，易用性上和 tushare 不好比。</p><p>其它常用数据还有如业绩预告、分红送股等数据。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 业绩预告</span>
</span></span><span style=display:flex><span>aks<span style=color:#f92672>.</span>stock_yjyg_em(date<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;20240930&#34;</span>) <span style=color:#75715e># 从 20081231 开始，日期必须是 20200331 20200630 20200930 20201231</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 分红送股</span>
</span></span><span style=display:flex><span>aks<span style=color:#f92672>.</span>stock_history_dividend_detail(<span style=color:#e6db74>&#34;000001&#34;</span>)
</span></span></code></pre></td></tr></table></div></div><p>财务数据大概就找这么多吧。</p><p>一句题外话，akshare 有些数据有限，可以通过其他渠道下载全量数据，然后再用 akshare 维护增量数据。毕竟是免费更香，虽然要更多的时间成本。</p><h2 id=宏观数据>宏观数据</h2><p>宏观数据方面，主要看如何获取如 GDP、CPI、PMI、PPI、利率和就业数据等。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>aks<span style=color:#f92672>.</span>macro_china_gdp() <span style=color:#75715e># GDP 国内生产总值</span>
</span></span><span style=display:flex><span>aks<span style=color:#f92672>.</span>macro_china_cpi() <span style=color:#75715e># CPI 居民消费价格指数</span>
</span></span><span style=display:flex><span>aks<span style=color:#f92672>.</span>macro_china_pmi() <span style=color:#75715e># PMI 采购经理人指数</span>
</span></span><span style=display:flex><span>aks<span style=color:#f92672>.</span>macro_china_ppi() <span style=color:#75715e># PPI 工业品出厂价格指数</span>
</span></span><span style=display:flex><span>aks<span style=color:#f92672>.</span>macro_china_lpr() <span style=color:#75715e># LRP 贷款报价利率</span>
</span></span><span style=display:flex><span>aks<span style=color:#f92672>.</span>macro_china_urban_unemployment()  <span style=color:#75715e># 城镇调查失业率</span>
</span></span></code></pre></td></tr></table></div></div><p>如国内生产总值 GDP 的数据样例：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>            季度  国内生产总值-绝对值  国内生产总值-同比增长  第一产业-绝对值  第一产业-同比增长  第二产业-绝对值  第二产业-同比增长  第三产业-绝对值  第三产业-同比增长
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>  2024年第1-3季度    949745.7          4.8   57733.1        3.4  361361.6        5.4  530651.1        4.7
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>  2024年第1-2季度    616836.0          5.0   30660.0        3.5  236529.9        5.8  349646.1        4.6
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>    2024年第1季度    296299.5          5.3   11538.4        3.3  109846.3        6.0  174914.7        5.0
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>  2023年第1-4季度   1260582.1          5.2   89755.2        4.1  482588.5        4.7  688238.4        5.8
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>  2023年第1-3季度    912692.0          5.2   56330.1        4.0  348885.6        4.4  507476.2        6.0
</span></span></code></pre></td></tr></table></div></div><p>akshare 提供了各类宏观数据，相对更加丰富。除了国内的宏观经济数据，还有中国香港和其他不少国家的宏观数据，如美国、日本、欧洲等一些国家。</p><p>我本人不是专业金融出生，先整理下这些数据，等日后慢慢研究，以求为自己的交易增加更多理解。</p><h2 id=总结>总结</h2><p>本文介绍了如何从 akshare 获取常用的数据，提供了使用代码。如果想查看它提供的其他接口函数，可查看 <a href=https://akshare.akfamily.xyz/tutorial.html>akshare 接口文档</a>。</p><p>不得不说，akshare 提供的数据丰富，是收集公开数据的一个利器，免去了我们自行寻找数据的时间。</p><div>本文来源于 <a href=https://www.poloxue.com>POLOXUE's BLOG</a>，地址： <a href=https://www.poloxue.com/posts/2024-11-02-financial-market-data/>通过 python 获取金融数据-akshare</a></div></div><nav class="hide-on-mobile section-nav"><nav id=TableOfContents><ol><li><a href=#常见分类>常见分类</a></li><li><a href=#选择数据源>选择数据源</a></li><li><a href=#数据下载>数据下载</a></li><li><a href=#市场价格>市场价格</a></li><li><a href=#财务数据>财务数据</a></li><li><a href=#宏观数据>宏观数据</a></li><li><a href=#总结>总结</a></li></ol></nav></nav></div><div class=post><hr class=footer-separator><div class=tags></div><div class=back><a href=https://www.poloxue.com/><span aria-hidden=true>← Back</span></a></div><div class=back></div></div><div class=post><img style=width:85% src=https://cdn.jsdelivr.net/gh/poloxue/images@main/wechat.png><div class=utterances></div><script src=https://utteranc.es/client.js repo=poloxue/blog issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div><div class="footer wrapper"><nav class=nav><div>2024 Polo Xue All rights reserved</div></nav></div><script>feather.replace()</script><script>var enableTruncate=!0,filterDepth=!1;const MAX_DEPTH=9;window.addEventListener("DOMContentLoaded",()=>{const e=new IntersectionObserver(e=>{e.reverse().forEach(e=>{const n=e.target.getAttribute("id");if(e.intersectionRatio>0){var t=document.querySelectorAll(`nav li a[href="#${n}"]`);t!=null&&t.forEach(e=>{if(e!=null){var t=getDepth(e.parentElement);filterDepth&&t<=MAX_DEPTH&&(clearActiveStatesInTableOfContents(),e.parentElement.classList.add("active"))}else filterDepth||(clearActiveStatesInTableOfContents(),e.parentElement.classList.add("active"))})}})});document.querySelectorAll("h1[id],h2[id],h3[id],h4[id]").forEach(t=>{e.observe(t)})});function isVisible(e){if(!(e instanceof Element))return!1;const n=getComputedStyle(e);if(n.display==="none")return!1;if(n.visibility!=="visible")return!1;if(n.opacity<.1)return!1;if(e.offsetWidth+e.offsetHeight+e.getBoundingClientRect().height+e.getBoundingClientRect().width===0)return!1;const t={x:e.getBoundingClientRect().left+e.offsetWidth/2,y:e.getBoundingClientRect().top+e.offsetHeight/2};if(t.x<0)return!1;if(t.x>(document.documentElement.clientWidth||window.innerWidth))return!1;if(t.y<0)return!1;if(t.y>(document.documentElement.clientHeight||window.innerHeight))return!1;let s=document.elementFromPoint(t.x,t.y);do if(s===e)return!0;while(s=s.parentNode)return!1}function clearActiveStatesInTableOfContents(){document.querySelectorAll("nav li").forEach(e=>{e.classList.remove("active")})}function getDepth(e){for(var t=0;e!==null&&e.tagName.toLowerCase()!=="ul";)t++,e=e.parentElement;return t}function navItems(){var e=document.querySelectorAll("nav nav li a");return Array.from(e).filter(e=>e.href!=null&&e.hash.startsWith("#"))}function lasItemInNavBarVisible(){var e=navItems().slice(-1)[0];return isVisible(e)}document.addEventListener("DOMContentLoaded",function(){if(!enableTruncate)return;var e=navItems();console.log(e),lasItemInNavBarVisible()||(filterDepth=!0,e.forEach(function(e){var t=getDepth(e.parentElement);t>MAX_DEPTH&&e.parentElement.classList.add("depth-nested")}))})</script></body></html>
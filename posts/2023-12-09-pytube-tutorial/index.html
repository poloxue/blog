<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>基于 Python 视频搬运 Part4 - pytube 下载 YouTube 资源 - POLOXUE's BLOG</title><meta name=viewport content="width=device-width,initial-scale=1"><meta itemprop=name content="基于 Python 视频搬运 Part4 - pytube 下载 YouTube 资源"><meta itemprop=description content="本文是 pytube 教程，介绍如何使用 pytube 实现通过 Python 下载油管音视频等资源。"><meta itemprop=datePublished content="2023-12-09T14:06:15+08:00"><meta itemprop=dateModified content="2023-12-09T14:06:15+08:00"><meta itemprop=wordCount content="717"><meta itemprop=keywords content><meta property="og:title" content="基于 Python 视频搬运 Part4 - pytube 下载 YouTube 资源"><meta property="og:description" content="本文是 pytube 教程，介绍如何使用 pytube 实现通过 Python 下载油管音视频等资源。"><meta property="og:type" content="article"><meta property="og:url" content="https://www.poloxue.com/posts/2023-12-09-pytube-tutorial/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-09T14:06:15+08:00"><meta property="article:modified_time" content="2023-12-09T14:06:15+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="基于 Python 视频搬运 Part4 - pytube 下载 YouTube 资源"><meta name=twitter:description content="本文是 pytube 教程，介绍如何使用 pytube 实现通过 Python 下载油管音视频等资源。"><script data-goatcounter=https://poloxue.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/main.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/extra.css><link id=dark-scheme rel=stylesheet type=text/css href=https://www.poloxue.com/css/dark.css><script src=https://www.poloxue.com/js/feather.min.js></script>
<script src=https://www.poloxue.com/js/main.js></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7019080091542951" crossorigin=anonymous></script></head><body><div class="container-wide wrapper"><div class=header><div class=avatar><a href=https://www.poloxue.com/><img src=/avatar.png alt="POLOXUE's BLOG"></a></div><h1 class=site-title><a href=https://www.poloxue.com/>POLOXUE's BLOG</a></h1><div class=site-description><nav class="nav social"><ul class=flat><li><a href=https://github.com/poloxue/ title=Github><i data-feather=github></i></a></li><li><a href=/posts/index.xml title=RSS><i data-feather=rss></i></a></li><li><a href=/ title=Wechat><i data-feather=message-circle></i></a></li><span class=scheme-toggle><a href=# id=scheme-toggle></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>文章列表</a></li><li><a href=/tags>分类标签</a></li><li><a href=/about/>关于我</a></li></ul></nav></div><div class=article-nav id=article-nav-id><div class=post><div class=post-header><div class=meta><div class=date><span class=day>09</span>
<span class=rest>Dec 2023</span></div></div><div class=matter><h1 class=title>基于 Python 视频搬运 Part4 - pytube 下载 YouTube 资源</h1></div></div><aside class="show-on-mobile toc" id=static-toc><header><h3>Contents</h3></header><nav id=TableOfContents><ol><li><a href=#概述>概述</a></li><li><a href=#安装>安装</a></li><li><a href=#快速开始>快速开始</a><ol><li><a href=#视频属性>视频属性</a></li><li><a href=#音视频流>音视频流</a></li><li><a href=#视频下载>视频下载</a></li></ol></li><li><a href=#音视频分离>音视频分离</a><ol><li><a href=#下载进度>下载进度</a></li></ol></li><li><a href=#频道与播放列表>频道与播放列表</a></li><li><a href=#搜索能力>搜索能力</a></li><li><a href=#命令行工具---pytube>命令行工具 - pytube</a></li><li><a href=#最后>最后</a></li></ol></nav></aside><p>本文是基于 Python 视频搬运的第三篇，也是一篇完整的 pytube 教程，介绍如何通过 pytube 下载 YouTube 的音视频等资源。</p><h2 id=概述>概述</h2><p>pytube 是一款由 Python 实现，用于下载油管的第三方库，它的特点是无第三方的依赖，轻量，而且还有一个非常重要的点，它的接口灵活度高。</p><p>而且，对于命令行，pytube 也提供了 pytube 命令也实现了通过命令行实现资源下载。当然，命令行下载视频的工具，更著名的 <a href=https://github.com/ytdl-org/youtube-dl>youtube-dl</a> 和 <a href=https://github.com/soimort/you-get>you-get</a>，它们比 pytube 出名，如果不是通过 Python 实现资源下载，它们或许是更好的选择。</p><h2 id=安装>安装</h2><p>如下命令安装 pytube：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install pytube
</span></span></code></pre></td></tr></table></div></div><h2 id=快速开始>快速开始</h2><p>我们通过一个案例演示如何使用 pytube 下载视频，视频地址：www.youtube.com/watch?v=ceRYL271cao。</p><p>YoutTube 是 pytube 的核心类，它可用于获取某个 YouTube 视频的信息，包括基本属性内容等，如标题、音视频流，字幕等。</p><h3 id=视频属性>视频属性</h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> pytube <span style=color:#f92672>import</span> YouTube
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>yt <span style=color:#f92672>=</span> YouTube(<span style=color:#e6db74>&#34;https://www.youtube.com/watch?v=ceRYL271cao&#34;</span>)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;title: </span><span style=color:#e6db74>{</span>yt<span style=color:#f92672>.</span>title<span style=color:#e6db74>}</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>thumbnail_url: </span><span style=color:#e6db74>{</span>yt<span style=color:#f92672>.</span>thumbnail_url<span style=color:#e6db74>}</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>channel_url: </span><span style=color:#e6db74>{</span>yt<span style=color:#f92672>.</span>channel_url<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></td></tr></table></div></div><p>如上的代码获取了视频的标题、封面图和频道地址。</p><p>输出结果：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>title: Be a tmux KING with Tmuxifier | My FAVORITE tmux tool
</span></span><span style=display:flex><span>thumbnail_url: https://i.ytimg.com/vi/ceRYL271cao/hq720.jpg
</span></span><span style=display:flex><span>channel_url: https://www.youtube.com/channel/UCo71RUe6DX4w-Vd47rFLXPg
</span></span></code></pre></td></tr></table></div></div><p>更多属性：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># dir 查看 YouTube 属性</span>
</span></span><span style=display:flex><span>dir(yt)
</span></span></code></pre></td></tr></table></div></div><p>输出结果：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span><span style=color:#e6db74>&#39;__class__&#39;</span>, <span style=color:#e6db74>&#39;__delattr__&#39;</span>, <span style=color:#e6db74>&#39;__dict__&#39;</span>, <span style=color:#e6db74>&#39;__dir__&#39;</span>, <span style=color:#e6db74>&#39;__doc__&#39;</span>, <span style=color:#e6db74>&#39;__eq__&#39;</span>, <span style=color:#e6db74>&#39;__format__&#39;</span>, <span style=color:#e6db74>&#39;__ge__&#39;</span>, <span style=color:#e6db74>&#39;__getattribute__&#39;</span>, <span style=color:#e6db74>&#39;__getstate__&#39;</span>, <span style=color:#e6db74>&#39;__gt__&#39;</span>, <span style=color:#e6db74>&#39;__hash__&#39;</span>, <span style=color:#e6db74>&#39;__init__&#39;</span>, <span style=color:#e6db74>&#39;__init_subclass__&#39;</span>, <span style=color:#e6db74>&#39;__le__&#39;</span>, <span style=color:#e6db74>&#39;__lt__&#39;</span>, <span style=color:#e6db74>&#39;__module__&#39;</span>, <span style=color:#e6db74>&#39;__ne__&#39;</span>, <span style=color:#e6db74>&#39;__new__&#39;</span>, <span style=color:#e6db74>&#39;__reduce__&#39;</span>, <span style=color:#e6db74>&#39;__reduce_ex__&#39;</span>, <span style=color:#e6db74>&#39;__repr__&#39;</span>, <span style=color:#e6db74>&#39;__setattr__&#39;</span>, <span style=color:#e6db74>&#39;__sizeof__&#39;</span>, <span style=color:#e6db74>&#39;__str__&#39;</span>, <span style=color:#e6db74>&#39;__subclasshook__&#39;</span>, <span style=color:#e6db74>&#39;__weakref__&#39;</span>, <span style=color:#e6db74>&#39;_age_restricted&#39;</span>, <span style=color:#e6db74>&#39;_author&#39;</span>, <span style=color:#e6db74>&#39;_embed_html&#39;</span>, <span style=color:#e6db74>&#39;_fmt_streams&#39;</span>, <span style=color:#e6db74>&#39;_initial_data&#39;</span>, <span style=color:#e6db74>&#39;_js&#39;</span>, <span style=color:#e6db74>&#39;_js_url&#39;</span>, <span style=color:#e6db74>&#39;_metadata&#39;</span>, <span style=color:#e6db74>&#39;_player_config_args&#39;</span>, <span style=color:#e6db74>&#39;_publish_date&#39;</span>, <span style=color:#e6db74>&#39;_title&#39;</span>, <span style=color:#e6db74>&#39;_vid_info&#39;</span>, <span style=color:#e6db74>&#39;_watch_html&#39;</span>, <span style=color:#e6db74>&#39;age_restricted&#39;</span>, <span style=color:#e6db74>&#39;allow_oauth_cache&#39;</span>, <span style=color:#e6db74>&#39;author&#39;</span>, <span style=color:#e6db74>&#39;bypass_age_gate&#39;</span>, <span style=color:#e6db74>&#39;caption_tracks&#39;</span>, <span style=color:#e6db74>&#39;captions&#39;</span>, <span style=color:#e6db74>&#39;channel_id&#39;</span>, <span style=color:#e6db74>&#39;channel_url&#39;</span>, <span style=color:#e6db74>&#39;check_availability&#39;</span>, <span style=color:#e6db74>&#39;description&#39;</span>, <span style=color:#e6db74>&#39;embed_html&#39;</span>, <span style=color:#e6db74>&#39;embed_url&#39;</span>, <span style=color:#e6db74>&#39;fmt_streams&#39;</span>, <span style=color:#e6db74>&#39;from_id&#39;</span>, <span style=color:#e6db74>&#39;initial_data&#39;</span>, <span style=color:#e6db74>&#39;js&#39;</span>, <span style=color:#e6db74>&#39;js_url&#39;</span>, <span style=color:#e6db74>&#39;keywords&#39;</span>, <span style=color:#e6db74>&#39;length&#39;</span>, <span style=color:#e6db74>&#39;metadata&#39;</span>, <span style=color:#e6db74>&#39;publish_date&#39;</span>, <span style=color:#e6db74>&#39;rating&#39;</span>, <span style=color:#e6db74>&#39;register_on_complete_callback&#39;</span>, <span style=color:#e6db74>&#39;register_on_progress_callback&#39;</span>, <span style=color:#e6db74>&#39;stream_monostate&#39;</span>, <span style=color:#e6db74>&#39;streaming_data&#39;</span>, <span style=color:#e6db74>&#39;streams&#39;</span>, <span style=color:#e6db74>&#39;thumbnail_url&#39;</span>, <span style=color:#e6db74>&#39;title&#39;</span>, <span style=color:#e6db74>&#39;use_oauth&#39;</span>, <span style=color:#e6db74>&#39;vid_info&#39;</span>, <span style=color:#e6db74>&#39;video_id&#39;</span>, <span style=color:#e6db74>&#39;views&#39;</span>, <span style=color:#e6db74>&#39;watch_html&#39;</span>, <span style=color:#e6db74>&#39;watch_url&#39;</span><span style=color:#f92672>]</span>
</span></span></code></pre></td></tr></table></div></div><p>属性的具体含义，可查看 pytube 文档：<a href=https://pytube.io/en/latest/api.html#youtube-object>YouTube Object</a></p><h3 id=音视频流>音视频流</h3><p>pytube 与其他的油管视频下载工具不同，它不会默认选择资源下载，要我们手动 filter 选择要使用的资源。</p><p>首先，查看 YouTube 中可用的音视频资源信息，通过 YoutTube 的 streams 属性获取。</p><p>代码如下：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>print(yt.streams)
</span></span></code></pre></td></tr></table></div></div><p>输出结果：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>&lt;Stream: itag<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;17&#34;</span> mime_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;video/3gpp&#34;</span> res<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;144p&#34;</span> fps<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;7fps&#34;</span> vcodec<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mp4v.20.3&#34;</span> acodec<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mp4a.40.2&#34;</span> progressive<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;True&#34;</span> type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;video&#34;</span>&gt;,
</span></span><span style=display:flex><span>&lt;Stream: itag<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;18&#34;</span> mime_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;video/mp4&#34;</span> res<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;360p&#34;</span> fps<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30fps&#34;</span> vcodec<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;avc1.42001E&#34;</span> acodec<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mp4a.40.2&#34;</span> progressive<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;True&#34;</span> type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;video&#34;</span>&gt;,
</span></span><span style=display:flex><span>&lt;Stream: itag<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;22&#34;</span> mime_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;video/mp4&#34;</span> res<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;720p&#34;</span> fps<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30fps&#34;</span> vcodec<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;avc1.64001F&#34;</span> acodec<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mp4a.40.2&#34;</span> progressive<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;True&#34;</span> type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;video&#34;</span>&gt;, 
</span></span><span style=display:flex><span>&lt;Stream: itag<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;313&#34;</span> mime_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;video/webm&#34;</span> res<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;2160p&#34;</span> fps<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30fps&#34;</span> vcodec<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vp9&#34;</span> progressive<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;False&#34;</span> type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;video&#34;</span>&gt;,
</span></span><span style=display:flex><span>&lt;Stream: itag<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;271&#34;</span> mime_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;video/webm&#34;</span> res<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1440p&#34;</span> fps<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30fps&#34;</span> vcodec<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vp9&#34;</span> progressive<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;False&#34;</span> type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;video&#34;</span>&gt;,
</span></span><span style=display:flex><span>&lt;Stream: itag<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;137&#34;</span> mime_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;video/mp4&#34;</span> res<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1080p&#34;</span> fps<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30fps&#34;</span> vcodec<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;avc1.640028&#34;</span> progressive<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;False&#34;</span> type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;video&#34;</span>&gt;,
</span></span><span style=display:flex><span>&lt;Stream: itag<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;248&#34;</span> mime_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;video/webm&#34;</span> res<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1080p&#34;</span> fps<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;30fps&#34;</span> vcodec<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vp9&#34;</span> progressive<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;False&#34;</span> type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;video&#34;</span>&gt;,
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>&lt;Stream: itag<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;139&#34;</span> mime_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;audio/mp4&#34;</span> abr<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;48kbps&#34;</span> acodec<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mp4a.40.5&#34;</span> progressive<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;False&#34;</span> type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;audio&#34;</span>&gt;,
</span></span><span style=display:flex><span>&lt;Stream: itag<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;140&#34;</span> mime_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;audio/mp4&#34;</span> abr<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;128kbps&#34;</span> acodec<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mp4a.40.2&#34;</span> progressive<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;False&#34;</span> type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;audio&#34;</span>&gt;,
</span></span><span style=display:flex><span>&lt;Stream: itag<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;249&#34;</span> mime_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;audio/webm&#34;</span> abr<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;50kbps&#34;</span> acodec<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;opus&#34;</span> progressive<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;False&#34;</span> type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;audio&#34;</span>&gt;,
</span></span><span style=display:flex><span>&lt;Stream: itag<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;250&#34;</span> mime_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;audio/webm&#34;</span> abr<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;70kbps&#34;</span> acodec<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;opus&#34;</span> progressive<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;False&#34;</span> type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;audio&#34;</span>&gt;,
</span></span><span style=display:flex><span>&lt;Stream: itag<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;251&#34;</span> mime_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;audio/webm&#34;</span> abr<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;160kbps&#34;</span> acodec<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;opus&#34;</span> progressive<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;False&#34;</span> type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;audio&#34;</span>&gt;<span style=color:#f92672>]</span>
</span></span></code></pre></td></tr></table></div></div><p>pytube 支持 filter 过滤资源，如只要视频资源，选择分辨率最高的视频。</p><p>代码如下：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>stream <span style=color:#f92672>=</span> yt<span style=color:#f92672>.</span>streams<span style=color:#f92672>.</span>filter(type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;video&#34;</span>)<span style=color:#f92672>.</span>order_by(<span style=color:#e6db74>&#34;resolution&#34;</span>)<span style=color:#f92672>.</span>last()
</span></span></code></pre></td></tr></table></div></div><p>首先，通过 <code>type="video"</code> 过滤视频资源，接着按 resolution，即分辨率，升序排序视频，再最后一个视频。</p><h3 id=视频下载>视频下载</h3><p>一旦获取到我们的目标 stream，就可以调用 download 方法，即可下载。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>stream<span style=color:#f92672>.</span>download()
</span></span></code></pre></td></tr></table></div></div><p>默认情况，download 下载位置为当前目录，并以 YouTube 视频标题作为文件名。如希望修改这个默认行为，可通过 filename 和 output_path 实现。filename 执行下载文件名，output_path 执行文件下载路径。</p><h2 id=音视频分离>音视频分离</h2><p>现在，我们得到了一个视频文件，但这极有可能一个无声视频。</p><p>pytube 官方文档有如下这么一段话：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>You may notice that some streams listed have both a video codec and audio codec, <span style=color:#66d9ef>while</span> others have just video or just audio, this is a result of YouTube supporting a streaming technique called Dynamic Adaptive Streaming over HTTP <span style=color:#f92672>(</span>DASH<span style=color:#f92672>)</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In the context of pytube, the implications are <span style=color:#66d9ef>for</span> the highest quality streams; you now need to download both the audio and video tracks and <span style=color:#66d9ef>then</span> post-process them with software like FFmpeg to merge them.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The legacy streams that contain the audio and video in a single file <span style=color:#f92672>(</span>referred to as “progressive download”<span style=color:#f92672>)</span> are still available, but only <span style=color:#66d9ef>for</span> resolutions 720p and below.
</span></span></code></pre></td></tr></table></div></div><p>简单来说，就是部分 stream 同时包含音视频，而部分 stream 是音视频分离的。而同时包含视频的流使用的是以前的 Progressive Adaptive 技术，音视频分离使用的是 Dynamic Adaptive Streaming over HTTP，即 DASH 技术。</p><p>关键是，Progressive Adaptive 的视频最高分辨率是 720p，更高分辨率则必须是用 Dash 技术的流，分别下载音频和视频，再通过类似 FFmpeg 的工具将两者合并。</p><p>我们现在就不能只下载视频资源了。</p><p>修改后的代码，如下所示：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>dash_streams <span style=color:#f92672>=</span> yt<span style=color:#f92672>.</span>streams<span style=color:#f92672>.</span>filter(is_dash<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>video_stream <span style=color:#f92672>=</span> dash_streams<span style=color:#f92672>.</span>filter(type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;video&#34;</span>)<span style=color:#f92672>.</span>order_by(<span style=color:#e6db74>&#34;resolution&#34;</span>)<span style=color:#f92672>.</span>last()
</span></span><span style=display:flex><span>audio_stream <span style=color:#f92672>=</span> dash_streams<span style=color:#f92672>.</span>filter(type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;audio&#34;</span>)<span style=color:#f92672>.</span>first()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>video_stream<span style=color:#f92672>.</span>download()
</span></span><span style=display:flex><span>audio_stream<span style=color:#f92672>.</span>download()
</span></span></code></pre></td></tr></table></div></div><p>到此，我们成功获取需要的音视频资源了。</p><h3 id=下载进度>下载进度</h3><p>默认的配置，pytube 下载视频不展示下载进度，可通过在创建 YouTube 类时指定回调.</p><p>代码如下所示：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> pytube <span style=color:#f92672>import</span> YouTube
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> pytube.cli <span style=color:#f92672>import</span> on_progress
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>watch_url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://www.youtube.com/watch?v=ceRYL271cao&#34;</span>
</span></span><span style=display:flex><span>yt <span style=color:#f92672>=</span> YouTube(watch_url, on_progress_call<span style=color:#f92672>=</span>on_progress)
</span></span></code></pre></td></tr></table></div></div><p>除了 on_progress_callback，还可指定 on_complete_callback，用于指定下载完成的回调。</p><h2 id=频道与播放列表>频道与播放列表</h2><p>如何更好地使用 pytube 管理与下载资源呢？</p><p>YouTube 核心有 4 个 Object 类，即 Channel、PlayList、YoutTube 和 Stream。</p><p>前面已经演示过 YouTube 和 Stream 类的基本使用。要用好 pytube，重点是了解这 4 个类间的关系。</p><p>简言之，Channel 中包含 PlayList 和 YouTube。而 PlayList 中包含 YouTube。YouTube 中包含 Stream。即Channel 和 Playlist 是 YouTube 的容器。</p><p>如果实现频道视频检测的功能，可利用 Channel 和 PlayList 这两个类，定时检测 Channel 和 PlayList 中的 video_urls。</p><p>创建 Channel 的代码：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> pytube <span style=color:#f92672>import</span> Channel
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ch <span style=color:#f92672>=</span> Channel(<span style=color:#e6db74>&#34;https://www.youtube.com/channel/UCo71RUe6DX4w-Vd47rFLXPg&#34;</span>)
</span></span></code></pre></td></tr></table></div></div><p>频道的创建要传入 channel 地址，而这个地址，因为 YouTube 的改版，网页端中的 channel 地址不可用，而要通过 YoutTube 的 channel_url 属性获取。</p><p>示例代码如下：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>yt <span style=color:#f92672>=</span> YoutTube(<span style=color:#e6db74>&#34;https://www.youtube.com/watch?v=ceRYL271cao&#34;</span>)
</span></span><span style=display:flex><span>print(yt<span style=color:#f92672>.</span>channel_url)
</span></span></code></pre></td></tr></table></div></div><p>输出结果：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>https://www.youtube.com/channel/UCo71RUe6DX4w-Vd47rFLXPg
</span></span></code></pre></td></tr></table></div></div><p>特别说明，因为 youtube 的改版，pytube 中有些接口已经不可用了，要修复。如，Channel 中的一些功能不可用，这篇文章有介绍修复方案：<a href=https://zhuanlan.zhihu.com/p/586803092>解决近期Pytube的Channel Video列表会空的问题</a>。</p><p>通过 Channel 获取所有的 YouTube 或视频地址列表：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>print(ch<span style=color:#f92672>.</span>videos)
</span></span><span style=display:flex><span>print(ch<span style=color:#f92672>.</span>video_urls)
</span></span></code></pre></td></tr></table></div></div><p>播放列表 playlist 的创建，可通过播放 playlist 地址或视频地址中包含 playlist 的参数。</p><p>代码如下所示：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> pytube <span style=color:#f92672>import</span> Playlist
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>p <span style=color:#f92672>=</span> Playlist(<span style=color:#e6db74>&#34;https://www.youtube.com/playlist?list=PLsz00TDipIfdGZRWNvOdeZfbka9HfpYBg&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#75715e># p = Playlist(&#34;https://www.youtube.com/watch?v=capyZ2D9Yz0&amp;list=PLsz00TDipIfdGZRWNvOdeZfbka9HfpYBg&amp;ab_channel=typecraft&#34;)</span>
</span></span></code></pre></td></tr></table></div></div><p>通过 playlist 获取所有 YoutTube 或地址列表：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>print(p<span style=color:#f92672>.</span>videos)
</span></span><span style=display:flex><span>print(p<span style=color:#f92672>.</span>video_urls)
</span></span></code></pre></td></tr></table></div></div><h2 id=搜索能力>搜索能力</h2><p>pytube 还提供了搜索油管的能力，或许一些场景会有用吧。</p><p>使用代码如下：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> pytube <span style=color:#f92672>import</span> Search
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>results <span style=color:#f92672>=</span> Search(<span style=color:#e6db74>&#34;zsh&#34;</span>)<span style=color:#f92672>.</span>results
</span></span><span style=display:flex><span>print(results)
</span></span></code></pre></td></tr></table></div></div><p>其中返回的 results 就是 YouTube 的实例数组。如有需要，从中选择需要的 YoutTube 兑现个，在其上执行 streams 下载即可。</p><h2 id=命令行工具---pytube>命令行工具 - pytube</h2><p>pytube 除了以 python 库的形式提供视频下载能力，还提供了一个 pytube 的命令行工具。</p><p>以一些示例说明 pytube 命令的使用吧，如下所示：</p><p>下载包含音频且最高分辨率视频：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pytube https://www.youtube.com/watch?v<span style=color:#f92672>=</span>ceRYL271cao
</span></span></code></pre></td></tr></table></div></div><p>查看所有可用的流：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pytube https://www.youtube.com/watch?v<span style=color:#f92672>=</span>ceRYL271cao --list
</span></span></code></pre></td></tr></table></div></div><p>下载指定的流：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pytube https://www.youtube.com/watch?v<span style=color:#f92672>=</span>ceRYL271cao -itag<span style=color:#f92672>=</span><span style=color:#ae81ff>22</span>
</span></span></code></pre></td></tr></table></div></div><p>查看可用字幕：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pytube https://www.youtube.com/watch?v<span style=color:#f92672>=</span>ceRYL271cao -list-caption
</span></span></code></pre></td></tr></table></div></div><p>下载执行字幕：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pytube https://www.youtube.com/watch?v<span style=color:#f92672>=</span>ceRYL271cao -c en
</span></span></code></pre></td></tr></table></div></div><p>下载音频：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pytube https://www.youtube.com/watch?v<span style=color:#f92672>=</span>ceRYL271cao -a
</span></span></code></pre></td></tr></table></div></div><h2 id=最后>最后</h2><p>本文介绍了如何使用 pytube 下载油管资源，如果大家希望通过 python 管理下载视频，希望它能有所有帮助。</p><p>我的博文：<a href=https://www.poloxue.com/posts/2023-12-07-pytube-tutorial/>基于 Python 视频搬运 Part2 - pytube 下载 YouTube 资源</a>。</p><div>本文来源于 <a href=https://www.poloxue.com>POLOXUE's BLOG</a>，地址： <a href=https://www.poloxue.com/posts/2023-12-09-pytube-tutorial/>基于 Python 视频搬运 Part4 - pytube 下载 YouTube 资源</a></div></div><nav class="hide-on-mobile section-nav"><nav id=TableOfContents><ol><li><a href=#概述>概述</a></li><li><a href=#安装>安装</a></li><li><a href=#快速开始>快速开始</a><ol><li><a href=#视频属性>视频属性</a></li><li><a href=#音视频流>音视频流</a></li><li><a href=#视频下载>视频下载</a></li></ol></li><li><a href=#音视频分离>音视频分离</a><ol><li><a href=#下载进度>下载进度</a></li></ol></li><li><a href=#频道与播放列表>频道与播放列表</a></li><li><a href=#搜索能力>搜索能力</a></li><li><a href=#命令行工具---pytube>命令行工具 - pytube</a></li><li><a href=#最后>最后</a></li></ol></nav></nav></div><div class=post><hr class=footer-separator><div class=tags></div><div class=back><a href=https://www.poloxue.com/><span aria-hidden=true>← Back</span></a></div><div class=back></div></div><div class=post><img style=width:85% src=https://cdn.jsdelivr.net/gh/poloxue/images@main/wechat.png><div class=utterances></div><script src=https://utteranc.es/client.js repo=poloxue/blog issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div><div class="footer wrapper"><nav class=nav><div>2023 Polo Xue All rights reserved</div></nav></div><script>feather.replace()</script><script>var enableTruncate=!0,filterDepth=!1;const MAX_DEPTH=9;window.addEventListener("DOMContentLoaded",()=>{const e=new IntersectionObserver(e=>{e.reverse().forEach(e=>{const n=e.target.getAttribute("id");if(e.intersectionRatio>0){var t=document.querySelectorAll(`nav li a[href="#${n}"]`);t!=null&&t.forEach(e=>{if(e!=null){var t=getDepth(e.parentElement);filterDepth&&t<=MAX_DEPTH&&(clearActiveStatesInTableOfContents(),e.parentElement.classList.add("active"))}else filterDepth||(clearActiveStatesInTableOfContents(),e.parentElement.classList.add("active"))})}})});document.querySelectorAll("h1[id],h2[id],h3[id],h4[id]").forEach(t=>{e.observe(t)})});function isVisible(e){if(!(e instanceof Element))return!1;const n=getComputedStyle(e);if(n.display==="none")return!1;if(n.visibility!=="visible")return!1;if(n.opacity<.1)return!1;if(e.offsetWidth+e.offsetHeight+e.getBoundingClientRect().height+e.getBoundingClientRect().width===0)return!1;const t={x:e.getBoundingClientRect().left+e.offsetWidth/2,y:e.getBoundingClientRect().top+e.offsetHeight/2};if(t.x<0)return!1;if(t.x>(document.documentElement.clientWidth||window.innerWidth))return!1;if(t.y<0)return!1;if(t.y>(document.documentElement.clientHeight||window.innerHeight))return!1;let s=document.elementFromPoint(t.x,t.y);do if(s===e)return!0;while(s=s.parentNode)return!1}function clearActiveStatesInTableOfContents(){document.querySelectorAll("nav li").forEach(e=>{e.classList.remove("active")})}function getDepth(e){for(var t=0;e!==null&&e.tagName.toLowerCase()!=="ul";)t++,e=e.parentElement;return t}function navItems(){var e=document.querySelectorAll("nav nav li a");return Array.from(e).filter(e=>e.href!=null&&e.hash.startsWith("#"))}function lasItemInNavBarVisible(){var e=navItems().slice(-1)[0];return isVisible(e)}document.addEventListener("DOMContentLoaded",function(){if(!enableTruncate)return;var e=navItems();console.log(e),lasItemInNavBarVisible()||(filterDepth=!0,e.forEach(function(e){var t=getDepth(e.parentElement);t>MAX_DEPTH&&e.parentElement.classList.add("depth-nested")}))})</script></body></html>
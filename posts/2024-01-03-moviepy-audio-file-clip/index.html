<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Python 视频剪辑库 - MoviePy 的音频操作 - POLOXUE's BLOG</title><meta name=viewport content="width=device-width,initial-scale=1"><meta itemprop=name content="Python 视频剪辑库 - MoviePy 的音频操作"><meta itemprop=description content="本文将重点介绍 MoviePy 音频的一些操作，如音频提取创建、放大与片段剪辑等。"><meta itemprop=datePublished content="2024-01-03T18:09:20+08:00"><meta itemprop=dateModified content="2024-01-03T18:09:20+08:00"><meta itemprop=wordCount content="140"><meta itemprop=keywords content><meta property="og:title" content="Python 视频剪辑库 - MoviePy 的音频操作"><meta property="og:description" content="本文将重点介绍 MoviePy 音频的一些操作，如音频提取创建、放大与片段剪辑等。"><meta property="og:type" content="article"><meta property="og:url" content="https://www.poloxue.com/posts/2024-01-03-moviepy-audio-file-clip/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-03T18:09:20+08:00"><meta property="article:modified_time" content="2024-01-03T18:09:20+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Python 视频剪辑库 - MoviePy 的音频操作"><meta name=twitter:description content="本文将重点介绍 MoviePy 音频的一些操作，如音频提取创建、放大与片段剪辑等。"><script data-goatcounter=https://poloxue.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/main.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/extra.css><link id=dark-scheme rel=stylesheet type=text/css href=https://www.poloxue.com/css/dark.css><script src=https://www.poloxue.com/js/feather.min.js></script>
<script src=https://www.poloxue.com/js/main.js></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7019080091542951" crossorigin=anonymous></script></head><body><div class="container wrapper"><div class=header><div class=avatar><a href=https://www.poloxue.com/><img src=/avatar.png alt="POLOXUE's BLOG"></a></div><h1 class=site-title><a href=https://www.poloxue.com/>POLOXUE's BLOG</a></h1><div class=site-description><nav class="nav social"><ul class=flat><li><a href=https://github.com/poloxue/ title=Github><i data-feather=github></i></a></li><li><a href=/posts/index.xml title=RSS><i data-feather=rss></i></a></li><li><a href=/ title=Wechat><i data-feather=message-circle></i></a></li><span class=scheme-toggle><a href=# id=scheme-toggle></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>首页</a></li><li><a href=/posts>文章列表</a></li><li><a href=/tags>分类标签</a></li><li><a href=/about/>关于我</a></li></ul></nav></div><div class=post><div class=post-header><div class=meta><div class=date><span class=day>03</span>
<span class=rest>Jan 2024</span></div></div><div class=matter><h1 class=title>Python 视频剪辑库 - MoviePy 的音频操作</h1></div></div><p>上文介绍了如何安装 MoviePy 和利用 VideoFileClip 类读取视频文件，并进行一些简单的剪辑，如大小调整、旋转和片段剪辑等。</p><p>本文将重点介绍 MoviePy 音频的一些操作。</p><h2 id=创建音频片段-audioclip>创建音频片段 AudioClip</h2><p>MoviePy 中创建音频 Clip 的方法有两种，分别是从视频文件中提取音频，和基于音频文件创建。</p><h3 id=基于视频文件提取音频片段>基于视频文件提取音频片段</h3><p>我们现在有一个视频文件，名为 <code>input_vidoe.mp4</code>。</p><p>直接通过如下代码提取音频文件，如下所示：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> moviepy.editor <span style=color:#f92672>import</span> <span style=color:#f92672>*</span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>video <span style=color:#f92672>=</span> VideoFileClip(<span style=color:#e6db74>&#34;input_video.mp4&#34;</span>)
</span></span><span style=display:flex><span>audio <span style=color:#f92672>=</span> video<span style=color:#f92672>.</span>audio
</span></span><span style=display:flex><span>audio<span style=color:#f92672>.</span>write_audiofile(<span style=color:#e6db74>&#34;ouput_audio.mp3&#34;</span>)
</span></span></code></pre></td></tr></table></div></div><h3 id=基于音频文件创建音频片段>基于音频文件创建音频片段</h3><p>通过 AudioFileClip 读取刚刚从视频中提取的音频文件即可。</p><p>代码如下所示：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>audio <span style=color:#f92672>=</span> AudioFileClip(<span style=color:#e6db74>&#34;output_audio.mp3&#34;</span>)
</span></span></code></pre></td></tr></table></div></div><p>我们可以将这个视频短片加载到另外一个视频片段中。</p><p>直接使用 TextClip 创建一个视频，我们通过 audio.duration 设置视频片段的播放时长。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>video <span style=color:#f92672>=</span> TextClip(<span style=color:#e6db74>&#34;Hello MoviePy&#34;</span>, color<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;orange&#34;</span>, size<span style=color:#f92672>=</span>(<span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>100</span>))
</span></span><span style=display:flex><span>video <span style=color:#f92672>=</span> video<span style=color:#f92672>.</span>set_duration(audio<span style=color:#f92672>.</span>duration)<span style=color:#f92672>.</span>set_fps(<span style=color:#ae81ff>1</span>)
</span></span></code></pre></td></tr></table></div></div><p>让我们将音频加载到这个视频上。</p><p>代码如下：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>video<span style=color:#f92672>.</span>audio <span style=color:#f92672>=</span> audio
</span></span><span style=display:flex><span>video<span style=color:#f92672>.</span>write_audio(<span style=color:#e6db74>&#34;text_video.mp4&#34;</span>)
</span></span></code></pre></td></tr></table></div></div><p>如果使用 mac 的 quicktimeplayer 打开，记得在写入的时候，加上参数 audio_codec=&ldquo;aac&rdquo;，即如下所示：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>video<span style=color:#f92672>.</span>write_audio(<span style=color:#e6db74>&#34;text_video.mp4&#34;</span>, audio_codec<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;aac&#34;</span>)
</span></span></code></pre></td></tr></table></div></div><p>完成之后，即可打开视频，检查下效果。</p><h2 id=音频操作>音频操作</h2><p>介绍些 AudioClip 基础的操作，如音量的放大减小，音频片段裁剪等。</p><h3 id=音量控制>音量控制</h3><p>音频片段的音量控制，直接通过 <code>AudioClip</code> 的 <code>volumex</code> 方法实现。</p><p>减低声音 0.5 倍的代码如下所示：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>audio <span style=color:#f92672>=</span> audio<span style=color:#f92672>.</span>volumex(<span style=color:#ae81ff>0.5</span>)
</span></span></code></pre></td></tr></table></div></div><h3 id=片段剪辑>片段剪辑</h3><p>现在，如果想剪辑音频中的一小段音频，和 VideoClip 一样，直接通过 subclip 实现即可。</p><p>如剪辑从 5 到 15 秒的音频片段，代码如下所示：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>audio <span style=color:#f92672>=</span> audio<span style=color:#f92672>.</span>subclip(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>15</span>)
</span></span></code></pre></td></tr></table></div></div><h3 id=删除视频中的音频>删除视频中的音频</h3><p>我们再介绍一个小技巧，如果希望删除一个视频中的音频，我们可以在通过 VideoFileClip 读取视频文件时，指定参数 <code>audio</code> 为 <code>False</code>。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>video <span style=color:#f92672>=</span> VideoFileClip(<span style=color:#e6db74>&#34;input_video&#34;</span>, audio<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>)
</span></span></code></pre></td></tr></table></div></div><p>或者亦可通过调用 VideoFileClip 的 <code>without_audio</code> 方法删除视频片段中的音频。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>video <span style=color:#f92672>=</span> video<span style=color:#f92672>.</span>without_audio()
</span></span></code></pre></td></tr></table></div></div><p>是不是非常简单。</p><h2 id=总结>总结</h2><p>本文主要介绍了 MoviePy 中一些基础操作，更多关于 MoviePy 的教程，可订阅我的博客，感谢。</p><hr class=footer-separator><div class=tags></div><div class=back><a href=https://www.poloxue.com/><span aria-hidden=true>← Back</span></a></div><div class=back></div></div><div class=utterances></div><script src=https://utteranc.es/client.js repo=poloxue/blog issue-term=pathname theme=github-light crossorigin=anonymous async></script></div><div class="footer wrapper"><nav class=nav><div>2024 Polo Xue All rights reserved</div></nav></div><script>feather.replace()</script></body></html>
<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>终端环境：zsh 主题自定义 powerlevel10k - 菠萝学量化</title><meta name=viewport content="width=device-width,initial-scale=1"><meta itemprop=name content="终端环境：zsh 主题自定义 powerlevel10k"><meta itemprop=description content="本教程介绍如何安装 zsh 主题 powerlevel10k 的安装与配置。"><meta itemprop=datePublished content="2023-10-20T10:25:36+08:00"><meta itemprop=dateModified content="2023-10-20T10:25:36+08:00"><meta itemprop=wordCount content="512"><meta itemprop=keywords content="Zsh"><meta property="og:url" content="https://www.poloxue.com/posts/2023-10-20-zsh-theme-powerlevel10k/"><meta property="og:site_name" content="菠萝学量化"><meta property="og:title" content="终端环境：zsh 主题自定义 powerlevel10k"><meta property="og:description" content="本教程介绍如何安装 zsh 主题 powerlevel10k 的安装与配置。"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-10-20T10:25:36+08:00"><meta property="article:modified_time" content="2023-10-20T10:25:36+08:00"><meta property="article:tag" content="Zsh"><meta name=twitter:card content="summary"><meta name=twitter:title content="终端环境：zsh 主题自定义 powerlevel10k"><meta name=twitter:description content="本教程介绍如何安装 zsh 主题 powerlevel10k 的安装与配置。"><script data-goatcounter=https://poloxue.goatcounter.com/count async src=//gc.zgo.at/count.js></script><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/main.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/extra.css><link id=dark-scheme rel=stylesheet type=text/css href=https://www.poloxue.com/css/dark.css><script src=https://www.poloxue.com/js/feather.min.js></script><script src=https://www.poloxue.com/js/main.js></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script><script>MathJax={tex:{displayMath:[["[","]"],["$$","$$"]],inlineMath:[["(",")"],["$","$"]]}}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7019080091542951" crossorigin=anonymous></script></head><body><div class="container-wide wrapper"><div class=header><div class=avatar><a href=https://www.poloxue.com/><img src=/avatar.png alt=菠萝学量化></a></div><h1 class=site-title><a href=https://www.poloxue.com/>菠萝学量化</a></h1><div class=site-description><nav class="nav social"><ul class=flat><li><a href=https://github.com/poloxue/ title=Github><i data-feather=github></i></a></li><li><a href=/posts/index.xml title=RSS><i data-feather=rss></i></a></li><li><a href=/ title=Wechat><i data-feather=message-circle></i></a></li><span class=scheme-toggle><a href=# id=scheme-toggle></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>文章列表</a></li><li><a href=/about/about>关于我</a></li></ul></nav></div><div class=article-nav id=article-nav-id><div class=post><div class=post-header><div class=meta><div class=date><span class=day>20</span>
<span class=rest>Oct 2023</span></div></div><div class=matter><h1 class=title>终端环境：zsh 主题自定义 powerlevel10k</h1></div></div><aside class="show-on-mobile toc" id=static-toc><header><h3>Contents</h3></header><nav id=TableOfContents><ol><li><a href=#什么是-powerlevel10k>什么是 powerlevel10k?</a></li><li><a href=#安装依赖字体>安装依赖字体</a></li><li><a href=#安装-powerlevel10k>安装 powerlevel10k</a></li><li><a href=#配置-powerlevel10k>配置 powerlevel10k</a><ol><li><a href=#前置问题>前置问题</a></li><li><a href=#开始配置>开始配置</a></li></ol></li><li><a href=#重新配置>重新配置</a></li><li><a href=#配置文件>配置文件</a></li><li><a href=#总结>总结</a></li></ol></nav></aside><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-15.png alt></p><p>不知道你是否想过自定义 Shell 提示符主题能带来的不仅是终端美观度的提升，还能通过视觉优化增强了工作效率呢？</p><p>在众多 shell 提示符主题中，Powerlevel10k 因为支持高度可定制和丰富的功能选，非常值得推荐。本文基于这个主题介绍 zsh 主题插件 powerlevel10k，包括它的安装和配置自定义。</p><div id=video-6200482573FmaWzqtWZ0 style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden></div><script>var r=new XMLHttpRequest;r.addEventListener("load",function(){container=document.getElementById("video-6200482573FmaWzqtWZ0"),data=JSON.parse(this.responseText),bb_id="620048257",yt_id="3FmaWzqtWZ0",data.country_code=="CN"||yt_id==0&&bb_id!=0?container.innerHTML='<iframe src="https://player.bilibili.com/player.html?aid='+bb_id+'&amp;page=1" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0;" allowfullscreen title="Bilibili Video" ></iframe > ':yt_id!=0&&(container.innerHTML='<iframe src="https://www.youtube.com/embed/'+yt_id+'"style="position:absolute;top:0;left:0;width:100%;height:100%; border:0;" title="YouTube video player" frameborder="0" allow="accelerometer;autoplay;clipboard-write;encrypted-media;gyroscope;picture-in-picture;web-share"allowfullscreen></iframe>')}),r.open("GET","https://ipapi.co/json/"),r.send()</script><h2 id=什么是-powerlevel10k>什么是 powerlevel10k?</h2><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-16.png alt></p><p>Powerlevel10 是一款 zsh 的主题，强调性能、灵活性和开箱即用，但同时自定义能力极强。前面介绍 zsh 轻量级框架 oh-my-zsh 时，提到过一些 zsh 主题，而通过 p10k（powerlevel10k 的简称）的自定义配置化能力，同样能配置出覆盖出之前主题的类似效果，当然相对而言，也更加强大。</p><p>效果展示：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-13.png alt></p><h2 id=安装依赖字体>安装依赖字体</h2><p>在安装 powerlevel10k 前，要先安装它依赖的字体：<a href=https://github.com/ryanoasis/nerd-fonts#font-installation>NerdFont</a>。不同系统下的安装方法，查看<a href=https://github.com/ryanoasis/nerd-fonts#font-installation>它的文档</a>。</p><p>简单说下 Nerd Fonts 字体。它是一系列开源字体的集合，被特别增强，它包含大量的图标和符号，如开发工具、编程语言和版本控制系统的图标。这些字体对于提高我们终端和编辑器的视觉体验和功能性有着极大帮助。</p><p>有了它，我们的终端才能显示一些复杂字体甚至是图标。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-14.png alt></p><p>MacOS 的话，可直接通过 Homebrew 快速安装：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew tap homebrew/cask-fonts
</span></span><span style=display:flex><span>brew install font-hack-nerd-font
</span></span></code></pre></td></tr></table></div></div><p>安装完成，配置终端字体，进入 iTerm2 Settings -> Profiles -> Text -> Font -> MesloLGS NF 即可。</p><p>现在，我们终端就支持 NerdFont 字体了。</p><p>如何测试？</p><p>接下来安装 Powerlevel10k 时，它会提示我们检查字体是否正确安装。</p><h2 id=安装-powerlevel10k>安装 powerlevel10k</h2><p>先通过如下的命令下载插件源码放到指定的位置。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone --depth<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> https://github.com/romkatv/powerlevel10k.git <span style=color:#e6db74>${</span>ZSH_CUSTOM<span style=color:#66d9ef>:-</span>$HOME/.oh-my-zsh/custom<span style=color:#e6db74>}</span>/themes/powerlevel10k
</span></span></code></pre></td></tr></table></div></div><p>在 <code>~/.zshrc</code> 配置启动 <code>powerlevel10k</code> 主题插件。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ZSH_THEME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;powerlevel10k/powerlevel10k&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>现在我们只要重新终端或执行 <code>source ~/.zshrc</code> 生效配置就会进入到配置向导流程中了。</p><h2 id=配置-powerlevel10k>配置 powerlevel10k</h2><p>终端将进入到 powerlevel10k 的配置向导后，我们通过回答问题来完成自定义的安装流程。这个流程有点繁琐，我将一步一步介绍，要跟着操作可能更有感觉吧。</p><h3 id=前置问题>前置问题</h3><p>首先，为了确认 NerdFont 字体安装成功，正式开始配置前，要先提出几个问题，识别图片是否如描述说的那样。我们回答后才能进入到主题的自定义。</p><p>这些问题有诸如：</p><ul><li>Does this look like a diamond (rotated square)? 这是看起来钻石吗？</li><li>Does this look like a lock? 这看起来是锁吗？</li><li>Does this look like an upwards arrow? 这看起来是向上箭头吗？</li></ul><p>等等。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-17.png alt>
<img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-18.png alt>
<img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-19.png alt></p><p>如果已经成功安装配置了字体，这些问题看起来就像逗傻子一样，按实际情况回答问题即可。如果字体安装成功，都是选择 &ldquo;Yes&rdquo; 即可。</p><h3 id=开始配置>开始配置</h3><p>进入到正式阶段，按步骤配置自己的提示符风格，下面一共 12 步，都是非常简单的回答问题。考虑到第一次配置，有懵逼的可能性，我把全部的步骤都列出来了。</p><p>选择提示符风格，分别是 Lean、Classic、Rainbow 和 Pure。我选风格 3，大众所爱的风格，彩虹 Rainbow，则输入 3。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-01.png alt></p><p>字符集设置，毫无疑问，配置 unicode，选择 1。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-02.png alt></p><p>提示符显示当前时间风格。我选择 1，只显示命令耗时，不显示当前时间。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-03.png alt></p><p>提示符分隔符，也就是 src/master 之间的符号风格。我钟爱箭头，选择 1 -> Angled.</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-04.png alt></p><p>提示符头部风格，就是 <code>master ></code> 的风格选择。毫无疑问，我钟爱箭头，选择 1 - Sharp。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-05.png alt></p><p>提示符尾部风格，钟爱箭头，但不是双箭头，选择 1 - Flat。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-06.png alt></p><p>提示符高度，显示一行还是两行，体验过两行，还是一行更紧凑一些，选择 1 - one line。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-07.png alt></p><p>两个命令键的间距，我喜欢两行离的近一点，选择 1 - Compact。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-08.png alt></p><p>提示符 Icons，多点 Icon 更帅，否则看起来就和一般主题没区别了，so 选择 2 - Many Icons。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-09.png alt></p><p>提示符丰富度，增加一些文本描述，帮助理解提示符中字符含义。还是简洁为美，毕竟空间不能占用太多，而且含义简单，无需文本辅助。我选择 1 - Consice。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-10.png alt></p><p>这是什么配置ne？提示符瞬闪？好像命令执行后提示符就立刻消失，只保留在最新的提示符，先选择 n - No 看看效果吧。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-11.png alt></p><p>提示符高性能模式，是否启用。推荐启用，就启用吧 1-verbose，如果发现有兼容问题，在重新配置 off。</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-12.png alt></p><p>到此基本全部的配置都已经完成，powerlevel10k 命令行提示符的最终效果，如下所示：</p><p><img src=https://cdn.jsdelivr.net/gh/poloxue/images@2023-10/2023-10-20-zsh-theme-powerlevel10k-13.png alt></p><h2 id=重新配置>重新配置</h2><p>在配置完成后，如果希望重新配置，重启整个流程，直接执行 <code>p10k configure</code> ，它会重新打开配置向导。</p><h2 id=配置文件>配置文件</h2><p>通过 powerlevel10k 的配置导航能快速自定义提示符的主题风格，但如想更细粒度的配置，可直接在 <code>$HOME/.p10k.zsh</code> 配置，配置导航只是最粗粒度的配置方式。</p><p>如配置提示符两侧内容，通过 <code>~/.p10k.sh</code> 中的变量 <code>POWERLEVEL9K_LEFT_PROMPT_ELEMENTS</code> 和 <code>POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS</code> 设置。</p><p>配置文件的内容，如下所示：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>typeset -g POWERLEVEL9K_LEFT_PROMPT_ELEMENTS<span style=color:#f92672>=(</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 操作系统图标</span>
</span></span><span style=display:flex><span>  os_icon       
</span></span><span style=display:flex><span>  <span style=color:#75715e># 当前目录</span>
</span></span><span style=display:flex><span>  dir           
</span></span><span style=display:flex><span>  <span style=color:#75715e># 版本控制信息</span>
</span></span><span style=display:flex><span>  vcs           
</span></span><span style=display:flex><span>  <span style=color:#75715e># 提示符</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># prompt_char </span>
</span></span><span style=display:flex><span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>typeset -g POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS<span style=color:#f92672>=(</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 最后一条命令的退出码 </span>
</span></span><span style=display:flex><span>  status                  
</span></span><span style=display:flex><span>  <span style=color:#75715e># 最后一条命令的执行时间</span>
</span></span><span style=display:flex><span>  command_execution_time  
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>  <span style=color:#75715e># 当前时间</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># time</span>
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span><span style=color:#f92672>)</span>
</span></span></code></pre></td></tr></table></div></div><p>前面配置时，设置了不显示当前时间，可以通过打开 <code>POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS</code> 中的 <code>time</code> 重新显示时间。</p><p>还有前面对提示符瞬闪的配置，transient 设置为 off。如果希望启用，同时有不重新经历一次配置向导，直接进入 <code>~/.p10k.zsh</code> 配置变量 <code>POWERLEVEL9K_TRANSIENT_PROMPT=always</code>，即可。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span><span style=color:#75715e># Transient prompt works similarly to the builtin transient_rprompt option. It trims down prompt</span>
</span></span><span style=display:flex><span><span style=color:#75715e># when accepting a command line. Supported values:</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   - off:      Don&#39;t change prompt when accepting a command line.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   - always:   Trim down prompt when accepting a command line.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   - same-dir: Trim down prompt when accepting a command line unless this is the first command</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#               typed after changing current working directory.</span>
</span></span><span style=display:flex><span>typeset -g POWERLEVEL9K_TRANSIENT_PROMPT<span style=color:#f92672>=</span>always
</span></span></code></pre></td></tr></table></div></div><p>Powerlevel10k 还进一步集成了对各种工具的支持，包括但不限于 npm、k8s、Python 和 Go。在 <code>~/.p10k.zsh</code> 中配置相应的提示元素，如 <code>node_version</code>、<code>kubecontext</code>、<code>python_version</code> 和 <code>go_version</code>。</p><p>这些都是位于 <code>POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS</code> 配置项下。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">65
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>typeset <span style=color:#f92672>-</span>g POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS<span style=color:#f92672>=</span>(
</span></span><span style=display:flex><span>  <span style=color:#75715e># ...</span>
</span></span><span style=display:flex><span>  virtualenv 
</span></span><span style=display:flex><span>  anaconda 
</span></span><span style=display:flex><span>  pyenv
</span></span><span style=display:flex><span>  goenv
</span></span><span style=display:flex><span>  nodenv
</span></span><span style=display:flex><span>  nvm
</span></span><span style=display:flex><span>  nodeenv
</span></span><span style=display:flex><span>  node_version
</span></span><span style=display:flex><span>  go_version
</span></span><span style=display:flex><span>  rust_version 
</span></span><span style=display:flex><span>  dotnet_version
</span></span><span style=display:flex><span>  php_version            
</span></span><span style=display:flex><span>  laravel_version        
</span></span><span style=display:flex><span>  java_version           
</span></span><span style=display:flex><span>  package                
</span></span><span style=display:flex><span>  rbenv                 
</span></span><span style=display:flex><span>  rvm                   
</span></span><span style=display:flex><span>  fvm                   
</span></span><span style=display:flex><span>  luaenv                
</span></span><span style=display:flex><span>  jenv                  
</span></span><span style=display:flex><span>  plenv                 
</span></span><span style=display:flex><span>  perlbrew              
</span></span><span style=display:flex><span>  phpenv               
</span></span><span style=display:flex><span>  scalaenv 
</span></span><span style=display:flex><span>  haskell_stack   
</span></span><span style=display:flex><span>  kubecontext      
</span></span><span style=display:flex><span>  terraform         
</span></span><span style=display:flex><span>  terraform_version   
</span></span><span style=display:flex><span>  aws                
</span></span><span style=display:flex><span>  aws_eb_env           
</span></span><span style=display:flex><span>  azure                 
</span></span><span style=display:flex><span>  gcloud                 
</span></span><span style=display:flex><span>  google_app_cred         
</span></span><span style=display:flex><span>  toolbox    
</span></span><span style=display:flex><span>  context     
</span></span><span style=display:flex><span>  nordvpn      
</span></span><span style=display:flex><span>  ranger        
</span></span><span style=display:flex><span>  nnn            
</span></span><span style=display:flex><span>  lf              
</span></span><span style=display:flex><span>  xplr             
</span></span><span style=display:flex><span>  vim_shell        
</span></span><span style=display:flex><span>  midnight_commander
</span></span><span style=display:flex><span>  nix_shell         
</span></span><span style=display:flex><span>  chezmoi_shell      
</span></span><span style=display:flex><span>  vpn_ip            
</span></span><span style=display:flex><span>  load                 
</span></span><span style=display:flex><span>  disk_usage           
</span></span><span style=display:flex><span>  ram                  
</span></span><span style=display:flex><span>  swap                  
</span></span><span style=display:flex><span>  todo                    
</span></span><span style=display:flex><span>  timewarrior             
</span></span><span style=display:flex><span>  taskwarrior             
</span></span><span style=display:flex><span>  per_directory_history   
</span></span><span style=display:flex><span>  cpu_arch              
</span></span><span style=display:flex><span>  time                  
</span></span><span style=display:flex><span>  newline
</span></span><span style=display:flex><span>  ip                    
</span></span><span style=display:flex><span>  public_ip            
</span></span><span style=display:flex><span>  proxy                 
</span></span><span style=display:flex><span>  battery               
</span></span><span style=display:flex><span>  wifi                 
</span></span><span style=display:flex><span>  example
</span></span><span style=display:flex><span>)
</span></span></code></pre></td></tr></table></div></div><p>这些配置让我们也可以在提示符中直观地看到当前环境的版本信息，以及 Kubernetes 上下文等关键信息，从而使我们的工作流程更加高效、直观。</p><p>这里只是简单介绍了 powerlevel10k 的配置。想了解它的更多能力，可以在 <code>~/.p10k.sh</code> 继续探索。</p><h2 id=总结>总结</h2><p>本文介绍了 powerlevel10k 的安装与配置。如果希望你命令行提示能给你提供更多信息，减少使用终端时的一些心智负担，如少执行几次版本，分支或所在上下文查询的命令，强烈推荐安装 powerlevel10k！</p><div>本文来源于 <a href=https://www.poloxue.com>POLOXUE's BLOG</a>，地址： <a href=https://www.poloxue.com/posts/2023-10-20-zsh-theme-powerlevel10k/>终端环境：zsh 主题自定义 powerlevel10k</a></div></div><nav class="hide-on-mobile section-nav"><nav id=TableOfContents><ol><li><a href=#什么是-powerlevel10k>什么是 powerlevel10k?</a></li><li><a href=#安装依赖字体>安装依赖字体</a></li><li><a href=#安装-powerlevel10k>安装 powerlevel10k</a></li><li><a href=#配置-powerlevel10k>配置 powerlevel10k</a><ol><li><a href=#前置问题>前置问题</a></li><li><a href=#开始配置>开始配置</a></li></ol></li><li><a href=#重新配置>重新配置</a></li><li><a href=#配置文件>配置文件</a></li><li><a href=#总结>总结</a></li></ol></nav></nav></div><div class=post><hr class=footer-separator><div class=tags><ul class=flat><li class=tag-li><a href=/tags/zsh>zsh</a></li></ul></div><div class=back><a href=https://www.poloxue.com/><span aria-hidden=true>← Back</span></a></div><div class=back></div></div><div class=post><img style=width:85% src=https://cdn.jsdelivr.net/gh/poloxue/images@main/wechat.png><div class=utterances></div><script src=https://utteranc.es/client.js repo=poloxue/blog issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div><div class="footer wrapper"><nav class=nav><div>2023 Polo Xue All rights reserved</div></nav></div><script>feather.replace()</script><script>var enableTruncate=!0,filterDepth=!1;const MAX_DEPTH=9;window.addEventListener("DOMContentLoaded",()=>{const e=new IntersectionObserver(e=>{e.reverse().forEach(e=>{const n=e.target.getAttribute("id");if(e.intersectionRatio>0){var t=document.querySelectorAll(`nav li a[href="#${n}"]`);t!=null&&t.forEach(e=>{if(e!=null){var t=getDepth(e.parentElement);filterDepth&&t<=MAX_DEPTH&&(clearActiveStatesInTableOfContents(),e.parentElement.classList.add("active"))}else filterDepth||(clearActiveStatesInTableOfContents(),e.parentElement.classList.add("active"))})}})});document.querySelectorAll("h1[id],h2[id],h3[id],h4[id]").forEach(t=>{e.observe(t)})});function isVisible(e){if(!(e instanceof Element))return!1;const n=getComputedStyle(e);if(n.display==="none")return!1;if(n.visibility!=="visible")return!1;if(n.opacity<.1)return!1;if(e.offsetWidth+e.offsetHeight+e.getBoundingClientRect().height+e.getBoundingClientRect().width===0)return!1;const t={x:e.getBoundingClientRect().left+e.offsetWidth/2,y:e.getBoundingClientRect().top+e.offsetHeight/2};if(t.x<0)return!1;if(t.x>(document.documentElement.clientWidth||window.innerWidth))return!1;if(t.y<0)return!1;if(t.y>(document.documentElement.clientHeight||window.innerHeight))return!1;let s=document.elementFromPoint(t.x,t.y);do if(s===e)return!0;while(s=s.parentNode)return!1}function clearActiveStatesInTableOfContents(){document.querySelectorAll("nav li").forEach(e=>{e.classList.remove("active")})}function getDepth(e){for(var t=0;e!==null&&e.tagName.toLowerCase()!=="ul";)t++,e=e.parentElement;return t}function navItems(){var e=document.querySelectorAll("nav nav li a");return Array.from(e).filter(e=>e.href!=null&&e.hash.startsWith("#"))}function lasItemInNavBarVisible(){var e=navItems().slice(-1)[0];return isVisible(e)}document.addEventListener("DOMContentLoaded",function(){if(!enableTruncate)return;var e=navItems();console.log(e),lasItemInNavBarVisible()||(filterDepth=!0,e.forEach(function(e){var t=getDepth(e.parentElement);t>MAX_DEPTH&&e.parentElement.classList.add("depth-nested")}))})</script></body></html>
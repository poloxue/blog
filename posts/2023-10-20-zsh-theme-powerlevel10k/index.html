<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>我的终端环境：与众不同的 zsh 主题 - powerlevel10k - POLOXUE's BLOG</title><meta name=viewport content="width=device-width,initial-scale=1"><meta itemprop=name content="我的终端环境：与众不同的 zsh 主题 - powerlevel10k"><meta itemprop=description content="本教程介绍如何安装 zsh 主题 powerlevel10k 的安装与配置。"><meta itemprop=datePublished content="2023-10-20T10:25:36+08:00"><meta itemprop=dateModified content="2023-10-20T10:25:36+08:00"><meta itemprop=wordCount content="376"><meta itemprop=keywords content="zsh,"><meta property="og:title" content="我的终端环境：与众不同的 zsh 主题 - powerlevel10k"><meta property="og:description" content="本教程介绍如何安装 zsh 主题 powerlevel10k 的安装与配置。"><meta property="og:type" content="article"><meta property="og:url" content="https://www.poloxue.com/posts/2023-10-20-zsh-theme-powerlevel10k/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-10-20T10:25:36+08:00"><meta property="article:modified_time" content="2023-10-20T10:25:36+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="我的终端环境：与众不同的 zsh 主题 - powerlevel10k"><meta name=twitter:description content="本教程介绍如何安装 zsh 主题 powerlevel10k 的安装与配置。"><script data-goatcounter=https://poloxue.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/main.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/extra.css><link id=dark-scheme rel=stylesheet type=text/css href=https://www.poloxue.com/css/dark.css><script src=https://www.poloxue.com/js/feather.min.js></script>
<script src=https://www.poloxue.com/js/main.js></script></head><body><div class="container wrapper"><div class=header><div class=avatar><a href=https://www.poloxue.com/><img src=/avatar.png alt="POLOXUE's BLOG"></a></div><h1 class=site-title><a href=https://www.poloxue.com/>POLOXUE's BLOG</a></h1><div class=site-description><nav class="nav social"><ul class=flat><li><a href=https://github.com/poloxue/ title=Github><i data-feather=github></i></a></li><li><a href=/posts/index.xml title=RSS><i data-feather=rss></i></a></li><span class=scheme-toggle><a href=# id=scheme-toggle></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>HOME</a></li><li><a href=/posts>POSTS</a></li><li><a href=/tags>TAGS</a></li><li><a href=/courses>COURSES</a></li><li><a href=/about/>ABOUT</a></li></ul></nav></div><div class=post><div class=post-header><div class=meta><div class=date><span class=day>20</span>
<span class=rest>Oct 2023</span></div></div><div class=matter><h1 class=title>我的终端环境：与众不同的 zsh 主题 - powerlevel10k</h1></div></div><div id=video-1698475757 style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden></div><script>var r=new XMLHttpRequest;r.addEventListener("load",function(){container=document.getElementById("video-1698475757"),data=JSON.parse(this.responseText),bb_id="620048257",yt_id="3FmaWzqtWZ0",data.country_code=="CN"||yt_id==0&&bb_id!=0?container.innerHTML='<iframe src="https://player.bilibili.com/player.html?aid='+bb_id+'&amp;page=1" style="position:absolute;top:0;left:0;width:100%;height:100%;border:0;" allowfullscreen title="Bilibili Video" ></iframe > ':yt_id!=0&&(container.innerHTML='<iframe src="https://www.youtube.com/embed/'+yt_id+'"style="position:absolute;top:0;left:0;width:100%;height:100%; border:0;" title="YouTube video player" frameborder="0" allow="accelerometer;autoplay;clipboard-write;encrypted-media;gyroscope;picture-in-picture;web-share"allowfullscreen></iframe>')}),r.open("GET","https://ipapi.co/json/"),r.send()</script><p>本文介绍 zsh 主题 powerlevel10k 的安装与配置。</p><h2 id=什么是-powerlevel10k>什么是 powerlevel10k?</h2><p>Powerlevel10 是一款 zsh 的主题，它强调性能、灵活性和开箱即用。之前，我已经介绍了一些 zsh 主题，而通过 p10k（powerlevel10k 的简称）的可配置化能力，同样能配置出覆盖出之前主题的类似效果。</p><image src=https://cdn.jsdelivr.net/gh/poloxue/images@latest/2023-10-20-zsh-theme-powerlevel10k-13.png><blockquote><p>系列阅读：</p><ul><li><a href=https://www.poloxue.com/posts/2023-09-25-install-iterm2-as-my-developing-environment/>我的终端环境：iTerm2 的安装与体验</a></li><li><a href=https://poloxue.com/posts/2023-10-16-zsh-themes-and-plugins/>我的终端环境：zsh 安装与主题，推荐 7 个提升效率的 zsh 插件</a></li><li><a href=https://www.poloxue.com/posts/2023-10-19-zsh-6-powerful-plugins/>我的终端环境：6 个强大的 zsh 插件</a></li><li><a href=https://www.poloxue.com/posts/2023-10-20-zsh-theme-powerlevel10k/>我的终端环境：与众不同的 zsh 主题 - powerlevel10k</a></li><li><a href=https://www.poloxue.com/posts/2023-10-28-high-productivity-shell-commands-part1/>我的终端环境：高效 shell 命令（一）之目录文件命令 exa、zoxide 与 bat</a></li></ul><p>更多待续&mldr;</p></blockquote><h2 id=nerdfont-字体安装>NerdFont 字体安装</h2><p>安装 powerlevel10k 前，先安装它依赖的字体：<a href=https://github.com/ryanoasis/nerd-fonts#font-installation>NerdFont</a>。不同系统的安装方法，可查看<a href=https://github.com/ryanoasis/nerd-fonts#font-installation>它的文档</a>。</p><p>MacOS 的话，可直接通过 Homebrew 快速安装：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew tap homebrew/cask-fonts
</span></span><span style=display:flex><span>brew install font-hack-nerd-font
</span></span></code></pre></td></tr></table></div></div><p>安装完成，配置终端字体，进入 iTerm2 Settings -> Profiles -> Text -> Font -> MesloLGS NF 即可。</p><h2 id=安装-powerlevel10k>安装 powerlevel10k</h2><p>通过如下命令 下载：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone --depth<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> https://github.com/romkatv/powerlevel10k.git <span style=color:#e6db74>${</span>ZSH_CUSTOM<span style=color:#66d9ef>:-</span>$HOME/.oh-my-zsh/custom<span style=color:#e6db74>}</span>/themes/powerlevel10k
</span></span></code></pre></td></tr></table></div></div><p>配置 <code>~/.zshrc</code>，启用 <code>powerlevel10k</code> 主题：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ZSH_THEME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;powerlevel10k/powerlevel10k&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>重新终端，或执行 <code>source ~/.zshrc</code> 生效配置。</p><h2 id=配置-powerlevel10k>配置 powerlevel10k</h2><p>执行 <code>source ~/.zshrc</code> 后，终端将进入到 powerlevel10k 的配置向导。</p><h3 id=前置问题>前置问题</h3><p>为了确认字体安装是否成功，在正式开始配置前，要先回答几个问题才能进入到主题的自定义向导。</p><p>问题有诸如：</p><ul><li>Does this look like a diamond (rotated square)? 这是看起来钻石吗？</li><li>Does this look like a lock? 这看起来是锁吗？</li><li>Does this look like an upwards arrow? 这看起来是向上箭头吗？</li></ul><p>等等。</p><p>如果字体已经配置成功，这些问题看起来就像逗傻子一样，按实际情况回答问题即可。一般情况下，都是选择 &ldquo;Yes&rdquo;。</p><h3 id=开始配置>开始配置</h3><p>进入到正式阶段，按步骤配置自己的提示符风格，下面一共 12 步，都是非常简单的回答问题。考虑到第一次配置，有懵逼的可能性，我把全部的步骤都列出来了。</p><ol><li>选择提示符风格，分别是 Lean、Classic、Rainbow 和 Pure。我选风格 3，大众所爱的风格，彩虹 Rainbow，则输入 3。</li></ol><image src=https://cdn.jsdelivr.net/gh/poloxue/images@latest/2023-10-20-zsh-theme-powerlevel10k-01.png><ol start=2><li>字符集设置，毫无疑问，配置 unicode，选择 1。</li></ol><image src=https://cdn.jsdelivr.net/gh/poloxue/images@latest/2023-10-20-zsh-theme-powerlevel10k-02.png><ol start=3><li>提示符显示当前时间风格。我选择 1，只显示命令耗时，不显示当前时间。</li></ol><image src=https://cdn.jsdelivr.net/gh/poloxue/images@latest/2023-10-20-zsh-theme-powerlevel10k-03.png><ol start=4><li>提示符分隔符，也就是 src/master 之间的符号风格。我钟爱箭头，选择 1 -> Angled.</li></ol><image src=https://cdn.jsdelivr.net/gh/poloxue/images@latest/2023-10-20-zsh-theme-powerlevel10k-04.png><ol start=5><li>提示符头部风格，就是 <code>master ></code> 的风格选择。毫无疑问，我钟爱箭头，选择 1 - Sharp。</li></ol><image src=https://cdn.jsdelivr.net/gh/poloxue/images@latest/2023-10-20-zsh-theme-powerlevel10k-05.png><ol start=6><li>提示符尾部风格，钟爱箭头，但不是双箭头，选择 1 - Flat。</li></ol><image src=https://cdn.jsdelivr.net/gh/poloxue/images@latest/2023-10-20-zsh-theme-powerlevel10k-06.png><ol start=7><li>提示符高度，显示一行还是两行，体验过两行，还是一行更紧凑一些，选择 1 - one line。</li></ol><image src=https://cdn.jsdelivr.net/gh/poloxue/images@latest/2023-10-20-zsh-theme-powerlevel10k-07.png><ol start=8><li>两个命令键的间距，我喜欢两行离的近一点，选择 1 - Compact。</li></ol><image src=https://cdn.jsdelivr.net/gh/poloxue/images@latest/2023-10-20-zsh-theme-powerlevel10k-08.png><ol start=9><li>提示符 Icons，多点 Icon 更帅，否则看起来就和一般主题没区别了，so 选择 2 - Many Icons。</li></ol><image src=https://cdn.jsdelivr.net/gh/poloxue/images@latest/2023-10-20-zsh-theme-powerlevel10k-09.png><ol start=10><li>提示符丰富度，增加一些文本描述，帮助理解提示符中字符含义。还是简洁为美，毕竟空间不能占用太多，而且含义简单，无需文本辅助。我选择 1 - Consice。</li></ol><image src=https://cdn.jsdelivr.net/gh/poloxue/images@latest/2023-10-20-zsh-theme-powerlevel10k-10.png><ol start=11><li>这是什么配置？提示符瞬闪？好像命令执行后提示符就立刻消失，只保留在最新的提示符，先选择 n - No 看看效果吧。</li></ol><image src=https://cdn.jsdelivr.net/gh/poloxue/images@latest/2023-10-20-zsh-theme-powerlevel10k-11.png><ol start=12><li>提示符高性能模式，是否启用。推荐启用，就启用吧 1-verbose，如果发现有兼容问题，在重新配置 off。</li></ol><image src=https://cdn.jsdelivr.net/gh/poloxue/images@latest/2023-10-20-zsh-theme-powerlevel10k-12.png><p>到此基本全部的配置都已经完成，powerlevel10k 命令行提示符的最终效果，如下所示：</p><image src=https://cdn.jsdelivr.net/gh/poloxue/images@latest/2023-10-20-zsh-theme-powerlevel10k-13.png><p>配置完成后，如果希望重新配置，执行 <code>p10k configure</code> 会重新打开配置向导。</p><h2 id=配置文件>配置文件</h2><p>通过 powerlevel10k 的配置导航能快速自定义提示符的主题风格，但如想更细粒度的配置，可直接在 <code>$HOME/.p10k.zsh</code> 配置，配置导航只是最粗粒度的配置方式。</p><p>如配置提示符两侧内容，通过 <code>~/.p10k.sh</code> 中的变量 <code>POWERLEVEL9K_LEFT_PROMPT_ELEMENTS</code> 和 <code>POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS</code> 设置。</p><p>如下所示：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>typeset -g POWERLEVEL9K_LEFT_PROMPT_ELEMENTS<span style=color:#f92672>=(</span>
</span></span><span style=display:flex><span>  os_icon                 <span style=color:#75715e># os identifier</span>
</span></span><span style=display:flex><span>  dir                     <span style=color:#75715e># current directory</span>
</span></span><span style=display:flex><span>  vcs                     <span style=color:#75715e># git status</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># prompt_char           # prompt symbol</span>
</span></span><span style=display:flex><span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>typeset -g POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS<span style=color:#f92672>=(</span>
</span></span><span style=display:flex><span>  status                  <span style=color:#75715e># exit code of the last command</span>
</span></span><span style=display:flex><span>  command_execution_time  <span style=color:#75715e># duration of the last command</span>
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>  <span style=color:#75715e># time                  # current time</span>
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span><span style=color:#f92672>)</span>
</span></span></code></pre></td></tr></table></div></div><p>如前面配置的时候，设置了不显示当前时间，现在可以通过打开 <code>POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS</code> 中的 <code>time</code> 就可重新显示命令的时间。</p><p>还有前面对提示符瞬闪的配置，transient 设置为 off。如果希望启用，同时有不重新经历一次配置向导，直接进入 <code>~/.p10k.zsh</code> 配置变量 <code>POWERLEVEL9K_TRANSIENT_PROMPT=always</code>，即可。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span><span style=color:#75715e># Transient prompt works similarly to the builtin transient_rprompt option. It trims down prompt</span>
</span></span><span style=display:flex><span><span style=color:#75715e># when accepting a command line. Supported values:</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   - off:      Don&#39;t change prompt when accepting a command line.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   - always:   Trim down prompt when accepting a command line.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   - same-dir: Trim down prompt when accepting a command line unless this is the first command</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#               typed after changing current working directory.</span>
</span></span><span style=display:flex><span>typeset -g POWERLEVEL9K_TRANSIENT_PROMPT<span style=color:#f92672>=</span>always
</span></span></code></pre></td></tr></table></div></div><h2 id=总结>总结</h2><p>本文介绍了 powerlevel10k 的安装与配置，它的更多能力还可以在 <code>~/.p10k.sh</code> 继续探索，诸如对诸多其他工具的支持。</p><p>最后，如果希望你命令行提示能给你提供更多信息，请安装 powerlevel10k！</p><p>我的博文：<a href=https://www.poloxue.com/posts/2023-10-20-zsh-theme-powerlevel10k/>我的终端环境：与众不同的 zsh 主题 - powerlevel10k</a></p><hr class=footer-separator><div class=tags><ul class=flat><li class=tag-li><a href=/tags/zsh>zsh</a></li></ul></div><div class=back><a href=https://www.poloxue.com/><span aria-hidden=true>← Back</span></a></div><div class=back></div></div><div class=utterances></div><script src=https://utteranc.es/client.js repo=poloxue/blog issue-term=pathname theme=github-light crossorigin=anonymous async></script></div><div class="footer wrapper"><nav class=nav><div>2023 Polo Xue All rights reserved</div></nav></div><script>feather.replace()</script></body></html>
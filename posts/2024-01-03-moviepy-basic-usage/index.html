<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Python 视频剪辑库 - MoviePy 的基础使用 - POLOXUE's BLOG</title><meta name=viewport content="width=device-width,initial-scale=1"><meta itemprop=name content="Python 视频剪辑库 - MoviePy 的基础使用"><meta itemprop=description content="本视频将讨论的内容，介绍一个名为 MoviePy 的 Python 库，希望它能简化一些流程化的视频创作过程。本文是起始篇。"><meta itemprop=datePublished content="2024-01-03T17:41:45+08:00"><meta itemprop=dateModified content="2024-01-03T17:41:45+08:00"><meta itemprop=wordCount content="183"><meta itemprop=keywords content><meta property="og:title" content="Python 视频剪辑库 - MoviePy 的基础使用"><meta property="og:description" content="本视频将讨论的内容，介绍一个名为 MoviePy 的 Python 库，希望它能简化一些流程化的视频创作过程。本文是起始篇。"><meta property="og:type" content="article"><meta property="og:url" content="https://www.poloxue.com/posts/2024-01-03-moviepy-basic-usage/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-03T17:41:45+08:00"><meta property="article:modified_time" content="2024-01-03T17:41:45+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Python 视频剪辑库 - MoviePy 的基础使用"><meta name=twitter:description content="本视频将讨论的内容，介绍一个名为 MoviePy 的 Python 库，希望它能简化一些流程化的视频创作过程。本文是起始篇。"><script data-goatcounter=https://poloxue.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/main.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/extra.css><link id=dark-scheme rel=stylesheet type=text/css href=https://www.poloxue.com/css/dark.css><script src=https://www.poloxue.com/js/feather.min.js></script>
<script src=https://www.poloxue.com/js/main.js></script></head><body><div class="container wrapper"><div class=header><div class=avatar><a href=https://www.poloxue.com/><img src=/avatar.png alt="POLOXUE's BLOG"></a></div><h1 class=site-title><a href=https://www.poloxue.com/>POLOXUE's BLOG</a></h1><div class=site-description><nav class="nav social"><ul class=flat><li><a href=https://github.com/poloxue/ title=Github><i data-feather=github></i></a></li><li><a href=/posts/index.xml title=RSS><i data-feather=rss></i></a></li><span class=scheme-toggle><a href=# id=scheme-toggle></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>首页</a></li><li><a href=/posts>文章列表</a></li><li><a href=/tags>分类标签</a></li><li><a href=/about/>关于我</a></li></ul></nav></div><div class=post><div class=post-header><div class=meta><div class=date><span class=day>03</span>
<span class=rest>Jan 2024</span></div></div><div class=matter><h1 class=title>Python 视频剪辑库 - MoviePy 的基础使用</h1></div></div><p>短视频时代，有许多用户友好的剪辑软件可选择。而对于某些专门的视频，如电子书演示或漫画朗读，自动化简化视频制作对于提高效率至关重要。</p><p>这是本视频将讨论的内容。我们将利用一个名为 MoviePy 的 Python 库自动化您的视频制作过程。</p><p>本教程中，我们将探索 MoviePy 的功能，展示它如何通过一些简单的 Python 代码简化视频剪辑。</p><p>让我们开始吧。</p><h2 id=安装>安装</h2><p>要使用 MoviePy，首先需要进行安装。</p><p>我们可以使用 Python 的包管理器 - pip 来完成这一步。让我们打开终端并执行 pip install moviepy。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install moviepy
</span></span></code></pre></td></tr></table></div></div><p>必要的依赖项，如 ffmpeg，将会自动安装。</p><p>如果你想要创建文本片段，你将需要 imagemagick。你可以轻松使用 HomeBrew 进行安装。执行命令：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew install imagemagick
</span></span></code></pre></td></tr></table></div></div><p>另一个重要的依赖是 pygame，特别适用于预览正在创建的视频。这很重要，因为生成新视频可能需要一些时间。如果您希望在制作过程中预览您的工作，您将需要安装 pygame。</p><p>当然！要安装 pygame，你可以在终端中执行:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install pygame
</span></span></code></pre></td></tr></table></div></div><p>现在，MoviePy 的安装已经完成。让我们继续下一步 - 了解如何使用 MoviePy 编写代码。</p><h2 id=示例>示例</h2><p>当然！为了演示如何使用 MoviePy，让我们创建一个文件，展示示例。</p><p>在 MoviePy 中，要访问所有必要的函数和类，你只需输入：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> moviepy.editor <span style=color:#f92672>import</span> <span style=color:#f92672>*</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=调整大小>调整大小</h3><p>我当前目录中有一个大小为 808x440 的视频文件。可以使用 VideoFileClip 大小属性检查尺寸。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>video <span style=color:#f92672>=</span> VideoFileClip(<span style=color:#e6db74>&#34;input_video.mp4&#34;</span>)
</span></span><span style=display:flex><span>print(video<span style=color:#f92672>.</span>size)
</span></span></code></pre></td></tr></table></div></div><p>让我们从简单调整视频大小开始。</p><p>我们可以用一行代码轻松实现这个目标。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>video<span style=color:#f92672>.</span>resize(width<span style=color:#f92672>=</span><span style=color:#ae81ff>404</span>, height<span style=color:#f92672>=</span><span style=color:#ae81ff>240</span>)
</span></span></code></pre></td></tr></table></div></div><p>你可以看到我调用 video.resize 就将视频调整为 404x240 像素。</p><p>将其保存为 &ldquo;resized_video.mp4&rdquo;。调用 write video file 方法。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>video<span style=color:#f92672>.</span>write_videofile(<span style=color:#e6db74>&#34;resized_video.mp4&#34;</span>)
</span></span></code></pre></td></tr></table></div></div><p>完成之后，可检查结果是否符合期望。</p><h3 id=旋转>旋转</h3><p>我们也可以使用 MoviePy 旋转视频。</p><p>编写代码如下：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>video <span style=color:#f92672>=</span> video<span style=color:#f92672>.</span>rotate(<span style=color:#ae81ff>180</span>)
</span></span></code></pre></td></tr></table></div></div><p>这段代码将使用简单的 video.rotate 方法将视频旋转 180 度。我们将旋转后的版本保存为 &ldquo;rotated_video.mp4&rdquo;。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>video<span style=color:#f92672>.</span>write_videofile(<span style=color:#e6db74>&#34;rotated_video.mp4&#34;</span>)
</span></span></code></pre></td></tr></table></div></div><p>打开旋转后的视频会发现视频已经颠倒了。</p><h3 id=片段剪辑>片段剪辑</h3><p>使用 MoviePy，从长视频中剪切出一个短视频非常简单。</p><p>写一段代码。我们使用 subclip 方法剪切从第 5 秒到第 15 秒的视频。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>video<span style=color:#f92672>.</span>subclip(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>15</span>)<span style=color:#f92672>.</span>write_videofile(<span style=color:#e6db74>&#34;subclip_5_15_video.mp4&#34;</span>)
</span></span></code></pre></td></tr></table></div></div><p>然后将剪切版本保存为 &ldquo;subclip_5_15_video.mp4&rdquo;。</p><p>当然，ffmpeg 可以使用以下命令来完成，但显然要复杂些。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ffmpeg -i input_video.mp4 -ss 00:00:05 -t <span style=color:#ae81ff>10</span> -c:v copy -c:a copy subclip_5_15_video.mp4
</span></span></code></pre></td></tr></table></div></div><h2 id=导出-gif>导出 GIF</h2><p>如果我们想从视频中创建一个 GIF，我们也可以做到！</p><p>例如，让我们使用 MoviePy 从视频段创建一个 GIF：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>video<span style=color:#f92672>.</span>subclip(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>15</span>)<span style=color:#f92672>.</span>resize(width<span style=color:#f92672>=</span><span style=color:#ae81ff>404</span>)<span style=color:#f92672>.</span>rotate(<span style=color:#ae81ff>180</span>)<span style=color:#f92672>.</span>to_gif(<span style=color:#e6db74>&#34;output_video.gif&#34;</span>)
</span></span></code></pre></td></tr></table></div></div><p>我们从第 5 秒到第 15 秒提取视频片段，然后将其调整为 404 像素宽度并旋转 180 度。使用 to_gif 方法将其转换为名为 &ldquo;output.gif&rdquo; 的 GIF。</p><p>最后，让我们来看看 MoviePy 官方文档中的一些复杂示例。</p><ul><li><a href="https://www.youtube.com/watch?v=rIehsqqYFEM">Cup Song</a></li><li><a href="https://www.youtube.com/watch?v=1hdgNxX-ta">视频布局</a></li><li><a href="https://www.youtube.com/watch?v=zGhoZ4UBxEQ">马赛克追踪</a></li><li><a href="https://www.youtube.com/watch?v=M9R21SquDSk">3D 效果</a></li></ul><p>好了，以上就是今天的视频内容，我们涵盖了 MoviePy 的一些简单示例。</p><p>如果你有兴趣进一步探索 MoviePy 的高级功能，请关注我的博客。</p><hr class=footer-separator><div class=tags></div><div class=back><a href=https://www.poloxue.com/><span aria-hidden=true>← Back</span></a></div><div class=back></div></div><div class=utterances></div><script src=https://utteranc.es/client.js repo=poloxue/blog issue-term=pathname theme=github-light crossorigin=anonymous async></script></div><div class="footer wrapper"><nav class=nav><div>2024 Polo Xue All rights reserved</div></nav></div><script>feather.replace()</script></body></html>
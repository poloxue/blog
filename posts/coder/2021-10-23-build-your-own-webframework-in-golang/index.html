<!doctype html><html lang=zh-cn><head><title>从头构建 Go Web 框架（一）：介绍 // POLOXUE's 博客频道</title><link rel="shortcut icon" href=/favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.117.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="POLO XUE"><meta name=description content><link rel=stylesheet href=/css/main.min.793141cb28d4ed7f0c313c54678b45746c45defce0221a9dfc49283ab3049c77.css><link rel=alternate type=application/rss+xml href=https://www.poloxue.com/index.xml title="POLOXUE's 博客频道" description="欢迎订阅 POLOXUE's 的博客频道"><meta name=twitter:card content="summary"><meta name=twitter:title content="从头构建 Go Web 框架（一）：介绍"><meta name=twitter:description content="本文写于 2014 年，对于 golang 十几年的发展历程而言，这已经是古董级别的一篇文章了，但通用的思想概念依然没有变。
我希望通过这个系列文章，让大家都现有的 Go Web 框架能有更深的认识。
访问：原文地址，译文如下：
Martini 发布之后，迅速成为了最受大家欢迎的 Go 语言 Web 框架，且现在依旧是如此。但必须指出的是，它不符合常规习惯，非常慢，概念也有不足。它教了我们一堆错误的做法。但因为它上手容易，许多开发人员仍在使用。
似乎是存在即合理！
我决定写一系列文章，基于现有库从头编写组件来构建自己的 Web 框架。在开始前，我搜罗和阅读了市面上绝大部分关于如何编写 Go Web 应用的资料。我希望，通过系列文章能教授 Go Web 开发人员一些最佳实践，同时能提醒老 Go 开发人员什么才是 Web 开发的最佳实践。
注：每个项目都是具有独特性的，最佳实践并非适用于所有场景。
概要 本系列不仅能让你了解 Go 中 Web 开发的最佳实践，还会让你了解其他常见问题的解决方案及如何正确运用。
第 1 部分：简介 第 2 部分：Go 中间件：最佳实践和示例 第 3 部分：中间件数据共享 第 4 部分：第三方路由 第 5 部分：使用 MongoDB 实现 JSON-API 附加福利：上传文件到 s3 框架该具备什么能力 市面主要有两种类型的 Web 框架。
一种是内置所有功能，类似 Rails 的框架，能帮你快速构建与引导项目。Go 中类似框架有：Beego 和 Revel。
另一种，类似于 Sinatra 的框架，提供路由和一些内置功能，但不会提供 ORM 等功能。 多数 Go 框架都采用了这种风格，如 Martini、Goji、gocraft/web 等。"><meta property="og:title" content="从头构建 Go Web 框架（一）：介绍"><meta property="og:description" content="本文写于 2014 年，对于 golang 十几年的发展历程而言，这已经是古董级别的一篇文章了，但通用的思想概念依然没有变。
我希望通过这个系列文章，让大家都现有的 Go Web 框架能有更深的认识。
访问：原文地址，译文如下：
Martini 发布之后，迅速成为了最受大家欢迎的 Go 语言 Web 框架，且现在依旧是如此。但必须指出的是，它不符合常规习惯，非常慢，概念也有不足。它教了我们一堆错误的做法。但因为它上手容易，许多开发人员仍在使用。
似乎是存在即合理！
我决定写一系列文章，基于现有库从头编写组件来构建自己的 Web 框架。在开始前，我搜罗和阅读了市面上绝大部分关于如何编写 Go Web 应用的资料。我希望，通过系列文章能教授 Go Web 开发人员一些最佳实践，同时能提醒老 Go 开发人员什么才是 Web 开发的最佳实践。
注：每个项目都是具有独特性的，最佳实践并非适用于所有场景。
概要 本系列不仅能让你了解 Go 中 Web 开发的最佳实践，还会让你了解其他常见问题的解决方案及如何正确运用。
第 1 部分：简介 第 2 部分：Go 中间件：最佳实践和示例 第 3 部分：中间件数据共享 第 4 部分：第三方路由 第 5 部分：使用 MongoDB 实现 JSON-API 附加福利：上传文件到 s3 框架该具备什么能力 市面主要有两种类型的 Web 框架。
一种是内置所有功能，类似 Rails 的框架，能帮你快速构建与引导项目。Go 中类似框架有：Beego 和 Revel。
另一种，类似于 Sinatra 的框架，提供路由和一些内置功能，但不会提供 ORM 等功能。 多数 Go 框架都采用了这种风格，如 Martini、Goji、gocraft/web 等。"><meta property="og:type" content="article"><meta property="og:url" content="https://www.poloxue.com/posts/coder/2021-10-23-build-your-own-webframework-in-golang/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-10-23T20:33:14+08:00"><meta property="article:modified_time" content="2021-10-23T20:33:14+08:00"><script data-goatcounter=https://poloxue.goatcounter.com/count async src=//gc.zgo.at/count.js></script></head><body><header class=app-header><a href=https://www.poloxue.com><img class=app-header-avatar src=/avatar.webp alt="POLO XUE"></a>
<span class=app-header-title>POLOXUE's 博客频道</span><nav class=app-header-menu><a class=app-header-menu-item href=/>首页</a><br><a class=app-header-menu-item href=/posts/coder>编程杂谈</a><br><a class=app-header-menu-item href=/posts/trader>交易人生</a><br><a class=app-header-menu-item href=/about/>关于我</a></nav><p>技术生活随笔记录</p></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>从头构建 Go Web 框架（一）：介绍</h1><div class=post-meta><div><span><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Oct 23, 2021&nbsp;</span>
<span><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>1 min read &nbsp;</span>
<span><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-eye"><title>eye</title><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg><span id=83db9bd8da89d737a8971145dc91423d title>0 views</span>
<script>var r=new XMLHttpRequest;r.addEventListener("load",function(){document.getElementById("83db9bd8da89d737a8971145dc91423d").innerText=JSON.parse(this.responseText).count_unique+" views"}),r.open("GET","https://poloxue.goatcounter.com/counter/"+encodeURIComponent("/posts/coder/2021-10-23-build-your-own-webframework-in-golang/".replace(/(\/)?$/,""))+".json"),r.send()</script>&nbsp;</span>
<span><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg><a class=tag href=https://www.poloxue.com/tags/golang/>Golang</a></span></div></div></header><div class=post-content><p>本文写于 2014 年，对于 golang 十几年的发展历程而言，这已经是古董级别的一篇文章了，但通用的思想概念依然没有变。</p><p>我希望通过这个系列文章，让大家都现有的 Go Web 框架能有更深的认识。</p><p>访问：<a href=https://www.nicolasmerouze.com/build-web-framework-golang>原文地址</a>，译文如下：</p><p><a href=https://github.com/go-martin/martini>Martini</a> 发布之后，迅速成为了最受大家欢迎的 Go 语言 Web 框架，且现在依旧是如此。但必须指出的是，它不符合常规习惯，非常慢，概念也有不足。它教了我们一堆错误的做法。但因为它上手容易，许多开发人员仍在使用。</p><p>似乎是存在即合理！</p><p>我决定写一系列文章，基于现有库从头编写组件来构建自己的 Web 框架。在开始前，我搜罗和阅读了市面上绝大部分关于如何编写 Go Web 应用的资料。我希望，通过系列文章能教授 Go Web 开发人员一些最佳实践，同时能提醒老 Go 开发人员什么才是 Web 开发的最佳实践。</p><p>注：每个项目都是具有独特性的，最佳实践并非适用于所有场景。</p><h1 id=概要>概要</h1><p>本系列不仅能让你了解 Go 中 Web 开发的最佳实践，还会让你了解其他常见问题的解决方案及如何正确运用。</p><ul><li><a href=https://www.nicolasmerouze.com/build-web-framework-golang>第 1 部分：简介</a></li><li><a href=https://www.nicolasmerouze.com/middlewares-golang-best-practices-examples>第 2 部分：Go 中间件：最佳实践和示例</a></li><li><a href=https://www.nicolasmerouze.com/share-values-between-middlewares-context-golang>第 3 部分：中间件数据共享</a></li><li><a href=https://www.nicolasmerouze.com/guide-routers-golang>第 4 部分：第三方路由</a></li><li><a href=https://www.nicolasmerouze.com/how-to-render-json-api-golang-mongodb>第 5 部分：使用 MongoDB 实现 JSON-API</a></li><li><a href=https://www.nicolasmerouze.com/file-upload-web-service-golang-s3-aws>附加福利：上传文件到 s3</a></li></ul><h2 id=框架该具备什么能力>框架该具备什么能力</h2><p>市面主要有两种类型的 Web 框架。</p><p>一种是内置所有功能，类似 Rails 的框架，能帮你快速构建与引导项目。Go 中类似框架有：Beego 和 Revel。</p><p>另一种，类似于 Sinatra 的框架，提供路由和一些内置功能，但不会提供 ORM 等功能。 多数 Go 框架都采用了这种风格，如 Martini、Goji、gocraft/web 等。</p><h2 id=框架与库>框架与库</h2><p>最近，发生了一场争论，主题是，我们究竟是使用框架还是使用库呢？</p><p>首先，我不反对框架，但 Go 有很棒的小包，能帮助我们非常容易地制作出自己的框架。特别是长期项目，自己动手是更明智的选择。如果你想学习围棋，最好了解一切是如何运作的。</p><p>争论详情查看以下文章：</p><p><a href=https://richardeng.medium.com/the-case-for-go-web-frameworks-a791fcd79d47>The Case for Go Web Frameworks</a>
<a href=https://dave.cheney.net/2014/10/26/go-frameworks-and-ludditry>Go, frameworks, and Ludditry</a>
<a href=https://www.evanjones.ca/frameworks-necessary-for-large-scale-software.html>Frameworks: Necessary for large-scale software</a>
<a href=https://stephensearles.com/framework-vs-library/>Framework vs Library</a></p><h1 id=框架功能>框架功能</h1><p>我们将专注于后一种类型，因为涵盖 Beego 或 Revel 中的每个功能将意味着针对该主题编写一整本书！</p><p>框架主要包含 3 个部分，分别是：</p><ul><li>一是 router，负责接收 request 并路由到指定 handler；</li><li>二是 middleware，handler 前后新增的复用性代码；</li><li>三是 handler 处理程序，负责处理请求并写入响应。</li></ul><p>常见的中间件 Middleware：</p><ul><li>error/panic</li><li>logging</li><li>security</li><li>sessions</li><li>cookies</li><li>body parsing</li></ul><h1 id=go-web-框架现状>Go Web 框架现状</h1><p>现在，许多 Go Web 框架的问题在于，它们的组件仅适用于自身，是不可替换的。</p><p>假设现在有这样一些小包，只有路由器，或只有中间件系统，或者只有中间件，且它们彼此兼容，我们就可以将它们组合使用。 但现实是，这类项目数量极少，除了 Gorilla 之外，基本没什么知名度。当然，即使是 Gorilla，在 Github 上的追随者与其他大多数其他框架，依然少很多。</p><p>Go 的 Middleware 系统并没有统一的约定惯例。与 Ruby (Rack)、Node.js (Connect.js)、Clojure (Ring) 和其他语言不同。 每个框架，如 Negroni、Goji、Gin、gocraft/web 等，都在重新定义自己的中间件工作方式，重用开源中间件变得不可能。</p><p>什么才是新开发人员的最佳实践？</p></div><div class=post-footer><div class=utterances></div><script src=https://utteranc.es/client.js repo=poloxue/blog issue-term=pathname theme=github-dark crossorigin=anonymous async></script></div></article></main></body></html>
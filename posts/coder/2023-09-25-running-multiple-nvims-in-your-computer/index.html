<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Neovim 配置隔离-实现多语言环境支持 - POLOXUE's 博客频道</title><meta name=viewport content="width=device-width,initial-scale=1"><meta itemprop=name content="Neovim 配置隔离-实现多语言环境支持"><meta itemprop=description content="本文将介绍如何实现 Neovim 的配置隔离，实现不同编程语言使用不同的编辑器配置。
背景说明 近段时间，一直在学习如何高效使用 Neovim。不断配置的过程中想到，Neovim 是否支持配置隔离，不同用途不同配置。最直接的体现，我希望把 Python 和 Golang 的编辑开发环境的配置隔离。
类似如下效果：
nvim-golang main.go nvim-python main.py nvim-cpp main.cpp 提到这，不由地想到了 Jetbrain 全家桶，针对不同编程语言开发了各自的 IDE，如 goland，pycharm，webstorm、clion 等。猜测原因，或许是为了多赚钱，另一方面，不同语言一定有个性化配置，隔离能减少耦合。
如何实现呢？进入正题吧。
几年前，写过一篇关于 &ldquo;Golang 多环境管理 GVM&rdquo; 的文章。本质上，要实现这种多环境隔离，一般都是通过环境变量实现。查了些资料，Neovim 其实也不例外。
方案 1：基于 XDG 配置 Neovim 的目录遵循 XDG 目录规范。具体是什么意思呢？
XDG 本质是一套规范，定义了一组环境便令，用于说明应用程序储存信息目录的一套标准。熟悉 Linux 的朋友应该了解，我们以往一直习惯于把应用的配置以 .xxx 的形式放在用户的 $HOME 目录，导致 $HOME 下的点隐藏文件泛滥，而这套规范的出现，使我们轻易目标目标。
就以 Neovim 为例：
Neovim 的配置文件存放默认存放在 $XDG_CONFIG_HOME/nvim，数据目录默认在 $XDG_DATA_HOME/nvim，状态数据目录默认在 $XDG_STATE_HOME/nvim，缓存数据目录默认在 $XDG_CACHE_HOME/nvim。
通过修改 XDG 环境变量，即可实现环境隔离。
如下 nvim-golang 的启动脚本：
#!/bin/bash export XDG_CONFIG_HOME=$HOME/.config/nvim-golang export XDG_DATA_HOME=$HOME/.local/share/nvim-golang export XDG_STATE_HOME=$HOME/."><meta itemprop=datePublished content="2023-09-25T15:06:02+08:00"><meta itemprop=dateModified content="2023-09-25T15:06:02+08:00"><meta itemprop=wordCount content="391"><meta itemprop=keywords content="vim,neovim,"><meta property="og:title" content="Neovim 配置隔离-实现多语言环境支持"><meta property="og:description" content="本文将介绍如何实现 Neovim 的配置隔离，实现不同编程语言使用不同的编辑器配置。
背景说明 近段时间，一直在学习如何高效使用 Neovim。不断配置的过程中想到，Neovim 是否支持配置隔离，不同用途不同配置。最直接的体现，我希望把 Python 和 Golang 的编辑开发环境的配置隔离。
类似如下效果：
nvim-golang main.go nvim-python main.py nvim-cpp main.cpp 提到这，不由地想到了 Jetbrain 全家桶，针对不同编程语言开发了各自的 IDE，如 goland，pycharm，webstorm、clion 等。猜测原因，或许是为了多赚钱，另一方面，不同语言一定有个性化配置，隔离能减少耦合。
如何实现呢？进入正题吧。
几年前，写过一篇关于 &ldquo;Golang 多环境管理 GVM&rdquo; 的文章。本质上，要实现这种多环境隔离，一般都是通过环境变量实现。查了些资料，Neovim 其实也不例外。
方案 1：基于 XDG 配置 Neovim 的目录遵循 XDG 目录规范。具体是什么意思呢？
XDG 本质是一套规范，定义了一组环境便令，用于说明应用程序储存信息目录的一套标准。熟悉 Linux 的朋友应该了解，我们以往一直习惯于把应用的配置以 .xxx 的形式放在用户的 $HOME 目录，导致 $HOME 下的点隐藏文件泛滥，而这套规范的出现，使我们轻易目标目标。
就以 Neovim 为例：
Neovim 的配置文件存放默认存放在 $XDG_CONFIG_HOME/nvim，数据目录默认在 $XDG_DATA_HOME/nvim，状态数据目录默认在 $XDG_STATE_HOME/nvim，缓存数据目录默认在 $XDG_CACHE_HOME/nvim。
通过修改 XDG 环境变量，即可实现环境隔离。
如下 nvim-golang 的启动脚本：
#!/bin/bash export XDG_CONFIG_HOME=$HOME/.config/nvim-golang export XDG_DATA_HOME=$HOME/.local/share/nvim-golang export XDG_STATE_HOME=$HOME/."><meta property="og:type" content="article"><meta property="og:url" content="https://www.poloxue.com/posts/coder/2023-09-25-running-multiple-nvims-in-your-computer/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-09-25T15:06:02+08:00"><meta property="article:modified_time" content="2023-09-25T15:06:02+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Neovim 配置隔离-实现多语言环境支持"><meta name=twitter:description content="本文将介绍如何实现 Neovim 的配置隔离，实现不同编程语言使用不同的编辑器配置。
背景说明 近段时间，一直在学习如何高效使用 Neovim。不断配置的过程中想到，Neovim 是否支持配置隔离，不同用途不同配置。最直接的体现，我希望把 Python 和 Golang 的编辑开发环境的配置隔离。
类似如下效果：
nvim-golang main.go nvim-python main.py nvim-cpp main.cpp 提到这，不由地想到了 Jetbrain 全家桶，针对不同编程语言开发了各自的 IDE，如 goland，pycharm，webstorm、clion 等。猜测原因，或许是为了多赚钱，另一方面，不同语言一定有个性化配置，隔离能减少耦合。
如何实现呢？进入正题吧。
几年前，写过一篇关于 &ldquo;Golang 多环境管理 GVM&rdquo; 的文章。本质上，要实现这种多环境隔离，一般都是通过环境变量实现。查了些资料，Neovim 其实也不例外。
方案 1：基于 XDG 配置 Neovim 的目录遵循 XDG 目录规范。具体是什么意思呢？
XDG 本质是一套规范，定义了一组环境便令，用于说明应用程序储存信息目录的一套标准。熟悉 Linux 的朋友应该了解，我们以往一直习惯于把应用的配置以 .xxx 的形式放在用户的 $HOME 目录，导致 $HOME 下的点隐藏文件泛滥，而这套规范的出现，使我们轻易目标目标。
就以 Neovim 为例：
Neovim 的配置文件存放默认存放在 $XDG_CONFIG_HOME/nvim，数据目录默认在 $XDG_DATA_HOME/nvim，状态数据目录默认在 $XDG_STATE_HOME/nvim，缓存数据目录默认在 $XDG_CACHE_HOME/nvim。
通过修改 XDG 环境变量，即可实现环境隔离。
如下 nvim-golang 的启动脚本：
#!/bin/bash export XDG_CONFIG_HOME=$HOME/.config/nvim-golang export XDG_DATA_HOME=$HOME/.local/share/nvim-golang export XDG_STATE_HOME=$HOME/."><script data-goatcounter=https://poloxue.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/main.css><link rel=stylesheet type=text/css media=screen href=https://www.poloxue.com/css/extra.css><link id=dark-scheme rel=stylesheet type=text/css href=https://www.poloxue.com/css/dark.css><script src=https://www.poloxue.com/js/main.js></script></head><body><div class="container wrapper"><div class=header><div class=avatar><a href=https://www.poloxue.com/><img src=/avatar.webp alt="POLOXUE's 博客频道"></a></div><h1 class=site-title><a href=https://www.poloxue.com/>POLOXUE's 博客频道</a></h1><div class=site-description><nav class="nav social"><ul class=flat></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>首页</a></li><li><a href=/posts/coder>编程</a></li><li><a href=/posts/trader>交易</a></li><li><a href=/posts/english>英语</a></li><li><a href=/posts/translator>译文</a></li><li><a href=/about/>About</a></li></ul></nav></div><div class=post><div class=post-header><div class=meta><div class=date><span class=day>25</span>
<span class=rest>Sep 2023</span></div></div><div class=matter><h1 class=title>Neovim 配置隔离-实现多语言环境支持</h1></div></div><p>本文将介绍如何实现 Neovim 的配置隔离，实现不同编程语言使用不同的编辑器配置。</p><h2 id=背景说明>背景说明</h2><p>近段时间，一直在学习如何高效使用 Neovim。不断配置的过程中想到，Neovim 是否支持配置隔离，不同用途不同配置。最直接的体现，我希望把 Python 和 Golang 的编辑开发环境的配置隔离。</p><p>类似如下效果：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nvim-golang main.go
</span></span><span style=display:flex><span>nvim-python main.py
</span></span><span style=display:flex><span>nvim-cpp main.cpp
</span></span></code></pre></div><blockquote><p>提到这，不由地想到了 Jetbrain 全家桶，针对不同编程语言开发了各自的 IDE，如 goland，pycharm，webstorm、clion 等。猜测原因，或许是为了多赚钱，另一方面，不同语言一定有个性化配置，隔离能减少耦合。</p></blockquote><p>如何实现呢？进入正题吧。</p><blockquote><p>几年前，写过一篇关于 &ldquo;Golang 多环境管理 GVM&rdquo; 的文章。本质上，要实现这种多环境隔离，一般都是通过环境变量实现。查了些资料，Neovim 其实也不例外。</p></blockquote><h2 id=方案-1基于-xdg-配置>方案 1：基于 XDG 配置</h2><p>Neovim 的目录遵循 XDG 目录规范。具体是什么意思呢？</p><p>XDG 本质是一套规范，定义了一组环境便令，用于说明应用程序储存信息目录的一套标准。熟悉 Linux 的朋友应该了解，我们以往一直习惯于把应用的配置以 .xxx 的形式放在用户的 <code>$HOME</code> 目录，导致 <code>$HOME</code> 下的点隐藏文件泛滥，而这套规范的出现，使我们轻易目标目标。</p><p>就以 Neovim 为例：</p><p>Neovim 的配置文件存放默认存放在 <code>$XDG_CONFIG_HOME/nvim</code>，数据目录默认在 <code>$XDG_DATA_HOME/nvim</code>，状态数据目录默认在 <code>$XDG_STATE_HOME/nvim</code>，缓存数据目录默认在 <code>$XDG_CACHE_HOME/nvim</code>。</p><p>通过修改 XDG 环境变量，即可实现环境隔离。</p><p>如下 nvim-golang 的启动脚本：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>export XDG_CONFIG_HOME<span style=color:#f92672>=</span>$HOME/.config/nvim-golang
</span></span><span style=display:flex><span>export XDG_DATA_HOME<span style=color:#f92672>=</span>$HOME/.local/share/nvim-golang
</span></span><span style=display:flex><span>export XDG_STATE_HOME<span style=color:#f92672>=</span>$HOME/.local/state/nvim-golang
</span></span><span style=display:flex><span>export XDG_CACHE_HOME<span style=color:#f92672>=</span>$HOME/.cache/nvim-golang
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nvim $@
</span></span></code></pre></div><p>注：XDG 变量的修改范围只能在命令脚本内，不可影响 XDG 全局配置。</p><p>现在的 nvim 目录情况：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$HOME/.config/nvim --&gt; $HOME/.config/nvim-golang/nvim
</span></span><span style=display:flex><span>$HOME/.local/share/nvim --&gt; $HOME/.local/share/nvim-golang/nvim
</span></span><span style=display:flex><span>$HOME/.local/state/nvim --&gt; $HOME/.local/state/nvim-golang/nvim
</span></span><span style=display:flex><span>$HOME/.cache/nvim --&gt; $HOME/.cache/nvim-golang/nvim
</span></span></code></pre></div><p>假设，配置一个 nvim-golang 的编辑器，以 LunarVim 的作者提供的 nvim-basic-ide 配置为例。</p><p>下载配置到指定目录：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/LunarVim/nvim-basic-ide.git $HOME/.config/nvim-golang/nvim
</span></span></code></pre></div><p>假设，上述启动脚本文件名为 <code>nvim-golang</code>，执行脚本 <code>nvim-golang main.go</code> 编辑文件，初次进入会下载安装 <code>nvim-basic-ide</code> 中的插件。</p><h2 id=方案二nvim_appname>方案二：NVIM_APPNAME</h2><p>或许是官方也知道了配置隔离的价值。从 Neovim 0.9.0 开始，Neovim 默认支持一个环境变量 <code>NVIM_APPNAME</code> 隔离环境配置。</p><p>以 nvim-python 为例，我们只需通过 <code>NVIM_APPNAME=nvim-python nvim main.py</code>，即可改变 Nvim 的目录。</p><p>此时目录：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$HOME/.config/nvim --&gt; $HOME/.config/nvim-golang
</span></span><span style=display:flex><span>$HOME/.local/share/nvim --&gt; $HOME/.local/share/nvim-golang
</span></span><span style=display:flex><span>$HOME/.local/state/nvim --&gt; $HOME/.local/state/nvim-golang
</span></span><span style=display:flex><span>$HOME/.cache/nvim --&gt; $HOME/.cache/nvim-golang
</span></span></code></pre></div><p>相对于方案一而言，无需在 nvim-python 追加子目录 nvim ，启动脚本 <code>nvim-python</code> 的内容只要一行代码：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>NVIM_APPNAME<span style=color:#f92672>=</span>nvim-python nvim @
</span></span></code></pre></div><p>或者更简洁的实现，通过 alias 别名：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>alias nvim-python<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;NVIM_APPNAME=nvim-python nvim&#34;</span>
</span></span></code></pre></div><p>将 <code>nvim-basic-ide</code> 下载到 <code>~/.config/nvim-python</code> 下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/LunarVim/nvim-basic-ide.git $HOME/.config/nvim-python
</span></span></code></pre></div><p>与方案一的效果一致，后面针对 python 环境的定制就可以都在这个环境下进行了。</p><h2 id=方案三混合使用>方案三：混合使用</h2><p>方案一和二都有个小缺点，首先一方案 nvim-golang 总要追加一个子目录，而方案二呢？在 ~/.config 下会创建多个 nvim 相关配置。</p><p>那么，有没有一种方法，能将 nvim 的不同配置集合到一个目录之下，统一管理，效果以类似于:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$HOME/
</span></span><span style=display:flex><span>  - .config/
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span>    - nvims
</span></span><span style=display:flex><span>      - golang
</span></span><span style=display:flex><span>      - python
</span></span><span style=display:flex><span>    ...
</span></span></code></pre></div><p>简单！两者结合即可：</p><p>首先，将 XDG 的配置统一下移到 <code>nvms</code> 下，什么意思呢？如原来的 <code>XDG_CONFIG_HOME</code> 是 <code>$HOME/.config/</code>，现在是 <code>$HOME/.config/nvims</code>，其他变量类似：</p><p>脚本如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export XDG_CONFIG_HOME<span style=color:#f92672>=</span>$HOME/.config/nvims
</span></span><span style=display:flex><span>export XDG_DATA_HOME<span style=color:#f92672>=</span>$HOME/.local/share/nvims
</span></span><span style=display:flex><span>export XDG_STATE_HOME<span style=color:#f92672>=</span>$HOME/.local/state/nvims
</span></span><span style=display:flex><span>export XDG_CACHE_HOME<span style=color:#f92672>=</span>$HOME/.cache/nvims
</span></span></code></pre></div><p>接着，通过 <code>NVIM_APPNAME</code> 作为 <code>nvims</code> 的子目录。如 <code>nvim-golang</code> 的命令实现：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>NVIM_APPNAME<span style=color:#f92672>=</span>golang nvim $@
</span></span></code></pre></div><p>现在只要将 <code>nvim-basic-ide</code> 的配置下载在 <code>$HOME/.config/nvims/golang</code> 下。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/LunarVim/nvim-basic-ide.git $HOME/.config/nvims/golang
</span></span></code></pre></div><p>搞定！</p><p>完整 <code>nvim-golang</code> 脚本如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export XDG_CONFIG_HOME<span style=color:#f92672>=</span>$HOME/.config/nvims
</span></span><span style=display:flex><span>export XDG_DATA_HOME<span style=color:#f92672>=</span>$HOME/.local/share/nvims
</span></span><span style=display:flex><span>export XDG_STATE_HOME<span style=color:#f92672>=</span>$HOME/.local/state/nvims
</span></span><span style=display:flex><span>export XDG_CACHE_HOME<span style=color:#f92672>=</span>$HOME/.cache/nvims
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NVIM_APPNAME<span style=color:#f92672>=</span>golang nvim $@
</span></span></code></pre></div><p>启动 <code>nvim-golang</code> 查看效果。</p><h2 id=插件复用>插件复用</h2><p>最后，还有一个问题，即配置的过程中，可能已经有朋友发现，插件会重复多次下载。这是因为，默认插件在下载位置位于 <code>$XDG_DATA_HOME/$NVIM_APPNAME</code> 下，故而不同的 <code>$XDG_DATA_HOME</code> 或 <code>NVIM_APPNAME</code> 都会导致下载插件所在位置的不同。</p><p>但插件管理器一般是支持配置插件下载路径的，以 lazy 为例，<code>nvim-basic-ide</code> 中 <code>init.lua</code> 中的代码如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>local lazypath <span style=color:#f92672>=</span> vim.fn.stdpath <span style=color:#e6db74>&#34;data&#34;</span> .. <span style=color:#e6db74>&#34;/lazy/lazy.nvim&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> not vim.loop.fs_stat<span style=color:#f92672>(</span>lazypath<span style=color:#f92672>)</span> <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  vim.fn.system <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;git&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;clone&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;--filter=blob:none&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;https://github.com/folke/lazy.nvim.git&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;--branch=stable&#34;</span>, -- latest stable release
</span></span><span style=display:flex><span>    lazypath,
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>end
</span></span><span style=display:flex><span>vim.opt.rtp:prepend<span style=color:#f92672>(</span>lazypath<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>-- ...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>require<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;lazy&#34;</span><span style=color:#f92672>)</span>.setup<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;user&#34;</span>, <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  root <span style=color:#f92672>=</span> vim.fn.stdpath<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;data&#34;</span><span style=color:#f92672>)</span> .. <span style=color:#e6db74>&#34;/../lazy&#34;</span>,
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span><span style=color:#f92672>})</span>
</span></span></code></pre></div><p>通过修改 <code>lazypath</code> 可以和 <code>setup</code> 时设置 <code>root</code> 变量实现多环境共享插件。</p><p>那么，插件的问题解决了。</p><p>尝试实操下。</p><p>首先，下载 <code>nvim-basic-ide</code> 到 nvims 的 <code>~/.config/nvims/golang/</code> 目录。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/LunarVim/nvim-basic-ide.git $HOME/.config/nvims/golang
</span></span></code></pre></div><p>将 <code>$HOME/.config/nvims/golang/lua/Lazy.lua</code> 中的 <code>lazypath</code> 更新为：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#66d9ef>local</span> lazypath <span style=color:#f92672>=</span> vim.fn.stdpath <span style=color:#e6db74>&#34;data&#34;</span> <span style=color:#f92672>..</span> <span style=color:#e6db74>&#34;/../lazy/lazy.nvim&#34;</span>
</span></span></code></pre></div><p>同样方法配置 nvim-python，将 <code>nvim-golang</code> 配置拷贝一份，即 <code>~/.config/nvims/golang</code> 拷贝到 <code>~/.config/nvims/python</code>。同时，将 <code>nvim-golang</code> 启动脚本拷贝一份为 <code>nvim-python</code>，<code>NVIM_APPNAME</code> 修改为 <code>python</code>。</p><p>如下所示：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>export XDG_CONFIG_HOME<span style=color:#f92672>=</span>$HOME/.config/nvims
</span></span><span style=display:flex><span>export XDG_DATA_HOME<span style=color:#f92672>=</span>$HOME/.local/share/nvims
</span></span><span style=display:flex><span>export XDG_STATE_HOME<span style=color:#f92672>=</span>$HOME/.local/state/nvims
</span></span><span style=display:flex><span>export XDG_CACHE_HOME<span style=color:#f92672>=</span>$HOME/.cache/nvims
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NVIM_APPNAME<span style=color:#f92672>=</span>python nvim $@
</span></span></code></pre></div><p>测试效果，启动 nvim-python 已无需重新加载插件。</p><blockquote><p>另外一个优化点，是否可以将 <code>nvim-basic-ide</code> 的能力作为基础共享，在此基础上配置 <code>goalng</code> 和 <code>python</code> 各自的配置。</p><p>额？好像 <code>LunarVim</code> 支持这个能力，它已经把用户配置从核心 IDE 基础配置中摘除出来了。</p><p>好了，不扯太远了。有机会再看看 LunarVim 的多环境配置吧。</p></blockquote><h2 id=最后>最后</h2><p>关于配置隔离的思路，到此就已经全部介绍完了。</p><p>这个思路不仅仅可用于多语言环境的隔离，对于市面上有很多别人维护的配置，利用这个思路都能快速下载体验。</p><p>如下是市面上流行的一些集成配置：</p><ul><li><a href=https://github.com/nvim-lua/kickstart.nvim>kickstart</a>，所有配置一个文件搞定；</li><li><a href=https://github.com/LunarVim/nvim-basic-ide>neovim-basic-ide</a>: 本文测试所用，LunarVim 开发者维护的一个基础配置；</li><li><a href=https://github.com/LazyVim/LazyVim.git>LazyVim</a>: 提供 IDE 所需的基本配置；</li><li>还有 <a href=https://github.com/NvChad/NvChad>NvChad</a> 等，甚至一些个人也会开源自己的配置；</li></ul><p>有兴趣都可以尝试下有什么差异。</p><p><a href=https://www.poloxue.com/posts/coder/2023-09-25-running-multiple-nvims-in-your-computer/>原文地址</a></p><hr class=footer-separator><div class=tags><ul class=flat><li class=tag-li><a href=/tags/vim>vim</a></li><li class=tag-li><a href=/tags/neovim>neovim</a></li></ul></div><div class=back><a href=https://www.poloxue.com/><span aria-hidden=true>← Back</span></a></div><div class=back></div></div><div class=utterances></div><script src=https://utteranc.es/client.js repo=poloxue/blog issue-term=pathname theme=github-light crossorigin=anonymous async></script></div><div class="footer wrapper"><nav class=nav><div>2023 2023 Polo Xue All rights reserved</div></nav></div></body></html>